import{d as Q,L as Y,C as T,u as Z,l as x,c as k,o as n,w as a,a as o,b as l,e,h as ee,t as d,f as r,n as B,k as V,i as c,F as C,s as $,q as te,p as R,j as f,m as se,v as le}from"./app-Ca0afq3n.js";import{_ as oe}from"./WebLayout.vue_vue_type_script_setup_true_lang-D-woEnGy.js";import{_ as U}from"./index-G1C2CR8F.js";import{_ as b,a as _}from"./CardContent.vue_vue_type_script_setup_true_lang-CgsRRZyd.js";import{_ as v}from"./CardHeader.vue_vue_type_script_setup_true_lang-4fONgwlj.js";import{_ as y}from"./CardTitle.vue_vue_type_script_setup_true_lang-Ba9ncbbw.js";import{_ as F}from"./Input.vue_vue_type_script_setup_true_lang-C8Zmhzql.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-N9_9sBsz.js";import{_ as S}from"./index-3Q5PlVJg.js";import{_ as g}from"./InputError.vue_vue_type_script_setup_true_lang-C3SrCxy1.js";import{v as ae,p as ie,a as re,b as ne,c as de,d as ue,e as ce,I as fe,V as pe,S as me,f as ge}from"./filepond-plugin-image-transform.esm-DVRA8B0a.js";import{F as xe}from"./file-text-93NE-onm.js";import{X as N}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-DK07fgD3.js";import{T as be}from"./tag-Ca6N-1Tf.js";import"./createLucideIcon-DPfk0LRx.js";import"./Primitive-CCTnzWDl.js";import"./useForwardExpose-DohNH0gZ.js";import"./usePrimitiveElement-B7nxCNRu.js";import"./RovingFocusGroup-CGclM9bG.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-dW9Vi417.js";const _e={class:"min-h-screen py-8"},ve={class:"max-w-4xl mx-auto px-4"},ye={class:"mb-8"},we={class:"text-[#999999]"},he={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ke={class:"lg:col-span-2 space-y-6"},Be=["value"],Ve={class:"mt-2 grid grid-cols-2 gap-2"},Ce=["onClick"],$e={class:"flex items-center gap-2"},Ue={class:"text-lg"},Fe={class:"font-medium"},Me={class:"text-xs opacity-75"},Pe={class:"mt-2"},ze={key:0,class:"mt-2"},je={class:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-[#4B5563] rounded-lg cursor-pointer hover:border-[#ff6e02] transition-colors bg-[#1c1c1c]"},Te={class:"flex flex-col items-center justify-center pt-5 pb-6"},Se={key:1,class:"mt-2"},Le={class:"relative bg-[#1c1c1c] rounded-lg overflow-hidden"},Ie=["src"],Re={class:"text-xs text-[#999999] mt-1"},Ne={class:"flex gap-2 mb-3"},qe={key:0,class:"flex flex-wrap gap-2"},Oe=["onClick"],De={class:"space-y-6"},Ge={class:"flex items-center justify-between"},We={class:"relative inline-flex items-center cursor-pointer"},Ke={key:0,class:"space-y-4 pt-4 border-t border-[#4B5563]"},Ee={key:0},Je={class:"space-y-2 pt-4 border-t border-[#4B5563]"},Xe={key:0,class:"flex items-center gap-2"},Ae={class:"text-lg"},He={key:1,class:"text-white font-medium"},Qe={key:2,class:"flex items-center gap-2"},Ye={class:"text-sm text-[#999999]"},Ze={key:3,class:"text-sm text-[#999999] line-clamp-3"},et={key:4,class:"flex flex-wrap gap-1"},tt={key:0,class:"text-xs text-[#999999]"},Bt=Q({__name:"Create",props:{categories:{}},setup(q){const O=ae(ce,ue,de,ne,re,ie),D=q,G=Y(),W=T(()=>G.props.auth?.user?.is_creator||!1),s=Z({title:"",content:"",post_category_id:"",type:"discussion",excerpt:"",images:[],video:null,videos:[],tags:[],is_premium:!1,price:null,free_after:null,status:"draft"}),w=x("");x("");const M=x(null),P=x(null),m=x(null),L=[{value:"discussion",label:"è®¨è®º",icon:"ğŸ’¬",description:"åˆ†äº«æƒ³æ³•å’Œè§‚ç‚¹"},{value:"tutorial",label:"æ•™ç¨‹",icon:"ğŸ“–",description:"åˆ†äº«çŸ¥è¯†å’ŒæŠ€èƒ½"},{value:"showcase",label:"å±•ç¤º",icon:"ğŸ¨",description:"å±•ç¤ºä½ çš„ä½œå“"},{value:"question",label:"é—®é¢˜",icon:"â“",description:"å¯»æ±‚å¸®åŠ©å’Œå»ºè®®"}],z=T(()=>D.categories.find(u=>u.id.toString()===s.post_category_id)),h=T(()=>L.find(u=>u.value===s.type));function I(){const u=w.value.trim();u&&!s.tags.includes(u)&&(s.tags.push(u),w.value="")}function K(u){s.tags.splice(u,1)}function E(){if(M.value){const u=M.value.getFiles();s.images=u.map(t=>t.file)}}function J(u){const i=u.target.files?.[0];if(i){if(i.size>100*1024*1024){alert("è§†é¢‘æ–‡ä»¶å¤ªå¤§ï¼æœ€å¤§æ”¯æŒ100MB");return}if(!i.type.startsWith("video/")){alert("è¯·ä¸Šä¼ æœ‰æ•ˆçš„è§†é¢‘æ–‡ä»¶");return}s.video=i,m.value&&URL.revokeObjectURL(m.value),m.value=URL.createObjectURL(i)}}function X(){s.video=null,m.value&&(URL.revokeObjectURL(m.value),m.value=null),P.value&&(P.value.value="")}function A(){s.status="draft",s.post("/posts",{onSuccess:()=>{}})}function H(){s.status="published",s.post("/posts",{onSuccess:()=>{}})}return(u,t)=>(n(),k(oe,null,{default:a(()=>[o(e(ee),{title:"åˆ›å»ºæ–°å¸–å­"}),l("div",_e,[l("div",ve,[l("div",ye,[t[8]||(t[8]=l("h1",{class:"text-3xl font-bold text-white mb-2"},"åˆ›å»ºæ–°å¸–å­",-1)),l("p",we,"åˆ†äº«ä½ çš„æƒ³æ³•ã€ç»éªŒæˆ–é—®é¢˜ç»™"+d(u.$page.props.name),1)]),l("div",he,[l("div",ke,[o(e(b),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[o(e(v),null,{default:a(()=>[o(e(y),{class:"text-white flex items-center gap-2"},{default:a(()=>[o(e(xe),{class:"h-5 w-5"}),t[9]||(t[9]=r(" åŸºæœ¬ä¿¡æ¯ ",-1))]),_:1,__:[9]})]),_:1}),o(e(_),{class:"space-y-4"},{default:a(()=>[l("div",null,[o(e(p),{for:"title",class:"text-white"},{default:a(()=>t[10]||(t[10]=[r("æ ‡é¢˜ *",-1)])),_:1,__:[10]}),o(e(F),{id:"title",modelValue:e(s).title,"onUpdate:modelValue":t[0]||(t[0]=i=>e(s).title=i),placeholder:"è¾“å…¥å¸–å­æ ‡é¢˜...",class:B(["mt-1 bg-[#1c1c1c] border-[#4B5563] text-white placeholder:text-[#999999]",{"border-red-500":e(s).errors.title}])},null,8,["modelValue","class"]),o(g,{message:e(s).errors.title,class:"mt-1"},null,8,["message"])]),l("div",null,[o(e(p),{class:"text-white"},{default:a(()=>t[11]||(t[11]=[r("åˆ†ç±» *",-1)])),_:1,__:[11]}),V(l("select",{"onUpdate:modelValue":t[1]||(t[1]=i=>e(s).post_category_id=i),class:B(["mt-1 w-full bg-[#1c1c1c] border border-[#4B5563] text-white rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#ff6e02] focus:border-[#ff6e02]",{"border-red-500":e(s).errors.post_category_id}])},[t[12]||(t[12]=l("option",{value:"",class:"text-[#999999]"},"é€‰æ‹©åˆ†ç±»",-1)),(n(!0),c(C,null,$(u.categories,i=>(n(),c("option",{key:i.id,value:i.id.toString(),class:"bg-[#1c1c1c] text-white"},d(i.name),9,Be))),128))],2),[[te,e(s).post_category_id]]),o(g,{message:e(s).errors.post_category_id,class:"mt-1"},null,8,["message"])]),l("div",null,[o(e(p),{class:"text-white"},{default:a(()=>t[13]||(t[13]=[r("å¸–å­ç±»å‹ *",-1)])),_:1,__:[13]}),l("div",Ve,[(n(),c(C,null,$(L,i=>l("button",{key:i.value,type:"button",onClick:j=>e(s).type=i.value,class:B(["p-3 rounded-lg border text-left transition-colors",e(s).type===i.value?"border-[#ff6e02] bg-[#ff6e02]/10 text-[#ff6e02]":"border-[#4B5563] bg-[#1c1c1c] text-white hover:border-[#6B7280]"])},[l("div",$e,[l("span",Ue,d(i.icon),1),l("div",null,[l("div",Fe,d(i.label),1),l("div",Me,d(i.description),1)])])],10,Ce)),64))]),o(g,{message:e(s).errors.type,class:"mt-1"},null,8,["message"])]),l("div",null,[o(e(p),{for:"content",class:"text-white"},{default:a(()=>t[14]||(t[14]=[r("å†…å®¹ *",-1)])),_:1,__:[14]}),V(l("textarea",{id:"content","onUpdate:modelValue":t[2]||(t[2]=i=>e(s).content=i),placeholder:"å†™ä¸‹ä½ çš„å†…å®¹...",rows:"12",class:B(["mt-1 w-full bg-[#1c1c1c] border border-[#4B5563] text-white placeholder:text-[#999999] rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#ff6e02] focus:border-[#ff6e02] resize-y",{"border-red-500":e(s).errors.content}])},null,2),[[R,e(s).content]]),o(g,{message:e(s).errors.content,class:"mt-1"},null,8,["message"])]),l("div",null,[o(e(p),{for:"excerpt",class:"text-white"},{default:a(()=>t[15]||(t[15]=[r("æ‘˜è¦",-1)])),_:1,__:[15]}),V(l("textarea",{id:"excerpt","onUpdate:modelValue":t[3]||(t[3]=i=>e(s).excerpt=i),placeholder:"ç®€çŸ­æè¿°ä½ çš„å¸–å­å†…å®¹... (å¯é€‰)",rows:"3",class:"mt-1 w-full bg-[#1c1c1c] border border-[#4B5563] text-white placeholder:text-[#999999] rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#ff6e02] focus:border-[#ff6e02] resize-y"},null,512),[[R,e(s).excerpt]]),t[16]||(t[16]=l("p",{class:"text-xs text-[#999999] mt-1"},"ç”¨äºæœç´¢ç»“æœå’Œç¤¾äº¤åˆ†äº«çš„é¢„è§ˆ",-1))])]),_:1})]),_:1}),o(e(b),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[o(e(v),null,{default:a(()=>[o(e(y),{class:"text-white flex items-center gap-2"},{default:a(()=>[o(e(fe),{class:"h-5 w-5"}),t[17]||(t[17]=r(" åª’ä½“å†…å®¹ ",-1))]),_:1,__:[17]})]),_:1}),o(e(_),{class:"space-y-4"},{default:a(()=>[l("div",null,[o(e(p),{class:"text-white"},{default:a(()=>t[18]||(t[18]=[r("å›¾ç‰‡ (æœ€å¤š4å¼ )",-1)])),_:1,__:[18]}),l("div",Pe,[o(e(O),{ref_key:"pond",ref:M,name:"images","allow-multiple":!0,"max-files":4,"accepted-file-types":"image/jpeg, image/jpg, image/png, image/gif, image/webp","max-file-size":"5MB","label-idle":"æ‹–æ”¾å›¾ç‰‡æˆ– <span class='filepond--label-action'>æµè§ˆ</span>","label-file-loading":"åŠ è½½ä¸­","label-file-processing":"ä¸Šä¼ ä¸­","label-tap-to-cancel":"ç‚¹å‡»å–æ¶ˆ","label-tap-to-retry":"ç‚¹å‡»é‡è¯•","label-tap-to-undo":"ç‚¹å‡»æ’¤é”€","image-resize-target-width":1200,"image-resize-target-height":900,"image-resize-mode":"contain","image-resize-upscale":"false","image-transform-output-quality":85,"image-transform-output-quality-mode":"always",onUpdatefiles:E,"style-panel-layout":"compact","style-load-indicator-position":"center bottom","style-progress-indicator-position":"right bottom","style-button-remove-item-position":"left bottom","style-button-process-item-position":"right bottom"},null,512)]),t[19]||(t[19]=l("p",{class:"text-xs text-[#999999] mt-2"},"æ”¯æŒ JPG, PNG, GIF, WebPï¼Œå•å¼ æœ€å¤§5MBã€‚å›¾ç‰‡å°†è‡ªåŠ¨ä¼˜åŒ–ã€‚",-1)),o(g,{message:e(s).errors.images,class:"mt-1"},null,8,["message"])]),l("div",null,[o(e(p),{class:"text-white"},{default:a(()=>t[20]||(t[20]=[r("è§†é¢‘ (å¯é€‰)",-1)])),_:1,__:[20]}),m.value?f("",!0):(n(),c("div",ze,[l("label",je,[l("div",Te,[o(e(pe),{class:"w-10 h-10 mb-3 text-[#999999]"}),t[21]||(t[21]=l("p",{class:"mb-2 text-sm text-[#999999]"},[l("span",{class:"font-semibold text-[#ff6e02]"},"ç‚¹å‡»ä¸Šä¼ è§†é¢‘")],-1)),t[22]||(t[22]=l("p",{class:"text-xs text-[#999999]"},"æ”¯æŒ MP4, WebM, MOV (æœ€å¤§100MB)",-1))]),l("input",{ref_key:"videoInput",ref:P,type:"file",class:"hidden",accept:"video/*",onChange:J},null,544)])])),m.value?(n(),c("div",Se,[l("div",Le,[l("video",{src:m.value,controls:"",class:"w-full max-h-64 object-contain"},null,8,Ie),o(e(U),{type:"button",size:"sm",variant:"ghost",onClick:X,class:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white"},{default:a(()=>[o(e(N),{class:"h-4 w-4"})]),_:1})]),l("p",Re,d(e(s).video?.name)+" ("+d((e(s).video?.size/1024/1024).toFixed(2))+"MB) ",1)])):f("",!0),o(g,{message:e(s).errors.video,class:"mt-1"},null,8,["message"])])]),_:1})]),_:1}),o(e(b),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[o(e(v),null,{default:a(()=>[o(e(y),{class:"text-white flex items-center gap-2"},{default:a(()=>[o(e(be),{class:"h-5 w-5"}),t[23]||(t[23]=r(" æ ‡ç­¾ ",-1))]),_:1,__:[23]})]),_:1}),o(e(_),null,{default:a(()=>[l("div",Ne,[o(e(F),{modelValue:w.value,"onUpdate:modelValue":t[4]||(t[4]=i=>w.value=i),placeholder:"è¾“å…¥æ ‡ç­¾...",class:"bg-[#1c1c1c] border-[#4B5563] text-white placeholder:text-[#999999]",onKeyup:se(I,["enter"])},null,8,["modelValue"]),o(e(U),{type:"button",onClick:I,class:"bg-[#ff6e02] hover:bg-[#e55a00] text-white"},{default:a(()=>t[24]||(t[24]=[r(" æ·»åŠ  ",-1)])),_:1,__:[24]})]),e(s).tags.length>0?(n(),c("div",qe,[(n(!0),c(C,null,$(e(s).tags,(i,j)=>(n(),k(e(S),{key:j,class:"bg-[#ff6e02]/20 text-[#ff6e02] border-[#ff6e02]/30"},{default:a(()=>[r(d(i)+" ",1),l("button",{type:"button",onClick:st=>K(j),class:"ml-1 hover:text-red-300"},[o(e(N),{class:"h-3 w-3"})],8,Oe)]),_:2},1024))),128))])):f("",!0)]),_:1})]),_:1})]),l("div",De,[o(e(b),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[o(e(v),null,{default:a(()=>[o(e(y),{class:"text-white"},{default:a(()=>t[25]||(t[25]=[r("å‘å¸ƒè®¾ç½®",-1)])),_:1,__:[25]})]),_:1}),o(e(_),{class:"space-y-4"},{default:a(()=>[l("div",Ge,[l("div",null,[o(e(p),{class:"text-white"},{default:a(()=>t[26]||(t[26]=[r("é«˜çº§å†…å®¹",-1)])),_:1,__:[26]}),t[27]||(t[27]=l("p",{class:"text-xs text-[#999999]"},"ä»…VIPä¼šå‘˜å¯è§",-1))]),l("label",We,[V(l("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=i=>e(s).is_premium=i),class:"sr-only peer"},null,512),[[le,e(s).is_premium]]),t[28]||(t[28]=l("div",{class:"w-11 h-6 bg-[#4B5563] peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-[#ff6e02] rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#ff6e02]"},null,-1))])]),W.value?(n(),c("div",Ke,[l("div",null,[o(e(p),{for:"price",class:"text-white flex items-center gap-2"},{default:a(()=>t[29]||(t[29]=[r(" ğŸ’° å†…å®¹å®šä»· ",-1)])),_:1,__:[29]}),t[30]||(t[30]=l("p",{class:"text-xs text-[#999999] mb-2"},"è®¾ç½®ç”¨æˆ·éœ€è¦æ”¯ä»˜çš„ç§¯åˆ†æ•°é‡æ‰èƒ½æŸ¥çœ‹æ­¤å¸–å­",-1)),o(e(F),{id:"price",modelValue:e(s).price,"onUpdate:modelValue":t[6]||(t[6]=i=>e(s).price=i),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",placeholder:"0 = å…è´¹",class:"bg-[#1c1c1c] border-[#4B5563] text-white placeholder:text-[#999999]"},null,8,["modelValue"]),t[31]||(t[31]=l("p",{class:"text-xs text-[#999999] mt-1"},"ç•™ç©ºæˆ–è¾“å…¥0è¡¨ç¤ºå…è´¹",-1))]),e(s).price&&e(s).price>0?(n(),c("div",Ee,[o(e(p),{for:"free_after",class:"text-white flex items-center gap-2"},{default:a(()=>t[32]||(t[32]=[r(" â° å…è´¹å¼€æ”¾æ—¶é—´ ",-1)])),_:1,__:[32]}),t[33]||(t[33]=l("p",{class:"text-xs text-[#999999] mb-2"},"è®¾ç½®è¯¥æ—¥æœŸåæ­¤å†…å®¹å°†è‡ªåŠ¨å˜ä¸ºå…è´¹",-1)),o(e(F),{id:"free_after",modelValue:e(s).free_after,"onUpdate:modelValue":t[7]||(t[7]=i=>e(s).free_after=i),type:"datetime-local",class:"bg-[#1c1c1c] border-[#4B5563] text-white"},null,8,["modelValue"]),t[34]||(t[34]=l("p",{class:"text-xs text-[#999999] mt-1"},"å¯é€‰ï¼šç•™ç©ºè¡¨ç¤ºæ°¸ä¹…æ”¶è´¹",-1))])):f("",!0)])):f("",!0),l("div",Je,[o(e(U),{type:"button",onClick:A,disabled:e(s).processing,class:"w-full bg-[#4B5563] hover:bg-[#6B7280] text-white"},{default:a(()=>[o(e(me),{class:"h-4 w-4 mr-2"}),r(" "+d(e(s).processing?"ä¿å­˜ä¸­...":"ä¿å­˜è‰ç¨¿"),1)]),_:1},8,["disabled"]),o(e(U),{type:"button",onClick:H,disabled:e(s).processing,class:"w-full bg-[#ff6e02] hover:bg-[#e55a00] text-white"},{default:a(()=>[o(e(ge),{class:"h-4 w-4 mr-2"}),r(" "+d(e(s).processing?"å‘å¸ƒä¸­...":"ç«‹å³å‘å¸ƒ"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),e(s).title||z.value||h.value?(n(),k(e(b),{key:0,class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[o(e(v),null,{default:a(()=>[o(e(y),{class:"text-white"},{default:a(()=>t[35]||(t[35]=[r("é¢„è§ˆ",-1)])),_:1,__:[35]})]),_:1}),o(e(_),{class:"space-y-3"},{default:a(()=>[h.value?(n(),c("div",Xe,[l("span",Ae,d(h.value.icon),1),o(e(S),{class:"bg-[#ff6e02]/20 text-[#ff6e02] border-[#ff6e02]/30"},{default:a(()=>[r(d(h.value.label),1)]),_:1})])):f("",!0),e(s).title?(n(),c("h3",He,d(e(s).title),1)):f("",!0),z.value?(n(),c("div",Qe,[t[36]||(t[36]=l("div",{class:"w-3 h-3 rounded-full bg-[#ff6e02]"},null,-1)),l("span",Ye,d(z.value.name),1)])):f("",!0),e(s).excerpt?(n(),c("p",Ze,d(e(s).excerpt),1)):f("",!0),e(s).tags.length>0?(n(),c("div",et,[(n(!0),c(C,null,$(e(s).tags.slice(0,3),i=>(n(),k(e(S),{key:i,class:"text-xs bg-[#1c1c1c] text-[#999999]"},{default:a(()=>[r(" #"+d(i),1)]),_:2},1024))),128)),e(s).tags.length>3?(n(),c("span",tt," +"+d(e(s).tags.length-3)+" more ",1)):f("",!0)])):f("",!0)]),_:1})]),_:1})):f("",!0)])])])])]),_:1}))}});export{Bt as default};
