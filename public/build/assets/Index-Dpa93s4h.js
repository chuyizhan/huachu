import{d as J,r as u,c as q,o as v,w as r,a as d,b as e,e as s,h as O,k as g,m as Q,p as T,i as y,F as j,s as K,t as a,q as f,f as p,j as P,y as R,l as L}from"./app-DyXk8IaF.js";import{_ as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-BC5sw5E7.js";import{_ as X,a as Y,b as z,c as b,d as Z,e as m}from"./TableRow.vue_vue_type_script_setup_true_lang-CO9IO9UV.js";import"./Primitive-CiKKW9T_.js";import"./useForwardExpose-7I2fG1mB.js";import"./usePrimitiveElement-MVOMGuGN.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-BfztSxlL.js";import"./createLucideIcon-gz1WycZe.js";import"./RovingFocusGroup-3Zb9MZQB.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./VisuallyHidden-C7Js6IFF.js";import"./index-ClZyRjxd.js";import"./DialogTitle-DLwTu1_4.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-uAmYS6jQ.js";import"./shield-bXt9CF2R.js";import"./file-text-CDd-7Hnv.js";import"./trending-up-B57iOq84.js";import"./chevron-right-CcyUPAg8.js";import"./index-paYau2HE.js";const ee={class:"py-12"},te={class:"w-full sm:px-6 lg:px-8"},oe={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},re={class:"p-6 text-gray-900 dark:text-gray-100"},se={class:"mb-6 space-y-4"},ae={class:"flex flex-wrap gap-4"},le={class:"flex-1 min-w-[200px]"},de={class:"min-w-[150px]"},ne=["value"],ie={class:"min-w-[150px]"},ue=["value"],ge={class:"min-w-[120px]"},pe={class:"min-w-[120px]"},ve={class:"flex flex-wrap gap-4"},fe={class:"min-w-[120px]"},ye={class:"min-w-[120px]"},be={class:"min-w-[120px]"},me={class:"min-w-[120px]"},ce={class:"min-w-[150px]"},xe={class:"min-w-[150px]"},_e={class:"flex flex-wrap gap-4"},ke={class:"min-w-[150px]"},we={class:"min-w-[120px]"},he={class:"min-w-[120px]"},Ce={class:"overflow-x-auto"},Ve={class:"space-y-1 max-w-md"},$e={class:"font-medium"},Ue={class:"text-sm text-gray-500 dark:text-gray-400"},Se={key:0,class:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2"},De={class:"space-y-1"},Fe={class:"font-medium"},Ie={class:"text-sm text-gray-500 dark:text-gray-400"},Be={class:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"},Ne={class:"space-y-1"},Pe={class:"text-sm"},Te={class:"text-sm text-gray-500 dark:text-gray-400"},je={class:"flex flex-col gap-1"},Ke={key:0,class:"px-2 py-1 text-xs font-semibold text-yellow-800 bg-yellow-100 rounded-full dark:bg-yellow-900 dark:text-yellow-200 w-fit"},Le={key:1,class:"px-2 py-1 text-xs font-semibold text-purple-800 bg-purple-100 rounded-full dark:bg-purple-900 dark:text-purple-200 w-fit"},Me={key:2,class:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-200 w-fit"},qe={class:"text-sm space-y-1"},ze={class:"flex gap-2"},Ee=["onClick"],Ae={class:"mt-6 flex items-center justify-between"},Ge={class:"text-sm text-gray-700 dark:text-gray-300"},He={class:"flex gap-2"},Je=["disabled"],Oe={class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300"},Qe=["disabled"],bt=J({__name:"Index",props:{posts:{},categories:{},users:{},filters:{}},setup(E){const i=E,_=u(i.filters.search||""),k=u(i.filters.user_id||""),w=u(i.filters.category_id||""),h=u(i.filters.status||""),C=u(i.filters.type||""),V=u(i.filters.is_featured||""),$=u(i.filters.is_premium||""),U=u(i.filters.price_filter||""),S=u(i.filters.is_published||""),D=u(i.filters.date_from||""),F=u(i.filters.date_to||""),x=u(i.filters.sort_by||"created_at"),c=u(i.filters.sort_direction||"desc"),I=u(i.filters.per_page||20),n=()=>{L.get("/admin/posts",{search:_.value||void 0,user_id:k.value||void 0,category_id:w.value||void 0,status:h.value||void 0,type:C.value||void 0,is_featured:V.value||void 0,is_premium:$.value||void 0,price_filter:U.value||void 0,is_published:S.value||void 0,date_from:D.value||void 0,date_to:F.value||void 0,sort_by:x.value,sort_direction:c.value,per_page:I.value},{preserveState:!0,preserveScroll:!0})},A=()=>{_.value="",k.value="",w.value="",h.value="",C.value="",V.value="",$.value="",U.value="",S.value="",D.value="",F.value="",x.value="created_at",c.value="desc",I.value=20,n()},B=l=>{x.value===l?c.value=c.value==="asc"?"desc":"asc":(x.value=l,c.value="asc"),n()},N=l=>x.value!==l?"↕":c.value==="asc"?"↑":"↓",G=l=>l?new Date(l).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"未发布",M=l=>{L.get("/admin/posts",{...i.filters,page:l},{preserveState:!0,preserveScroll:!0})},H=l=>{confirm("确定要删除这个帖子吗？此操作无法撤销。")&&L.delete(`/admin/posts/${l}`,{preserveScroll:!0})};return(l,t)=>(v(),q(W,null,{default:r(()=>[d(s(O),{title:"帖子管理"}),e("div",ee,[e("div",te,[e("div",oe,[e("div",re,[t[37]||(t[37]=e("div",{class:"mb-6 flex items-center justify-between"},[e("h1",{class:"text-2xl font-semibold"},"帖子管理")],-1)),e("div",se,[e("div",ae,[e("div",le,[g(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>_.value=o),type:"text",placeholder:"搜索标题、别名、摘要或内容...",class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyup:Q(n,["enter"])},null,544),[[T,_.value]])]),e("div",de,[g(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>k.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:n},[t[20]||(t[20]=e("option",{value:""},"全部作者",-1)),(v(!0),y(j,null,K(l.users,o=>(v(),y("option",{key:o.id,value:o.id},a(o.name)+" (@"+a(o.login_name)+") ",9,ne))),128))],544),[[f,k.value]])]),e("div",ie,[g(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>w.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:n},[t[21]||(t[21]=e("option",{value:""},"全部分类",-1)),(v(!0),y(j,null,K(l.categories,o=>(v(),y("option",{key:o.id,value:o.id},a(o.name),9,ue))),128))],544),[[f,w.value]])]),e("div",ge,[g(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>h.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:n},t[22]||(t[22]=[e("option",{value:""},"全部状态",-1),e("option",{value:"draft"},"草稿",-1),e("option",{value:"published"},"已发布",-1),e("option",{value:"archived"},"已归档",-1)]),544),[[f,h.value]])]),e("div",pe,[g(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>C.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:n},t[23]||(t[23]=[e("option",{value:""},"全部类型",-1),e("option",{value:"article"},"文章",-1),e("option",{value:"video"},"视频",-1),e("option",{value:"image"},"图片",-1)]),544),[[f,C.value]])])]),e("div",ve,[e("div",fe,[g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>V.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:n},t[24]||(t[24]=[e("option",{value:""},"全部精选",-1),e("option",{value:"1"},"精选",-1),e("option",{value:"0"},"非精选",-1)]),544),[[f,V.value]])]),e("div",ye,[g(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>$.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:n},t[25]||(t[25]=[e("option",{value:""},"全部会员",-1),e("option",{value:"1"},"会员专享",-1),e("option",{value:"0"},"普通",-1)]),544),[[f,$.value]])]),e("div",be,[g(e("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>U.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:n},t[26]||(t[26]=[e("option",{value:""},"全部价格",-1),e("option",{value:"free"},"免费",-1),e("option",{value:"paid"},"付费",-1)]),544),[[f,U.value]])]),e("div",me,[g(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>S.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:n},t[27]||(t[27]=[e("option",{value:""},"发布状态",-1),e("option",{value:"1"},"已发布",-1),e("option",{value:"0"},"未发布",-1)]),544),[[f,S.value]])]),e("div",ce,[g(e("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>D.value=o),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:n},null,544),[[T,D.value]])]),e("div",xe,[g(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>F.value=o),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:n},null,544),[[T,F.value]])])]),e("div",_e,[e("div",ke,[g(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>x.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:n},t[28]||(t[28]=[e("option",{value:"id"},"ID",-1),e("option",{value:"title"},"标题",-1),e("option",{value:"view_count"},"浏览量",-1),e("option",{value:"like_count"},"点赞数",-1),e("option",{value:"published_at"},"发布时间",-1),e("option",{value:"created_at"},"创建时间",-1)]),544),[[f,x.value]])]),e("div",we,[g(e("select",{"onUpdate:modelValue":t[12]||(t[12]=o=>c.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:n},t[29]||(t[29]=[e("option",{value:"asc"},"升序",-1),e("option",{value:"desc"},"降序",-1)]),544),[[f,c.value]])]),e("div",he,[g(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>I.value=o),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:n},t[30]||(t[30]=[e("option",{value:10},"10 / 页",-1),e("option",{value:20},"20 / 页",-1),e("option",{value:50},"50 / 页",-1),e("option",{value:100},"100 / 页",-1)]),544),[[f,I.value]])])]),e("div",{class:"flex gap-2"},[e("button",{type:"button",class:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:n}," 搜索 "),e("button",{type:"button",class:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",onClick:A}," 重置 ")])]),e("div",Ce,[d(s(X),null,{default:r(()=>[d(s(Y),null,{default:r(()=>[d(s(z),null,{default:r(()=>[d(s(b),{class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:t[14]||(t[14]=o=>B("id"))},{default:r(()=>[p(" ID "+a(N("id")),1)]),_:1}),d(s(b),{class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:t[15]||(t[15]=o=>B("title"))},{default:r(()=>[p(" 帖子信息 "+a(N("title")),1)]),_:1}),d(s(b),null,{default:r(()=>t[31]||(t[31]=[p("作者",-1)])),_:1,__:[31]}),d(s(b),null,{default:r(()=>t[32]||(t[32]=[p("分类",-1)])),_:1,__:[32]}),d(s(b),null,{default:r(()=>t[33]||(t[33]=[p("状态/类型",-1)])),_:1,__:[33]}),d(s(b),null,{default:r(()=>t[34]||(t[34]=[p("标签",-1)])),_:1,__:[34]}),d(s(b),{class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:t[16]||(t[16]=o=>B("view_count"))},{default:r(()=>[p(" 统计 "+a(N("view_count")),1)]),_:1}),d(s(b),{class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:t[17]||(t[17]=o=>B("created_at"))},{default:r(()=>[p(" 创建时间 "+a(N("created_at")),1)]),_:1}),d(s(b),null,{default:r(()=>t[35]||(t[35]=[p("操作",-1)])),_:1,__:[35]})]),_:1})]),_:1}),d(s(Z),null,{default:r(()=>[(v(!0),y(j,null,K(l.posts.data,o=>(v(),q(s(z),{key:o.id},{default:r(()=>[d(s(m),{class:"font-medium"},{default:r(()=>[p(a(o.id),1)]),_:2},1024),d(s(m),null,{default:r(()=>[e("div",Ve,[e("div",$e,a(o.title),1),e("div",Ue,a(o.slug),1),o.excerpt?(v(),y("div",Se,a(o.excerpt),1)):P("",!0)])]),_:2},1024),d(s(m),null,{default:r(()=>[e("div",De,[e("div",Fe,a(o.user.name),1),e("div",Ie," @"+a(o.user.login_name),1)])]),_:2},1024),d(s(m),null,{default:r(()=>[e("span",Be,a(o.category.name),1)]),_:2},1024),d(s(m),null,{default:r(()=>[e("div",Ne,[e("div",Pe,a(o.status),1),e("div",Te,a(o.type),1)])]),_:2},1024),d(s(m),null,{default:r(()=>[e("div",je,[o.is_featured?(v(),y("span",Ke," 精选 ")):P("",!0),o.is_premium?(v(),y("span",Le," 会员 ")):P("",!0),o.price&&o.price>0?(v(),y("span",Me," ¥"+a(o.price),1)):P("",!0)])]),_:2},1024),d(s(m),null,{default:r(()=>[e("div",qe,[e("div",null,"👁️ "+a(o.view_count),1),e("div",null,"❤️ "+a(o.likes_count),1),e("div",null,"💰 "+a(o.purchases_count),1)])]),_:2},1024),d(s(m),{class:"text-sm text-gray-500 dark:text-gray-400"},{default:r(()=>[p(a(G(o.created_at)),1)]),_:2},1024),d(s(m),null,{default:r(()=>[e("div",ze,[d(s(R),{href:`/admin/posts/${o.id}/edit`,class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"},{default:r(()=>t[36]||(t[36]=[p(" 编辑 ",-1)])),_:2,__:[36]},1032,["href"]),e("button",{type:"button",class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",onClick:Re=>H(o.id)}," 删除 ",8,Ee)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),e("div",Ae,[e("div",Ge," 显示 "+a(l.posts.data.length)+" 条，共 "+a(l.posts.total)+" 条 ",1),e("div",He,[e("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",disabled:l.posts.current_page===1,onClick:t[18]||(t[18]=o=>M(l.posts.current_page-1))}," 上一页 ",8,Je),e("span",Oe," 第 "+a(l.posts.current_page)+" / "+a(l.posts.last_page)+" 页 ",1),e("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",disabled:l.posts.current_page===l.posts.last_page,onClick:t[19]||(t[19]=o=>M(l.posts.current_page+1))}," 下一页 ",8,Qe)])])])])])])]),_:1}))}});export{bt as default};
