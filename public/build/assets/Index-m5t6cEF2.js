import{d as E,r as n,c as T,o as p,w as o,a,b as t,e as s,h as q,i as f,j as A,f as u,t as d,k as F,s as $,F as j,x as D,n as L,m as G,l as J}from"./app-C5L8lO0w.js";import{S as K,D as O,_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dxu_1yNj.js";import{_ as R}from"./index-Cc0Yg1s3.js";import{_ as W}from"./Input.vue_vue_type_script_setup_true_lang-BTRcYyUC.js";import{_ as y,a as _}from"./CardContent.vue_vue_type_script_setup_true_lang-pGJSB8ez.js";import{_ as v}from"./CardHeader.vue_vue_type_script_setup_true_lang-BRd81tgQ.js";import{_ as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-DdslKHR8.js";import{u as X}from"./usePagination-2eLEuHuE.js";import{C as Y}from"./circle-check-AnRzjFbn.js";import{C as Z}from"./clock-BOy75lrr.js";import"./Primitive-BOFL1T3S.js";import"./useForwardExpose-sdR0m_4o.js";import"./usePrimitiveElement-BdoG5QRO.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-B9vB-NRg.js";import"./createLucideIcon-BgKig1Bc.js";import"./RovingFocusGroup-C7xYaoXh.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-hb5zdG9_.js";import"./VisuallyHidden-Bu698njw.js";import"./index-Dp0SZ2fv.js";import"./DialogTitle-BBXowAcR.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CsbT65D_.js";import"./shield-CWlz4Vbg.js";import"./trending-up-nqG8HUdB.js";import"./file-text-Dodif3U5.js";import"./chevron-right-HqsYK2hd.js";const tt={class:"py-12"},et={class:"w-full sm:px-6 lg:px-8"},st={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},at={class:"p-6 text-gray-900 dark:text-gray-100"},rt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},lt={class:"text-2xl font-bold"},ot={class:"text-2xl font-bold"},dt={class:"text-2xl font-bold"},it={class:"text-xs text-gray-500 dark:text-gray-400"},nt={class:"text-2xl font-bold"},pt={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},ut={class:"overflow-x-auto"},mt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},xt={class:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700"},ct={class:"px-6 py-4 whitespace-nowrap"},gt={class:"text-sm font-mono text-blue-600 dark:text-blue-400"},ft={class:"px-6 py-4 whitespace-nowrap"},yt={class:"text-sm font-medium"},_t={class:"text-xs text-gray-500"},vt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"text-sm"},ht={class:"px-6 py-4 whitespace-nowrap"},wt={class:"text-sm font-semibold"},kt={class:"px-6 py-4 whitespace-nowrap"},Ct={class:"text-sm"},St={class:"px-6 py-4 whitespace-nowrap"},Vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Tt={key:0,class:"mt-6 flex justify-center"},Ft={class:"inline-flex rounded-md shadow-sm -space-x-px"},ee=E({__name:"Index",props:{orders:{},users:{},stats:{},filters:{}},setup(M){const i=M,{translatePaginationLabel:N}=X(),m=n(i.filters.search||""),x=n(i.filters.type||""),c=n(i.filters.status||""),w=n(i.filters.payment_method||""),k=n(i.filters.user_id||""),C=n(i.filters.date_from||""),S=n(i.filters.date_to||""),V=n(i.filters.per_page||"20"),g=()=>{J.get("/admin/orders",{search:m.value,type:x.value,status:c.value,payment_method:w.value,user_id:k.value,date_from:C.value,date_to:S.value,per_page:V.value},{preserveState:!0,preserveScroll:!0})},B=()=>{m.value="",x.value="",c.value="",w.value="",k.value="",C.value="",S.value="",V.value="20",g()},P=r=>new Date(r).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),I=r=>({completed:"bg-green-900 text-green-200",pending:"bg-yellow-900 text-yellow-200",failed:"bg-red-900 text-red-200",refunded:"bg-gray-900 text-gray-200"})[r]||"bg-gray-900 text-gray-200",U=r=>({completed:"已完成",pending:"待处理",failed:"失败",refunded:"已退款"})[r]||r,z=r=>({recharge:"充值",subscription:"订阅",post_purchase:"购买帖子"})[r]||r,H=r=>({fake:"模拟支付",alipay:"支付宝",wechat:"微信支付",credit_card:"信用卡"})[r]||r;return(r,e)=>(p(),T(Q,null,{default:o(()=>[a(s(q),{title:"订单管理"}),t("div",tt,[t("div",et,[t("div",st,[t("div",at,[e[14]||(e[14]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-semibold"},"订单管理"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," 查看和管理所有用户订单 ")],-1)),t("div",rt,[a(s(y),null,{default:o(()=>[a(s(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[a(s(b),{class:"text-sm font-medium"},{default:o(()=>e[3]||(e[3]=[u("总订单数",-1)])),_:1,__:[3]}),a(s(K),{class:"h-4 w-4 text-blue-600"})]),_:1}),a(s(_),null,{default:o(()=>[t("div",lt,d(r.stats.total_orders),1),e[4]||(e[4]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"所有订单",-1))]),_:1,__:[4]})]),_:1}),a(s(y),null,{default:o(()=>[a(s(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[a(s(b),{class:"text-sm font-medium"},{default:o(()=>e[5]||(e[5]=[u("订单总额",-1)])),_:1,__:[5]}),a(s(O),{class:"h-4 w-4 text-green-600"})]),_:1}),a(s(_),null,{default:o(()=>[t("div",ot,"¥"+d(r.stats.total_amount.toFixed(2)),1),e[6]||(e[6]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"已完成订单",-1))]),_:1,__:[6]})]),_:1}),a(s(y),null,{default:o(()=>[a(s(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[a(s(b),{class:"text-sm font-medium"},{default:o(()=>e[7]||(e[7]=[u("充值订单",-1)])),_:1,__:[7]}),a(s(Y),{class:"h-4 w-4 text-purple-600"})]),_:1}),a(s(_),null,{default:o(()=>[t("div",dt,d(r.stats.recharge_orders),1),t("p",it,"¥"+d(r.stats.recharge_amount.toFixed(2)),1)]),_:1})]),_:1}),a(s(y),null,{default:o(()=>[a(s(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[a(s(b),{class:"text-sm font-medium"},{default:o(()=>e[8]||(e[8]=[u("待处理",-1)])),_:1,__:[8]}),a(s(Z),{class:"h-4 w-4 text-orange-600"})]),_:1}),a(s(_),null,{default:o(()=>[t("div",nt,d(r.stats.pending_orders),1),e[9]||(e[9]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"待处理订单",-1))]),_:1,__:[9]})]),_:1})]),t("div",pt,[t("div",null,[a(s(W),{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=l=>m.value=l),placeholder:"搜索订单号或用户...",onInput:g},null,8,["modelValue"])]),t("div",null,[F(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>x.value=l),onChange:g,class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white"},e[10]||(e[10]=[t("option",{value:""},"全部类型",-1),t("option",{value:"recharge"},"充值",-1),t("option",{value:"subscription"},"订阅",-1),t("option",{value:"post_purchase"},"购买帖子",-1)]),544),[[$,x.value]])]),t("div",null,[F(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>c.value=l),onChange:g,class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white"},e[11]||(e[11]=[t("option",{value:""},"全部状态",-1),t("option",{value:"completed"},"已完成",-1),t("option",{value:"pending"},"待处理",-1),t("option",{value:"failed"},"失败",-1),t("option",{value:"refunded"},"已退款",-1)]),544),[[$,c.value]])]),t("div",null,[a(s(R),{variant:"outline",onClick:B,class:"w-full"},{default:o(()=>e[12]||(e[12]=[u(" 清除筛选 ",-1)])),_:1,__:[12]})])]),t("div",ut,[t("table",mt,[e[13]||(e[13]=t("thead",{class:"bg-gray-50 dark:bg-gray-900"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"订单号"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"用户"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"类型"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"金额"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"支付方式"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"状态"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"创建时间")])],-1)),t("tbody",xt,[(p(!0),f(j,null,D(r.orders.data,l=>(p(),f("tr",{key:l.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",ct,[t("span",gt,d(l.order_number),1)]),t("td",ft,[t("div",yt,d(l.user.name),1),t("div",_t,"@"+d(l.user.login_name),1)]),t("td",vt,[t("span",bt,d(z(l.type)),1)]),t("td",ht,[t("span",wt,"¥"+d(l.amount),1)]),t("td",kt,[t("span",Ct,d(H(l.payment_method)),1)]),t("td",St,[t("span",{class:L(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",I(l.status)])},d(U(l.status)),3)]),t("td",Vt,d(P(l.created_at)),1)]))),128))])])]),r.orders.last_page>1?(p(),f("div",Tt,[t("nav",Ft,[(p(!0),f(j,null,D(r.orders.links,(l,h)=>(p(),T(s(G),{key:h,href:l.url||"#",class:L(["px-3 py-2 text-sm border",l.active?"bg-blue-50 border-blue-500 text-blue-600 dark:bg-blue-900 dark:text-blue-200":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400",h===0?"rounded-l-md":"",h===r.orders.links.length-1?"rounded-r-md":""]),innerHTML:s(N)(l.label),disabled:!l.url},null,8,["href","class","innerHTML","disabled"]))),128))])])):A("",!0)])])])])]),_:1}))}});export{ee as default};
