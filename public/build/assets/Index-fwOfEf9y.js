import{d as z,r as m,c as N,o as i,w as o,a,b as e,e as s,h as K,m as U,k as y,p as L,q as M,s as k,f as n,t as d,i as b,F as P,x as q,j as S,y as A,l as V}from"./app-D7JLHZQu.js";import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-B4yj9ts1.js";import{_ as G,a as H,b as B,c as g,d as J,e as p}from"./TableRow.vue_vue_type_script_setup_true_lang-w9lvdrdJ.js";import"./Primitive-BAQBOfwU.js";import"./useForwardExpose-Bn2djeiF.js";import"./usePrimitiveElement-BWSfl_RV.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-CbT0vu7c.js";import"./createLucideIcon-Jmld2wR3.js";import"./RovingFocusGroup-DM1Pcmd8.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-hb5zdG9_.js";import"./VisuallyHidden-RSbYF_2N.js";import"./index-Hyeev8z-.js";import"./DialogTitle-yzSqrO01.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-ykvkgB-i.js";import"./shield-B5p1WuUP.js";import"./trending-up-DtNWuQP_.js";import"./file-text-7jlCoLmG.js";import"./chevron-right-KnDqCj6t.js";import"./index-Dwn8uRmC.js";const O={class:"py-12"},Q={class:"w-full sm:px-6 lg:px-8"},R={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},W={class:"p-6 text-gray-900 dark:text-gray-100"},X={class:"mb-6 flex items-center justify-between"},Y={class:"mb-6 space-y-4"},Z={class:"flex flex-wrap gap-4"},ee={class:"flex-1 min-w-[200px]"},te={class:"min-w-[150px]"},re={class:"min-w-[150px]"},oe={class:"min-w-[150px]"},se={class:"min-w-[120px]"},ae={class:"min-w-[120px]"},le={class:"overflow-x-auto"},de={class:"space-y-1"},ne={class:"font-medium"},ie={class:"text-sm text-gray-500 dark:text-gray-400"},ue={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},ge={class:"flex items-center gap-2"},pe={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},ve={key:0,class:"px-2 py-1 text-xs font-semibold text-green-800 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-200"},be={key:1,class:"px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-100 rounded-full dark:bg-gray-700 dark:text-gray-200"},fe={key:0,class:"px-2 py-1 text-xs font-semibold text-blue-800 bg-blue-100 rounded-full dark:bg-blue-900 dark:text-blue-200"},ce={key:1,class:"px-2 py-1 text-xs font-semibold text-gray-800 bg-gray-100 rounded-full dark:bg-gray-700 dark:text-gray-200"},me={class:"flex gap-2"},ye=["onClick"],_e={class:"mt-6 flex items-center justify-between"},xe={class:"text-sm text-gray-700 dark:text-gray-300"},ke={class:"flex gap-2"},he=["disabled"],we={class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300"},Ce=["disabled"],Je=z({__name:"Index",props:{categories:{},filters:{}},setup(I){const f=I,h=m(f.filters.search||""),w=m(f.filters.is_active||""),C=m(f.filters.is_nav_item||""),c=m(f.filters.sort_by||"sort_order"),v=m(f.filters.sort_direction||"asc"),$=m(f.filters.per_page||20),u=()=>{V.get("/admin/categories",{search:h.value||void 0,is_active:w.value||void 0,is_nav_item:C.value||void 0,sort_by:c.value,sort_direction:v.value,per_page:$.value},{preserveState:!0,preserveScroll:!0})},F=()=>{h.value="",w.value="",C.value="",c.value="sort_order",v.value="asc",$.value=20,u()},_=l=>{c.value===l?v.value=v.value==="asc"?"desc":"asc":(c.value=l,v.value="asc"),u()},x=l=>c.value!==l?"↕":v.value==="asc"?"↑":"↓",j=l=>new Date(l).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),D=l=>{V.get("/admin/categories",{...f.filters,page:l},{preserveState:!0,preserveScroll:!0})},T=l=>{confirm("确定要删除这个分类吗？此操作无法撤销。")&&V.delete(`/admin/categories/${l}`,{preserveScroll:!0,onSuccess:()=>{}})};return(l,t)=>(i(),N(E,null,{default:o(()=>[a(s(K),{title:"分类管理"}),e("div",O,[e("div",Q,[e("div",R,[e("div",W,[e("div",X,[t[14]||(t[14]=e("h1",{class:"text-2xl font-semibold"},"分类管理",-1)),a(s(U),{href:"/admin/categories/create"},{default:o(()=>t[13]||(t[13]=[e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," 创建分类 ",-1)])),_:1,__:[13]})]),e("div",Y,[e("div",Z,[e("div",ee,[y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>h.value=r),type:"text",placeholder:"搜索分类名称、别名或描述...",class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyup:L(u,["enter"])},null,544),[[M,h.value]])]),e("div",te,[y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>w.value=r),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:u},t[15]||(t[15]=[e("option",{value:""},"全部状态",-1),e("option",{value:"1"},"启用",-1),e("option",{value:"0"},"禁用",-1)]),544),[[k,w.value]])]),e("div",re,[y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>C.value=r),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:u},t[16]||(t[16]=[e("option",{value:""},"全部导航",-1),e("option",{value:"1"},"导航项",-1),e("option",{value:"0"},"非导航项",-1)]),544),[[k,C.value]])]),e("div",oe,[y(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>c.value=r),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:u},t[17]||(t[17]=[e("option",{value:"id"},"ID",-1),e("option",{value:"name"},"分类名称",-1),e("option",{value:"slug"},"别名",-1),e("option",{value:"sort_order"},"排序",-1),e("option",{value:"posts_count"},"帖子数量",-1),e("option",{value:"created_at"},"创建时间",-1)]),544),[[k,c.value]])]),e("div",se,[y(e("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>v.value=r),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:u},t[18]||(t[18]=[e("option",{value:"asc"},"升序",-1),e("option",{value:"desc"},"降序",-1)]),544),[[k,v.value]])]),e("div",ae,[y(e("select",{"onUpdate:modelValue":t[5]||(t[5]=r=>$.value=r),class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",onChange:u},t[19]||(t[19]=[e("option",{value:10},"10 / 页",-1),e("option",{value:20},"20 / 页",-1),e("option",{value:50},"50 / 页",-1),e("option",{value:100},"100 / 页",-1),e("option",{value:200},"200 / 页",-1)]),544),[[k,$.value]])])]),e("div",{class:"flex gap-2"},[e("button",{type:"button",class:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:u}," 搜索 "),e("button",{type:"button",class:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",onClick:F}," 重置 ")])]),e("div",le,[a(s(G),null,{default:o(()=>[a(s(H),null,{default:o(()=>[a(s(B),null,{default:o(()=>[a(s(g),{class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:t[6]||(t[6]=r=>_("id"))},{default:o(()=>[n(" ID "+d(x("id")),1)]),_:1}),a(s(g),{class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:t[7]||(t[7]=r=>_("name"))},{default:o(()=>[n(" 分类信息 "+d(x("name")),1)]),_:1}),a(s(g),null,{default:o(()=>t[20]||(t[20]=[n("颜色/图标",-1)])),_:1,__:[20]}),a(s(g),{class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:t[8]||(t[8]=r=>_("sort_order"))},{default:o(()=>[n(" 排序 "+d(x("sort_order")),1)]),_:1}),a(s(g),null,{default:o(()=>t[21]||(t[21]=[n("状态",-1)])),_:1,__:[21]}),a(s(g),null,{default:o(()=>t[22]||(t[22]=[n("导航",-1)])),_:1,__:[22]}),a(s(g),{class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:t[9]||(t[9]=r=>_("posts_count"))},{default:o(()=>[n(" 帖子数量 "+d(x("posts_count")),1)]),_:1}),a(s(g),{class:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:t[10]||(t[10]=r=>_("created_at"))},{default:o(()=>[n(" 创建时间 "+d(x("created_at")),1)]),_:1}),a(s(g),null,{default:o(()=>t[23]||(t[23]=[n("操作",-1)])),_:1,__:[23]})]),_:1})]),_:1}),a(s(J),null,{default:o(()=>[(i(!0),b(P,null,q(l.categories.data,r=>(i(),N(s(B),{key:r.id},{default:o(()=>[a(s(p),{class:"font-medium"},{default:o(()=>[n(d(r.id),1)]),_:2},1024),a(s(p),null,{default:o(()=>[e("div",de,[e("div",ne,d(r.name),1),e("div",ie,d(r.slug),1),r.description?(i(),b("div",ue,d(r.description),1)):S("",!0)])]),_:2},1024),a(s(p),null,{default:o(()=>[e("div",ge,[e("div",{class:"w-6 h-6 rounded",style:A({backgroundColor:r.color})},null,4),r.icon?(i(),b("span",pe,d(r.icon),1)):S("",!0)])]),_:2},1024),a(s(p),null,{default:o(()=>[n(d(r.sort_order),1)]),_:2},1024),a(s(p),null,{default:o(()=>[r.is_active?(i(),b("span",ve," 启用 ")):(i(),b("span",be," 禁用 "))]),_:2},1024),a(s(p),null,{default:o(()=>[r.is_nav_item?(i(),b("span",fe," 是 ")):(i(),b("span",ce," 否 "))]),_:2},1024),a(s(p),null,{default:o(()=>[n(d(r.posts_count),1)]),_:2},1024),a(s(p),{class:"text-sm text-gray-500 dark:text-gray-400"},{default:o(()=>[n(d(j(r.created_at)),1)]),_:2},1024),a(s(p),null,{default:o(()=>[e("div",me,[a(s(U),{href:`/admin/categories/${r.id}/edit`,class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"},{default:o(()=>t[24]||(t[24]=[n(" 编辑 ",-1)])),_:2,__:[24]},1032,["href"]),r.posts_count===0?(i(),b("button",{key:0,type:"button",class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",onClick:$e=>T(r.id)}," 删除 ",8,ye)):S("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),e("div",_e,[e("div",xe," 显示 "+d(l.categories.data.length)+" 条，共 "+d(l.categories.total)+" 条 ",1),e("div",ke,[e("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",disabled:l.categories.current_page===1,onClick:t[11]||(t[11]=r=>D(l.categories.current_page-1))}," 上一页 ",8,he),e("span",we," 第 "+d(l.categories.current_page)+" / "+d(l.categories.last_page)+" 页 ",1),e("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",disabled:l.categories.current_page===l.categories.last_page,onClick:t[12]||(t[12]=r=>D(l.categories.current_page+1))}," 下一页 ",8,Ce)])])])])])])]),_:1}))}});export{Je as default};
