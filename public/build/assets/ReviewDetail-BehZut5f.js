import{d as L,k as F,p as T,e as t,o as d,i as p,n as M,B as q,r as D,a as e,h as A,w as a,b as o,f as r,t as i,c as b,j as m,F as k,s as N,l as V}from"./app-BEBrd-Nk.js";import{_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-jRSvZwgr.js";import{_ as C}from"./index-d3bp4WYp.js";import{_,a as c}from"./CardContent.vue_vue_type_script_setup_true_lang-Bk9xUvUB.js";import{_ as v}from"./CardHeader.vue_vue_type_script_setup_true_lang-BP1K8Bi-.js";import{_ as g}from"./CardTitle.vue_vue_type_script_setup_true_lang-B5Eqceh7.js";import{_ as S}from"./index-CTEUm6gP.js";import{_ as n}from"./Label.vue_vue_type_script_setup_true_lang-iLuSX-Gz.js";import{c as E}from"./Primitive-aG1gjPjq.js";import{u as X}from"./useForwardExpose-CGUfNGMn.js";import{A as G}from"./arrow-left-CVa8WvWu.js";import{I as H,V as J}from"./video-CeoPWRs_.js";import{U as K}from"./user-CjvbBXfj.js";import{c as O}from"./createLucideIcon-BbWFJ-dr.js";import{C as Q}from"./circle-check-big-CRIj4rRm.js";import{C as W}from"./circle-x-D2ozUnoh.js";import"./usePrimitiveElement-DArPI-Zp.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-B7qWAr7G.js";import"./RovingFocusGroup-BB0XVRr0.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./VisuallyHidden-TlfHdZ4L.js";import"./index-BWo5hgsN.js";import"./DialogTitle-BPN48qH-.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DQZAl6PW.js";import"./shield-DcI1OXF1.js";import"./file-text-CCa83MfH.js";import"./trending-up-CMTZNDia.js";import"./book-open-Ceqg6cTS.js";import"./chevron-right-DytpL-5q.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=O("RotateCcwIcon",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),I=L({__name:"Textarea",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup($,{emit:x}){const f=$,w=X(f,"modelValue",x,{passive:!0,defaultValue:f.defaultValue});return(z,y)=>F((d(),p("textarea",{"onUpdate:modelValue":y[0]||(y[0]=B=>q(w)?w.value=B:null),"data-slot":"textarea",class:M(t(E)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",f.class))},null,2)),[[T,t(w)]])}}),Z={class:"space-y-6"},tt={class:"flex items-center justify-between"},et={class:"flex items-center gap-4"},st={class:"text-[#999999] mt-1"},at={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},lt={class:"lg:col-span-2 space-y-6"},ot={class:"text-white mt-2"},rt={key:0},it={class:"text-[#999999] mt-2"},dt={key:1},ut={class:"text-[#999999] mt-2 whitespace-pre-wrap"},nt={key:2},pt={class:"flex flex-wrap gap-2 mt-2"},mt={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},ft=["src","alt"],_t=["src"],ct={class:"text-xs text-[#999999] mt-2"},vt={class:"text-[#999999]"},gt={class:"space-y-6"},wt={class:"flex items-center gap-2"},bt={class:"text-white"},xt={class:"text-xs text-[#999999]"},ht={key:0,class:"pt-2 border-t border-[#2a2a2a]"},yt={class:"text-white"},kt={class:"text-white mt-1"},Vt={class:"text-white mt-1 text-sm"},Ct={key:0},$t={class:"text-white mt-1 text-sm"},Bt={class:"text-white mt-1"},jt={class:"text-white mt-1 text-sm"},Nt={class:"border-t border-[#2a2a2a] pt-4"},re=L({__name:"ReviewDetail",props:{post:{}},setup($){const x=$,f=D(""),h=D("");function w(){V.get(route("admin.post-reviews.index"))}function z(){confirm("确认批准这个帖子？")&&V.post(route("admin.post-reviews.approve",x.post.id),{notes:h.value||null},{onSuccess:()=>w()})}function y(){if(!f.value.trim()){alert("请输入拒绝原因");return}confirm("确认拒绝这个帖子？")&&V.post(route("admin.post-reviews.reject",x.post.id),{notes:f.value},{onSuccess:()=>w()})}function B(){confirm("确认重置审核状态？")&&V.post(route("admin.post-reviews.reset",x.post.id),{},{preserveScroll:!0})}function R(l){switch(l){case"pending":return"bg-yellow-500";case"approved":return"bg-green-500";case"rejected":return"bg-red-500";default:return"bg-gray-500"}}function j(l){return l?new Date(l).toLocaleString("zh-CN"):"-"}function U(l){return(l/1048576).toFixed(2)+" MB"}return(l,s)=>(d(),p(k,null,[e(t(A),{title:`审核: ${l.post.title}`},null,8,["title"]),e(P,null,{default:a(()=>[o("div",Z,[o("div",tt,[o("div",et,[e(t(C),{variant:"outline",size:"sm",onClick:w,class:"border-[#2a2a2a] text-white hover:bg-[#2a2a2a]"},{default:a(()=>[e(t(G),{class:"h-4 w-4 mr-2"}),s[2]||(s[2]=r(" 返回列表 ",-1))]),_:1,__:[2]}),o("div",null,[s[3]||(s[3]=o("h1",{class:"text-2xl font-bold text-white"},"审核帖子",-1)),o("p",st,i(l.post.title),1)])]),e(t(S),{class:M([R(l.post.review_status),"text-base px-4 py-2"])},{default:a(()=>[r(i(l.post.review_status==="pending"?"待审核":l.post.review_status==="approved"?"已批准":"已拒绝"),1)]),_:1},8,["class"])]),o("div",at,[o("div",lt,[e(t(_),{class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(v),null,{default:a(()=>[e(t(g),{class:"text-white"},{default:a(()=>s[4]||(s[4]=[r("帖子内容",-1)])),_:1,__:[4]})]),_:1}),e(t(c),{class:"space-y-4"},{default:a(()=>[o("div",null,[e(t(n),{class:"text-white"},{default:a(()=>s[5]||(s[5]=[r("标题",-1)])),_:1,__:[5]}),o("p",ot,i(l.post.title),1)]),l.post.excerpt?(d(),p("div",rt,[e(t(n),{class:"text-white"},{default:a(()=>s[6]||(s[6]=[r("摘要",-1)])),_:1,__:[6]}),o("p",it,i(l.post.excerpt),1)])):m("",!0),l.post.content?(d(),p("div",dt,[e(t(n),{class:"text-white"},{default:a(()=>s[7]||(s[7]=[r("内容",-1)])),_:1,__:[7]}),o("div",ut,i(l.post.content),1)])):m("",!0),l.post.tags&&l.post.tags.length>0?(d(),p("div",nt,[e(t(n),{class:"text-white"},{default:a(()=>s[8]||(s[8]=[r("标签",-1)])),_:1,__:[8]}),o("div",pt,[(d(!0),p(k,null,N(l.post.tags,u=>(d(),b(t(S),{key:u,variant:"outline",class:"border-[#2a2a2a] text-white"},{default:a(()=>[r(i(u),1)]),_:2},1024))),128))])])):m("",!0)]),_:1})]),_:1}),l.post.image_urls&&l.post.image_urls.length>0?(d(),b(t(_),{key:0,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(v),null,{default:a(()=>[e(t(g),{class:"text-white flex items-center gap-2"},{default:a(()=>[e(t(H),{class:"h-5 w-5"}),r(" 图片 ("+i(l.post.image_urls.length)+") ",1)]),_:1})]),_:1}),e(t(c),null,{default:a(()=>[o("div",mt,[(d(!0),p(k,null,N(l.post.image_urls,u=>(d(),p("img",{key:u.id,src:u.url,alt:`Image ${u.id}`,class:"w-full h-48 object-cover rounded-lg"},null,8,ft))),128))])]),_:1})]),_:1})):m("",!0),l.post.video_urls&&l.post.video_urls.length>0?(d(),b(t(_),{key:1,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(v),null,{default:a(()=>[e(t(g),{class:"text-white flex items-center gap-2"},{default:a(()=>[e(t(J),{class:"h-5 w-5"}),r(" 视频 ("+i(l.post.video_urls.length)+") ",1)]),_:1})]),_:1}),e(t(c),{class:"space-y-4"},{default:a(()=>[(d(!0),p(k,null,N(l.post.video_urls,u=>(d(),p("div",{key:u.id},[o("video",{src:u.url,controls:"",class:"w-full rounded-lg"},null,8,_t),o("p",ct,i(u.name)+" ("+i(U(u.size))+") ",1)]))),128))]),_:1})]),_:1})):m("",!0),l.post.review_notes?(d(),b(t(_),{key:2,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(v),null,{default:a(()=>[e(t(g),{class:"text-white"},{default:a(()=>s[9]||(s[9]=[r("审核备注",-1)])),_:1,__:[9]})]),_:1}),e(t(c),null,{default:a(()=>[o("p",vt,i(l.post.review_notes),1)]),_:1})]),_:1})):m("",!0)]),o("div",gt,[e(t(_),{class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(v),null,{default:a(()=>[e(t(g),{class:"text-white"},{default:a(()=>s[10]||(s[10]=[r("作者信息",-1)])),_:1,__:[10]})]),_:1}),e(t(c),{class:"space-y-3"},{default:a(()=>[o("div",wt,[e(t(K),{class:"h-4 w-4 text-[#999999]"}),o("div",null,[o("p",bt,i(l.post.user.name),1),o("p",xt,i(l.post.user.email),1)])]),l.post.user.creator_profile?(d(),p("div",ht,[s[11]||(s[11]=o("p",{class:"text-xs text-[#999999]"},"创作者",-1)),o("p",yt,i(l.post.user.creator_profile.display_name),1)])):m("",!0)]),_:1})]),_:1}),e(t(_),{class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(v),null,{default:a(()=>[e(t(g),{class:"text-white"},{default:a(()=>s[12]||(s[12]=[r("帖子信息",-1)])),_:1,__:[12]})]),_:1}),e(t(c),{class:"space-y-3"},{default:a(()=>[o("div",null,[e(t(n),{class:"text-[#999999]"},{default:a(()=>s[13]||(s[13]=[r("分类",-1)])),_:1,__:[13]}),e(t(S),{variant:"outline",class:"mt-1 border-[#2a2a2a] text-white"},{default:a(()=>[r(i(l.post.category.name),1)]),_:1})]),o("div",null,[e(t(n),{class:"text-[#999999]"},{default:a(()=>s[14]||(s[14]=[r("类型",-1)])),_:1,__:[14]}),o("p",kt,i(l.post.type),1)]),o("div",null,[e(t(n),{class:"text-[#999999]"},{default:a(()=>s[15]||(s[15]=[r("创建时间",-1)])),_:1,__:[15]}),o("p",Vt,i(j(l.post.created_at)),1)]),l.post.published_at?(d(),p("div",Ct,[e(t(n),{class:"text-[#999999]"},{default:a(()=>s[16]||(s[16]=[r("发布时间",-1)])),_:1,__:[16]}),o("p",$t,i(j(l.post.published_at)),1)])):m("",!0)]),_:1})]),_:1}),l.post.reviewer?(d(),b(t(_),{key:0,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(v),null,{default:a(()=>[e(t(g),{class:"text-white"},{default:a(()=>s[17]||(s[17]=[r("审核信息",-1)])),_:1,__:[17]})]),_:1}),e(t(c),{class:"space-y-3"},{default:a(()=>[o("div",null,[e(t(n),{class:"text-[#999999]"},{default:a(()=>s[18]||(s[18]=[r("审核员",-1)])),_:1,__:[18]}),o("p",Bt,i(l.post.reviewer.name),1)]),o("div",null,[e(t(n),{class:"text-[#999999]"},{default:a(()=>s[19]||(s[19]=[r("审核时间",-1)])),_:1,__:[19]}),o("p",jt,i(j(l.post.reviewed_at)),1)]),e(t(C),{size:"sm",variant:"outline",onClick:B,class:"w-full border-[#2a2a2a] text-white hover:bg-[#2a2a2a]"},{default:a(()=>[e(t(Y),{class:"h-4 w-4 mr-2"}),s[20]||(s[20]=r(" 重置审核 ",-1))]),_:1,__:[20]})]),_:1})]),_:1})):m("",!0),l.post.review_status==="pending"?(d(),b(t(_),{key:1,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(v),null,{default:a(()=>[e(t(g),{class:"text-white"},{default:a(()=>s[21]||(s[21]=[r("审核操作",-1)])),_:1,__:[21]})]),_:1}),e(t(c),{class:"space-y-4"},{default:a(()=>[o("div",null,[e(t(n),{class:"text-white"},{default:a(()=>s[22]||(s[22]=[r("批准备注 (可选)",-1)])),_:1,__:[22]}),e(t(I),{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=u=>h.value=u),placeholder:"添加批准备注...",class:"mt-2 bg-[#2a2a2a] border-[#3a3a3a] text-white"},null,8,["modelValue"]),e(t(C),{onClick:z,class:"w-full mt-2 bg-green-600 hover:bg-green-700"},{default:a(()=>[e(t(Q),{class:"h-4 w-4 mr-2"}),s[23]||(s[23]=r(" 批准帖子 ",-1))]),_:1,__:[23]})]),o("div",Nt,[e(t(n),{class:"text-white"},{default:a(()=>s[24]||(s[24]=[r("拒绝原因 *",-1)])),_:1,__:[24]}),e(t(I),{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=u=>f.value=u),placeholder:"请输入拒绝原因...",class:"mt-2 bg-[#2a2a2a] border-[#3a3a3a] text-white",required:""},null,8,["modelValue"]),e(t(C),{onClick:y,variant:"destructive",class:"w-full mt-2"},{default:a(()=>[e(t(W),{class:"h-4 w-4 mr-2"}),s[25]||(s[25]=r(" 拒绝帖子 ",-1))]),_:1,__:[25]})])]),_:1})]),_:1})):m("",!0)])])])]),_:1})],64))}});export{re as default};
