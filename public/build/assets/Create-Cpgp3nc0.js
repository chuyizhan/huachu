import{_ as V}from"./WebLayout.vue_vue_type_script_setup_true_lang-MMalCMFw.js";import{d as z,r as v,u as P,c as m,o as i,w as _,a as u,b as s,e,h as N,i as a,j as c,y as B,t as l,F as w,s as x,n as f,D as L,x as D,f as g}from"./app-SJY2oU70.js";import{_ as I}from"./index-DJTCYUnH.js";import{_ as A}from"./index-E4L3vuSb.js";import{A as E}from"./arrow-left-DgNgDori.js";import{C as h}from"./check-DgExWfO4.js";import{Z as M}from"./zap-C8C-cgpC.js";import{C as T}from"./crown-WikNFtCV.js";import{S as Z}from"./sparkles-avFxYMEy.js";import{S as q}from"./star-CIJJOZCR.js";import{S as G}from"./shield-B-3UFATg.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-BZdbG5-l.js";import"./createLucideIcon-Cse-FGSu.js";import"./usePrimitiveElement-fNg2AQaE.js";import"./useForwardExpose-BU_VDZgt.js";import"./Primitive-B3R6utq3.js";import"./RovingFocusGroup-D12jMUGW.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CUNCTZVq.js";import"./heart-BufB206n.js";import"./user-BvU5tbs1.js";import"./index-DWcUEZeO.js";const H={class:"min-h-screen bg-[#1c1c1c] pb-20"},J={class:"bg-[#1f2937] u-p-25 sticky top-0 z-10"},K={class:"flex items-center"},O={key:0,class:"u-m-25"},Q={class:"bg-red-500/20 border border-red-500 rounded-lg u-p-25"},R={class:"font24 text-red-500"},U={class:"u-m-25"},W={class:"space-y-4"},X=["onClick"],Y={class:"flex items-start justify-between u-m-b-15"},ss={class:"flex items-center"},ts={class:"flex items-center u-m-b-5"},es={class:"font32 colorfff font-w-600 u-p-r-15"},os={class:"font22 color999"},ns={class:"text-right"},rs={class:"font36 text-[#ff6e02] font-w-700"},is={key:0,class:"u-m-b-15"},ls={class:"text-sm lg:text-md colorz"},as={key:1,class:"space-y-2"},cs={class:"font22 colorz"},fs={key:1,class:"u-m-25"},ds={class:"space-y-3"},us={class:"flex items-center justify-between"},ms={class:"flex items-center justify-between"},ps={class:"flex items-center justify-between"},_s={key:2,class:"u-m-25"},hs={class:"listclass u-p-25"},ys={class:"space-y-3"},bs={class:"flex items-center justify-between"},vs={class:"font24 colorfff"},ws={class:"flex items-center justify-between"},xs={class:"font24 colorfff"},gs={class:"flex items-center justify-between"},ks={class:"font24 colorfff"},Cs={class:"flex items-center justify-between"},Ss={class:"font40 text-[#ff6e02] font-w-700"},js={key:3,class:"u-m-25"},Us=z({__name:"Create",props:{plans:{}},setup(k){const C=k,d=v(null);v("alipay");const o=P({plan_id:null,payment_method:"alipay",auto_renew:!1}),S=n=>{d.value=n,o.plan_id=n},p=()=>C.plans.find(n=>n.id===d.value),j=()=>{if(console.log("Submit function called"),console.log("Form data:",{plan_id:o.plan_id,payment_method:o.payment_method,auto_renew:o.auto_renew}),!o.plan_id){console.log("No plan selected"),alert("请选择一个套餐");return}console.log("Submitting to /plan-subscriptions"),o.post("/plan-subscriptions",{preserveScroll:!1,onError:n=>{console.error("Subscription error:",n),n.subscription?alert(n.subscription):n.payment&&alert(n.payment)},onSuccess:()=>{console.log("Subscription request successful")},onStart:()=>{console.log("Form submission started")},onFinish:()=>{console.log("Form submission finished")}})},F=n=>n>=4?T:n>=3?Z:n>=2?q:G,y=n=>n>=365?`${Math.floor(n/365)}年`:n>=30?`${Math.floor(n/30)}个月`:`${n}天`;return(n,t)=>(i(),m(V,null,{default:_(()=>[u(e(N),{title:"开通VIP会员"}),s("div",H,[s("div",J,[s("div",K,[u(e(B),{href:"/plan-subscriptions",class:"u-p-r-25"},{default:_(()=>[u(e(E),{class:"w-6 h-6 text-white"})]),_:1}),t[3]||(t[3]=s("h1",{class:"colorz font32 font-w-600"},"开通VIP会员",-1))])]),e(o).errors.subscription||e(o).errors.payment?(i(),a("div",O,[s("div",Q,[s("p",R,l(e(o).errors.subscription||e(o).errors.payment),1)])])):c("",!0),s("div",U,[t[4]||(t[4]=s("h3",{class:"font28 colorfff font-w-600 u-m-b-20 u-p-l-10"},"选择套餐",-1)),s("div",W,[(i(!0),a(w,null,x(n.plans,r=>(i(),a("div",{key:r.id,onClick:b=>S(r.id),class:f(["listclass u-p-25 cursor-pointer transition-all",d.value===r.id?"ring-2 ring-[#ff6e02]":""])},[s("div",Y,[s("div",ss,[(i(),m(L(F(r.level)),{class:f(["w-8 h-8 u-p-r-15",d.value===r.id?"text-[#ff6e02]":"text-white"])},null,8,["class"])),s("div",null,[s("div",ts,[s("h3",es,l(r.name),1),u(e(I),{style:D({backgroundColor:r.badge_color,color:r.badge_text_color}),class:"font20"},{default:_(()=>[g(" LV"+l(r.level),1)]),_:2},1032,["style"])]),s("p",os,l(y(r.period_days)),1)])]),s("div",ns,[s("div",rs,"¥"+l(parseFloat(r.price).toFixed(2)),1)])]),r.description?(i(),a("div",is,[s("p",ls,l(r.description),1)])):c("",!0),r.features&&r.features.length>0?(i(),a("div",as,[(i(!0),a(w,null,x(r.features,(b,$)=>(i(),a("div",{key:$,class:"flex items-center"},[u(e(h),{class:"w-4 h-4 text-[#ff6e02] u-p-r-10 flex-shrink-0"}),s("span",cs,l(b),1)]))),128))])):c("",!0)],10,X))),128))])]),d.value?(i(),a("div",fs,[t[8]||(t[8]=s("h3",{class:"font28 colorfff font-w-600 u-m-b-20 u-p-l-10"},"支付方式",-1)),s("div",ds,[s("div",{onClick:t[0]||(t[0]=r=>e(o).payment_method="alipay"),class:f(["listclass u-p-25 cursor-pointer transition-all",e(o).payment_method==="alipay"?"ring-2 ring-[#ff6e02]":""])},[s("div",us,[t[5]||(t[5]=s("div",{class:"flex items-center"},[s("div",{class:"w-12 h-12 bg-[#1677FF] rounded-lg flex items-center justify-center u-p-r-15"},[s("span",{class:"text-white font-w-700 font24"},"支")]),s("span",{class:"font28 colorfff"},"支付宝")],-1)),s("div",{class:f(["w-6 h-6 rounded-full border-2 flex items-center justify-center",e(o).payment_method==="alipay"?"border-[#ff6e02] bg-[#ff6e02]":"border-[#999999]"])},[e(o).payment_method==="alipay"?(i(),m(e(h),{key:0,class:"w-4 h-4 text-white"})):c("",!0)],2)])],2),s("div",{onClick:t[1]||(t[1]=r=>e(o).payment_method="wechat"),class:f(["listclass u-p-25 cursor-pointer transition-all",e(o).payment_method==="wechat"?"ring-2 ring-[#ff6e02]":""])},[s("div",ms,[t[6]||(t[6]=s("div",{class:"flex items-center"},[s("div",{class:"w-12 h-12 bg-[#07C160] rounded-lg flex items-center justify-center u-p-r-15"},[s("span",{class:"text-white font-w-700 font24"},"微")]),s("span",{class:"font28 colorfff"},"微信支付")],-1)),s("div",{class:f(["w-6 h-6 rounded-full border-2 flex items-center justify-center",e(o).payment_method==="wechat"?"border-[#ff6e02] bg-[#ff6e02]":"border-[#999999]"])},[e(o).payment_method==="wechat"?(i(),m(e(h),{key:0,class:"w-4 h-4 text-white"})):c("",!0)],2)])],2),s("div",{onClick:t[2]||(t[2]=r=>e(o).payment_method="fake"),class:f(["listclass u-p-25 cursor-pointer transition-all",e(o).payment_method==="fake"?"ring-2 ring-[#ff6e02]":""])},[s("div",ps,[t[7]||(t[7]=s("div",{class:"flex items-center"},[s("div",{class:"w-12 h-12 bg-[#666666] rounded-lg flex items-center justify-center u-p-r-15"},[s("span",{class:"text-white font-w-700 font24"},"测")]),s("span",{class:"font28 colorfff"},"测试支付")],-1)),s("div",{class:f(["w-6 h-6 rounded-full border-2 flex items-center justify-center",e(o).payment_method==="fake"?"border-[#ff6e02] bg-[#ff6e02]":"border-[#999999]"])},[e(o).payment_method==="fake"?(i(),m(e(h),{key:0,class:"w-4 h-4 text-white"})):c("",!0)],2)])],2)])])):c("",!0),d.value&&p()?(i(),a("div",_s,[s("div",hs,[t[14]||(t[14]=s("h3",{class:"font28 colorfff font-w-600 u-m-b-20"},"订单信息",-1)),s("div",ys,[s("div",bs,[t[9]||(t[9]=s("span",{class:"font24 color999"},"套餐",-1)),s("span",vs,l(p()?.name),1)]),s("div",ws,[t[10]||(t[10]=s("span",{class:"font24 color999"},"时长",-1)),s("span",xs,l(y(p()?.period_days||0)),1)]),s("div",gs,[t[11]||(t[11]=s("span",{class:"font24 color999"},"支付方式",-1)),s("span",ks,l(e(o).payment_method==="alipay"?"支付宝":e(o).payment_method==="wechat"?"微信支付":"测试支付"),1)]),t[13]||(t[13]=s("div",{class:"border-t border-[#374151] u-p-t-15 u-m-t-15"},null,-1)),s("div",Cs,[t[12]||(t[12]=s("span",{class:"font28 colorfff font-w-600"},"应付金额",-1)),s("span",Ss,"¥"+l(parseFloat(p()?.price||"0").toFixed(2)),1)])])])])):c("",!0),d.value?(i(),a("div",js,[u(e(A),{onClick:j,disabled:e(o).processing,class:"w-full bg-[#ff6e02] hover:bg-[#ff8534] text-white font30 u-p-25 h-auto rounded-lg"},{default:_(()=>[u(e(M),{class:"w-6 h-6 u-p-r-10"}),g(" "+l(e(o).processing?"处理中...":"立即开通"),1)]),_:1},8,["disabled"])])):c("",!0),t[15]||(t[15]=s("div",{class:"u-m-25"},[s("div",{class:"u-p-25"},[s("h4",{class:"font24 color999 u-m-b-15"},"温馨提示"),s("ul",{class:"space-y-2"},[s("li",{class:"font22 color999 flex items-start"},[s("span",{class:"u-p-r-5"},"•"),s("span",null,"支付成功后会员权益立即生效")]),s("li",{class:"font22 color999 flex items-start"},[s("span",{class:"u-p-r-5"},"•"),s("span",null,"开启自动续费可享受不间断服务")]),s("li",{class:"font22 color999 flex items-start"},[s("span",{class:"u-p-r-5"},"•"),s("span",null,"可在个人中心随时管理订阅")])])])],-1))])]),_:1}))}});export{Us as default};
