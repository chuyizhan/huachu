import{d as P,r as x,c as v,o as r,w as U,a as D,b as t,e as g,h as z,i as u,j as n,t as a,k as m,m as A,p as H,q as y,f,F as j,s as B,y as S,n as K,l as q}from"./app-kob8CVRK.js";import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-BdQ8QA9l.js";import{C as T}from"./chevron-up-CfeshfP-.js";import{C as $}from"./chevron-down-CexOmhTm.js";import"./Primitive-BE7hyEE5.js";import"./useForwardExpose-C-dMyllY.js";import"./usePrimitiveElement-vQoX7tlz.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-B1Y7R2CB.js";import"./createLucideIcon-CW2CPC90.js";import"./RovingFocusGroup-eP3yFYFc.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./VisuallyHidden-Df262hPE.js";import"./index-CET7fbM1.js";import"./DialogTitle-DWqGpV3s.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C16ycLJU.js";import"./shield-yL3bQPLl.js";import"./trending-up-DgoaXaT_.js";import"./file-text-CaGjPdGH.js";import"./chevron-right-0AUNV4YL.js";import"./index-CKFw0FL_.js";const W={class:"py-12"},G={class:"w-full sm:px-6 lg:px-8"},J={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},O={class:"p-6 text-gray-900 dark:text-gray-100"},Q={class:"mb-6"},R={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},X={class:"mb-6 space-y-4"},Y={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},Z={class:"overflow-x-auto"},tt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},et={class:"bg-gray-50 dark:bg-gray-900"},st={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800"},rt={class:"whitespace-nowrap px-6 py-4 text-sm"},at={class:"px-6 py-4"},ot={class:"flex items-center gap-3"},it=["src","alt"],lt={key:1,class:"w-10 h-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center text-gray-600 dark:text-gray-300 font-semibold"},dt={class:"flex flex-col gap-1"},nt={class:"font-medium"},ut={class:"text-xs text-gray-500 dark:text-gray-400"},gt={class:"text-xs text-gray-500 dark:text-gray-400"},pt={class:"px-6 py-4"},xt={class:"flex flex-col gap-1"},mt={key:0,class:"inline-flex items-center rounded-md bg-red-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-inset ring-red-600/10 w-fit"},vt={key:1,class:"inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10 w-fit"},yt={key:2,class:"inline-flex items-center rounded-md bg-purple-50 px-2 py-1 text-xs font-medium text-purple-700 ring-1 ring-inset ring-purple-700/10 w-fit"},ft={key:3,class:"inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/10 w-fit"},ct={class:"px-6 py-4"},bt={class:"flex flex-col gap-1 text-sm"},kt={class:"px-6 py-4 text-right"},wt={class:"flex flex-col gap-1 text-sm"},_t={class:"text-xs text-gray-500 dark:text-gray-400"},ht={class:"px-6 py-4 text-center"},Ct={class:"flex flex-col gap-1 text-sm"},Vt={class:"text-xs text-gray-500 dark:text-gray-400"},Ut={class:"px-6 py-4"},Dt={class:"flex flex-col gap-1 text-sm"},St={class:"text-gray-500 dark:text-gray-400"},Tt={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},$t={class:"whitespace-nowrap px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},It={class:"whitespace-nowrap px-6 py-4 text-right text-sm"},jt={class:"flex justify-end gap-4"},Bt={key:0,class:"mt-6 flex items-center justify-between border-t border-gray-200 pt-4 dark:border-gray-700"},Nt={class:"text-sm text-gray-700 dark:text-gray-300"},Ft={class:"flex gap-2"},re=P({__name:"Index",props:{users:{},filters:{}},setup(N){const p=N,c=x(p.filters.search||""),b=x(p.filters.is_admin||""),k=x(p.filters.is_creator||""),w=x(p.filters.is_verified||""),_=x(p.filters.type||""),h=x(p.filters.status||""),l=x(p.filters.sort_by||"created_at"),i=x(p.filters.sort_direction||"desc"),C=x(p.filters.per_page||"20"),d=()=>{q.get("/admin/users",{search:c.value,is_admin:b.value,is_creator:k.value,is_verified:w.value,type:_.value,status:h.value,sort_by:l.value,sort_direction:i.value,per_page:C.value},{preserveState:!0,preserveScroll:!0})},F=()=>{c.value="",b.value="",k.value="",w.value="",_.value="",h.value="",l.value="created_at",i.value="desc",C.value="20",d()},V=o=>{l.value===o?i.value=i.value==="asc"?"desc":"asc":(l.value=o,i.value="asc"),d()},L=o=>{switch(o){case 1:return"正常";case 2:return"暂停";case 3:return"封禁";default:return"未知"}},M=o=>{switch(o){case 1:return"普通";case 2:return"VIP";default:return"未知"}},I=o=>new Date(o).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"});return(o,e)=>(r(),v(E,null,{default:U(()=>[D(g(z),{title:"用户管理"}),t("div",W,[t("div",G,[t("div",J,[t("div",O,[t("div",Q,[e[12]||(e[12]=t("h2",{class:"text-2xl font-semibold"},"用户管理",-1)),t("p",R," 管理所有用户账户 - 共 "+a(o.users.total)+" 位用户 ",1)]),t("div",X,[t("div",Y,[t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium mb-2"},"搜索",-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),type:"text",placeholder:"搜索用户名、邮箱或登录名...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300",onKeyup:A(d,["enter"])},null,544),[[H,c.value]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium mb-2"},"管理员",-1)),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>b.value=s),onChange:d,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300"},e[14]||(e[14]=[t("option",{value:""},"全部",-1),t("option",{value:"1"},"是",-1),t("option",{value:"0"},"否",-1)]),544),[[y,b.value]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium mb-2"},"创作者",-1)),m(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>k.value=s),onChange:d,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300"},e[16]||(e[16]=[t("option",{value:""},"全部",-1),t("option",{value:"1"},"是",-1),t("option",{value:"0"},"否",-1)]),544),[[y,k.value]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium mb-2"},"已验证",-1)),m(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>w.value=s),onChange:d,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300"},e[18]||(e[18]=[t("option",{value:""},"全部",-1),t("option",{value:"1"},"是",-1),t("option",{value:"0"},"否",-1)]),544),[[y,w.value]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium mb-2"},"类型",-1)),m(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>_.value=s),onChange:d,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300"},e[20]||(e[20]=[t("option",{value:""},"全部",-1),t("option",{value:"1"},"普通",-1),t("option",{value:"2"},"VIP",-1)]),544),[[y,_.value]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium mb-2"},"状态",-1)),m(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>h.value=s),onChange:d,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300"},e[22]||(e[22]=[t("option",{value:""},"全部",-1),t("option",{value:"1"},"正常",-1),t("option",{value:"2"},"暂停",-1),t("option",{value:"3"},"封禁",-1)]),544),[[y,h.value]])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium mb-2"},"排序字段",-1)),m(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>l.value=s),onChange:d,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300"},e[24]||(e[24]=[t("option",{value:"id"},"ID",-1),t("option",{value:"name"},"姓名",-1),t("option",{value:"email"},"邮箱",-1),t("option",{value:"login_name"},"用户名",-1),t("option",{value:"credits"},"积分",-1),t("option",{value:"balance"},"余额",-1),t("option",{value:"followers_count"},"粉丝数",-1),t("option",{value:"following_count"},"关注数",-1),t("option",{value:"last_login_at"},"最后登录时间",-1),t("option",{value:"created_at"},"注册时间",-1)]),544),[[y,l.value]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium mb-2"},"排序方向",-1)),m(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>i.value=s),onChange:d,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300"},e[26]||(e[26]=[t("option",{value:"asc"},"升序",-1),t("option",{value:"desc"},"降序",-1)]),544),[[y,i.value]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium mb-2"},"每页显示",-1)),m(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>C.value=s),onChange:d,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300"},e[28]||(e[28]=[t("option",{value:"10"},"10",-1),t("option",{value:"20"},"20",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1),t("option",{value:"200"},"200",-1)]),544),[[y,C.value]])])]),t("div",{class:"flex gap-2"},[t("button",{onClick:d,class:"inline-flex items-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"}," 搜索 "),t("button",{onClick:F,class:"inline-flex items-center rounded-md bg-white px-4 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-100 dark:ring-gray-600 dark:hover:bg-gray-600"}," 清除 ")])]),t("div",Z,[t("table",tt,[t("thead",et,[t("tr",null,[t("th",{onClick:e[9]||(e[9]=s=>V("id")),class:"cursor-pointer px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},[e[30]||(e[30]=f(" ID ",-1)),l.value==="id"&&i.value==="asc"?(r(),v(g(T),{key:0,class:"inline w-4 h-4"})):n("",!0),l.value==="id"&&i.value==="desc"?(r(),v(g($),{key:1,class:"inline w-4 h-4"})):n("",!0)]),e[33]||(e[33]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," 用户信息 ",-1)),e[34]||(e[34]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," 角色 ",-1)),e[35]||(e[35]=t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," 类型/状态 ",-1)),e[36]||(e[36]=t("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," 积分/余额 ",-1)),e[37]||(e[37]=t("th",{class:"px-6 py-3 text-center text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," 粉丝/关注 ",-1)),t("th",{onClick:e[10]||(e[10]=s=>V("last_login_at")),class:"cursor-pointer px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},[e[31]||(e[31]=f(" 最后登录 ",-1)),l.value==="last_login_at"&&i.value==="asc"?(r(),v(g(T),{key:0,class:"inline w-4 h-4"})):n("",!0),l.value==="last_login_at"&&i.value==="desc"?(r(),v(g($),{key:1,class:"inline w-4 h-4"})):n("",!0)]),t("th",{onClick:e[11]||(e[11]=s=>V("created_at")),class:"cursor-pointer px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},[e[32]||(e[32]=f(" 注册时间 ",-1)),l.value==="created_at"&&i.value==="asc"?(r(),v(g(T),{key:0,class:"inline w-4 h-4"})):n("",!0),l.value==="created_at"&&i.value==="desc"?(r(),v(g($),{key:1,class:"inline w-4 h-4"})):n("",!0)]),e[38]||(e[38]=t("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"}," 操作 ",-1))])]),t("tbody",st,[(r(!0),u(j,null,B(o.users.data,s=>(r(),u("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",rt,a(s.id),1),t("td",at,[t("div",ot,[s.avatar?(r(),u("img",{key:0,src:s.avatar.startsWith("http")?s.avatar:`/storage/${s.avatar}`,alt:s.name,class:"w-10 h-10 rounded-full object-cover"},null,8,it)):(r(),u("div",lt,a(s.name.charAt(0).toUpperCase()),1)),t("div",dt,[t("div",nt,a(s.name),1),t("div",ut,"@"+a(s.login_name),1),t("div",gt,a(s.email),1)])])]),t("td",pt,[t("div",xt,[s.is_admin?(r(),u("span",mt," 管理员 ")):n("",!0),s.is_creator?(r(),u("span",vt," 创作者 ")):n("",!0),s.is_top_creator?(r(),u("span",yt," 顶级创作者 ")):n("",!0),s.is_verified?(r(),u("span",ft," 已验证 ")):n("",!0)])]),t("td",ct,[t("div",bt,[t("div",null,a(M(s.type)),1),t("div",null,a(L(s.status)),1)])]),t("td",kt,[t("div",wt,[t("div",null,"💰 "+a(s.credits),1),t("div",_t,"余额: "+a(s.balance),1)])]),t("td",ht,[t("div",Ct,[t("div",null,"👥 "+a(s.followers_count),1),t("div",Vt,"关注: "+a(s.following_count),1)])]),t("td",Ut,[t("div",Dt,[t("div",St,a(s.last_login_at?I(s.last_login_at):"从未登录"),1),s.last_login_ip?(r(),u("div",Tt," IP: "+a(s.last_login_ip),1)):n("",!0)])]),t("td",$t,a(I(s.created_at)),1),t("td",It,[t("div",jt,[D(g(S),{href:`/admin/users/${s.id}`,class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},{default:U(()=>e[39]||(e[39]=[f(" 查看 ",-1)])),_:2,__:[39]},1032,["href"]),D(g(S),{href:`/admin/users/${s.id}/edit`,class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"},{default:U(()=>e[40]||(e[40]=[f(" 编辑 ",-1)])),_:2,__:[40]},1032,["href"])])])]))),128))])])]),o.users.last_page>1?(r(),u("div",Bt,[t("div",Nt," 显示 "+a(o.users.data.length)+" 条，共 "+a(o.users.total)+" 条 ",1),t("nav",Ft,[(r(!0),u(j,null,B(o.users.links,s=>(r(),v(g(S),{key:s.label,href:s.url||"#",class:K(["rounded-md px-3 py-2 text-sm font-medium",s.active?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",!s.url&&"cursor-not-allowed opacity-50"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])):n("",!0)])])])])]),_:1}))}});export{re as default};
