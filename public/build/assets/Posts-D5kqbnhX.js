import{d as N,r as M,c as p,o as a,w as c,b as t,i as r,j as f,a as i,e as o,y as v,f as d,t as n,m as U,k as B,F as h,s as x,q as F,n as y,x as P,l as k}from"./app-BHU2BDvm.js";import{_ as G}from"./WebLayout.vue_vue_type_script_setup_true_lang-CIzADAAQ.js";import{_ as S}from"./index-Br1FRjcV.js";import{_ as C,a as $}from"./CardContent.vue_vue_type_script_setup_true_lang-PBVtCrNm.js";import{_ as V}from"./CardHeader.vue_vue_type_script_setup_true_lang-DOuN_z37.js";import{_ as q}from"./CardTitle.vue_vue_type_script_setup_true_lang-hX2pthDQ.js";import{_ as b}from"./index-CuLDDQmZ.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-NwfWFRxG.js";import{S as I}from"./search-DrU4NyQB.js";import{T as R}from"./tag-CKWQ0QmV.js";import{c as A}from"./createLucideIcon-BHfsc6Ng.js";import{T as J}from"./trending-up-KXU0NcQ1.js";import{C as O}from"./chef-hat-CGHTbDsa.js";import{C as Q}from"./calendar-DUfnbV9s.js";import{E as W}from"./eye-VhnczsVq.js";import{H as X}from"./heart-Ba-HXqq1.js";import{M as Y}from"./message-square-mbJjfhDE.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-BBhwzVB5.js";import"./usePrimitiveElement-BmKPfa8c.js";import"./useForwardExpose-Det-k3DB.js";import"./Primitive-xvq3s7zF.js";import"./RovingFocusGroup-GMSznFHc.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-Cvsd_iMj.js";import"./user-DETLOysp.js";import"./index-BxOLRYnT.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=A("Grid3x3Icon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),ee={class:"max-w-[1000px] mx-auto px-4 py-6"},te={class:"mb-8"},se={class:"flex items-center gap-2 mb-4 text-sm text-[#999999]"},le={key:0,class:"text-white"},ae={key:1,class:"text-white"},oe={class:"flex items-center justify-between mb-6"},re={class:"text-2xl sm:text-3xl font-bold text-white mb-2"},ie={key:0,class:"flex items-center gap-2"},ne={class:"text-2xl"},ce={key:1},de={class:"text-[#999999]"},fe={key:0},ue={key:1},me={key:0},_e={key:0,class:"bg-[#374151] rounded-lg p-4 mb-6"},pe={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ge={class:"md:col-span-2"},he={class:"relative"},xe=["value"],ve={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},ye={key:0,class:"lg:col-span-1"},be=["onClick"],we={class:"flex items-center gap-2"},ke={class:"w-5 h-5 flex-shrink-0 rounded overflow-hidden flex items-center justify-center"},Ce=["src","alt"],$e={key:1,class:"text-sm"},je={class:"text-sm"},Te={key:0,class:"text-xs bg-[#1f2937] px-2 py-1 rounded"},Me={class:"flex flex-row lg:flex-col items-center justify-around lg:justify-start lg:space-y-3 gap-2 lg:gap-0"},Se={class:"flex flex-col lg:flex-row items-center lg:justify-between text-center lg:text-left w-full"},Ve={class:"text-white font-medium text-sm lg:text-base"},qe={key:0,class:"flex flex-col lg:flex-row items-center lg:justify-between text-center lg:text-left w-full"},Ie={class:"text-white font-medium text-sm lg:text-base"},ze={key:0,class:"space-y-4"},De={class:"flex items-start gap-4"},Ee={class:"w-16 h-12 bg-[#1f2937] rounded-lg flex-shrink-0 overflow-hidden"},He=["src","alt"],Le={key:1,class:"w-full h-full"},Ne=["src","alt"],Ue={key:2,class:"w-full h-full flex items-center justify-center"},Be={class:"text-lg"},Fe={class:"flex-1 min-w-0"},Pe={class:"flex items-start justify-between mb-2"},Ge={class:"flex items-center gap-2 mb-1"},Ke={class:"text-white font-medium text-base group-hover:text-[#ff6e02] transition-colors line-clamp-2 mb-2 flex items-center gap-2"},Re={key:0,class:"inline-flex items-center px-2 py-0.5 text-xs font-medium bg-red-500/20 text-red-400 rounded flex-shrink-0"},Ae={class:"text-[#999999] text-sm line-clamp-2 mb-3"},Je={key:0,class:"grid grid-cols-4 gap-2 mb-3"},Oe=["src","alt"],Qe={class:"flex items-center justify-between"},We={class:"flex items-center gap-3"},Xe={class:"flex items-center gap-2"},Ye=["src","alt","onError"],Ze={class:"text-xs text-[#999999]"},et={class:"flex items-center gap-1 text-xs text-[#999999]"},tt={class:"flex items-center gap-4 text-xs text-[#999999]"},st={class:"flex items-center gap-1"},lt={class:"flex items-center gap-1"},at={class:"flex items-center gap-1"},ot={key:1,class:"text-center py-12"},rt={class:"text-[#999999] mb-4"},it={key:0},nt={key:1},ct={key:2,class:"mt-8"},dt={class:"flex items-center justify-center gap-2"},Nt=N({__name:"Posts",props:{posts:{},categories:{},selectedCategory:{},filters:{}},setup(z){const _=z,u=M(_.filters.search||""),m=M(_.filters.type||""),D=l=>new Date(l).toLocaleDateString("zh-CN",{month:"short",day:"numeric"}),E=l=>({tutorial:"教程",discussion:"讨论",showcase:"展示",question:"问答"})[l]||l,j=()=>{const l={};u.value&&(l.search=u.value),m.value&&(l.type=m.value),_.filters.category&&(l.category=_.filters.category),k.get("/community/posts",l,{preserveState:!0,replace:!0})},w=l=>{const s={};l&&(s.category=l),u.value&&(s.search=u.value),m.value&&(s.type=m.value),k.get("/community/posts",s,{preserveState:!0,replace:!0})},H=l=>{m.value=l||"";const s={};l&&(s.type=l),_.filters.category&&(s.category=_.filters.category),u.value&&(s.search=u.value),k.get("/community/posts",s,{preserveState:!0,replace:!0})},L=[{value:"tutorial",label:"教程",icon:"📚"},{value:"discussion",label:"讨论",icon:"💬"},{value:"showcase",label:"展示",icon:"🎨"},{value:"question",label:"问答",icon:"❓"}];return(l,s)=>(a(),p(G,null,{default:c(()=>[t("div",ee,[t("div",te,[t("div",se,[i(o(v),{href:"/",class:"hover:text-[#ff6e02]"},{default:c(()=>s[5]||(s[5]=[d("首页",-1)])),_:1,__:[5]}),s[6]||(s[6]=t("span",null,"/",-1)),l.selectedCategory?(a(),r("span",le,n(l.selectedCategory.name),1)):(a(),r("span",ae,"社区帖子"))]),t("div",oe,[t("div",null,[t("h1",re,[l.selectedCategory?(a(),r("span",ie,[t("span",ne,n(l.selectedCategory.icon||"📝"),1),d(" "+n(l.selectedCategory.name),1)])):(a(),r("span",ce,"社区帖子"))]),t("p",de,[l.selectedCategory?(a(),r("span",fe,"浏览 "+n(l.selectedCategory.name)+" 分类下的所有内容",1)):(a(),r("span",ue,"探索社区中的精彩内容和讨论"))])]),l.selectedCategory?(a(),r("div",me,[i(o(v),{href:"/",class:"inline-flex items-center gap-2 px-4 py-2 bg-[#ff6e02] text-white rounded-lg hover:bg-[#e55a00] transition-colors"},{default:c(()=>s[7]||(s[7]=[t("span",null,"返回首页",-1)])),_:1,__:[7]})])):f("",!0)]),l.selectedCategory?f("",!0):(a(),r("div",_e,[t("div",pe,[t("div",ge,[t("div",he,[i(o(I),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#999999] w-4 h-4"}),i(o(K),{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=e=>u.value=e),placeholder:"搜索帖子...",class:"pl-10 bg-[#1f2937] border-[#1f2937] text-white placeholder:text-[#999999]",onKeyup:U(j,["enter"])},null,8,["modelValue"])])]),t("div",null,[B(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>m.value=e),onChange:s[2]||(s[2]=e=>H(m.value)),class:"w-full px-3 py-2 bg-[#1f2937] border border-[#1f2937] rounded-md text-white"},[s[8]||(s[8]=t("option",{value:""},"所有类型",-1)),(a(),r(h,null,x(L,e=>t("option",{key:e.value,value:e.value},n(e.icon)+" "+n(e.label),9,xe)),64))],544),[[F,m.value]])]),t("div",null,[i(o(S),{onClick:j,class:"w-full bg-[#ff6e02] text-white hover:bg-[#e55a00]"},{default:c(()=>[i(o(I),{class:"w-4 h-4 mr-2"}),s[9]||(s[9]=d(" 搜索 ",-1))]),_:1,__:[9]})])])]))]),t("div",ve,[l.selectedCategory?f("",!0):(a(),r("div",ye,[i(o(C),{class:"bg-[#374151] border-0 mb-6"},{default:c(()=>[i(o(V),{class:"pb-3"},{default:c(()=>[i(o(q),{class:"text-white text-base flex items-center gap-2"},{default:c(()=>[i(o(R),{class:"w-4 h-4"}),s[10]||(s[10]=d(" 分类筛选 ",-1))]),_:1,__:[10]})]),_:1}),i(o($),{class:"space-y-2"},{default:c(()=>[t("button",{onClick:s[3]||(s[3]=e=>w(null)),class:y(["w-full text-left p-2 rounded-lg transition-colors flex items-center gap-2",l.filters.category?"text-[#999999] hover:text-white hover:bg-[#1f2937]":"bg-[#ff6e02] text-white"])},[i(o(Z),{class:"w-4 h-4"}),s[11]||(s[11]=t("span",{class:"text-sm"},"全部分类",-1))],2),(a(!0),r(h,null,x(l.categories,e=>(a(),r("button",{key:e.id,onClick:g=>w(e.slug),class:y(["w-full text-left p-2 rounded-lg transition-colors flex items-center justify-between",l.filters.category===e.slug?"bg-[#ff6e02] text-white":"text-[#999999] hover:text-white hover:bg-[#1f2937]"])},[t("div",we,[t("div",ke,[e.icon_image?(a(),r("img",{key:0,src:`/storage/${e.icon_image}`,alt:e.name,class:"w-full h-full object-cover"},null,8,Ce)):(a(),r("span",$e,n(e.icon||"📝"),1))]),t("span",je,n(e.name),1)]),e.posts_count?(a(),r("span",Te,n(e.posts_count),1)):f("",!0)],10,be))),128))]),_:1})]),_:1}),i(o(C),{class:"bg-[#374151] border-0"},{default:c(()=>[i(o(V),{class:"pb-2 lg:pb-3"},{default:c(()=>[i(o(q),{class:"text-white text-sm lg:text-base flex items-center gap-2"},{default:c(()=>[i(o(J),{class:"w-3 h-3 lg:w-4 lg:h-4"}),s[12]||(s[12]=d(" 统计信息 ",-1))]),_:1,__:[12]})]),_:1}),i(o($),{class:"py-2 lg:py-3"},{default:c(()=>[t("div",Me,[t("div",Se,[s[13]||(s[13]=t("span",{class:"text-xs lg:text-sm text-[#999999]"},"总帖子数",-1)),t("span",Ve,n(l.posts.total),1)]),l.selectedCategory?(a(),r("div",qe,[s[14]||(s[14]=t("span",{class:"text-xs lg:text-sm text-[#999999]"},"当前分类",-1)),t("span",Ie,n(l.posts.data.length),1)])):f("",!0)])]),_:1})]),_:1})])),t("div",{class:y(l.selectedCategory?"lg:col-span-4":"lg:col-span-3")},[l.posts.data.length>0?(a(),r("div",ze,[(a(!0),r(h,null,x(l.posts.data,e=>(a(),p(o(v),{key:e.id,href:`/posts/${e.slug}`,class:"block group"},{default:c(()=>[i(o(C),{class:"bg-[#374151] border-0 hover:bg-[#1f2937] transition-colors"},{default:c(()=>[i(o($),{class:"p-4"},{default:c(()=>[t("div",De,[t("div",Ee,[e.first_image?(a(),r("img",{key:0,src:e.first_image.thumb,alt:e.title,class:"w-full h-full object-cover"},null,8,He)):e.category.icon_image?(a(),r("div",Le,[t("img",{src:`/storage/${e.category.icon_image}`,alt:e.category.name,class:"w-full h-full object-cover"},null,8,Ne)])):(a(),r("div",Ue,[t("span",Be,n(e.category.icon||"📝"),1)]))]),t("div",Fe,[t("div",Pe,[t("div",Ge,[i(o(b),{class:"text-white text-xs px-2 py-1",style:P({backgroundColor:e.category.color})},{default:c(()=>[d(n(e.category.name),1)]),_:2},1032,["style"]),i(o(b),{variant:"outline",class:"text-[#999999] border-[#999999] text-xs"},{default:c(()=>[d(n(E(e.type)),1)]),_:2},1024),e.is_featured?(a(),p(o(b),{key:0,class:"bg-[#ff6e02] text-white text-xs"},{default:c(()=>s[15]||(s[15]=[d(" 精选 ",-1)])),_:1,__:[15]})):f("",!0),e.is_premium?(a(),p(o(b),{key:1,class:"bg-yellow-500 text-white text-xs"},{default:c(()=>s[16]||(s[16]=[d(" ⭐ VIP ",-1)])),_:1,__:[16]})):f("",!0)])]),t("h3",Ke,[t("span",null,n(e.title),1),e.has_video?(a(),r("span",Re," 视频 ")):f("",!0)]),t("p",Ae,n(e.excerpt),1),e.post_images&&e.post_images.length>0?(a(),r("div",Je,[(a(!0),r(h,null,x(e.post_images.slice(0,4),(g,T)=>(a(),r("div",{key:T,class:"relative overflow-hidden rounded-lg aspect-square"},[t("img",{src:g.thumb||g.url,class:"w-full h-full object-cover",alt:`${e.title} - Image ${T+1}`},null,8,Oe)]))),128))])):f("",!0),t("div",Qe,[t("div",We,[t("div",Xe,[t("img",{src:e.user.avatar?`/storage/${e.user.avatar}`:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.user.creator_profile?.display_name||e.user.name)}&size=32&background=ff6e02&color=fff`,class:"w-6 h-6 rounded-full object-cover",alt:e.user.name,onError:g=>g.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(e.user.name)}&size=32&background=ff6e02&color=fff`},null,40,Ye),t("span",Ze,n(e.user.creator_profile?.display_name||e.user.name),1),e.user.creator_profile?.verification_status==="verified"?(a(),p(o(O),{key:0,class:"w-3 h-3 text-[#ff6e02]"})):f("",!0)]),t("div",et,[i(o(Q),{class:"w-3 h-3"}),d(" "+n(D(e.published_at)),1)])]),t("div",tt,[t("span",st,[i(o(W),{class:"w-3 h-3"}),d(" "+n(e.view_count),1)]),t("span",lt,[i(o(X),{class:"w-3 h-3"}),d(" "+n(e.like_count),1)]),t("span",at,[i(o(Y),{class:"w-3 h-3"}),d(" "+n(e.comment_count),1)])])])])])]),_:2},1024)]),_:2},1024)]),_:2},1032,["href"]))),128))])):(a(),r("div",ot,[s[18]||(s[18]=t("div",{class:"text-6xl mb-4"},"📝",-1)),s[19]||(s[19]=t("h3",{class:"text-white text-lg font-medium mb-2"},"暂无帖子",-1)),t("p",rt,[l.selectedCategory?(a(),r("span",it,"该分类下暂时没有帖子")):(a(),r("span",nt,"暂时没有符合条件的帖子"))]),i(o(S),{onClick:s[4]||(s[4]=e=>w(null)),variant:"outline",class:"text-[#ff6e02] border-[#ff6e02]"},{default:c(()=>s[17]||(s[17]=[d(" 浏览所有帖子 ",-1)])),_:1,__:[17]})])),l.posts.last_page>1?(a(),r("div",ct,[t("div",dt,[(a(!0),r(h,null,x(l.posts.links,e=>(a(),p(o(v),{key:e.label,href:e.url||"#",class:y(["px-3 py-2 rounded text-sm transition-colors",e.active?"bg-[#ff6e02] text-white":e.url?"bg-[#374151] text-white hover:bg-[#1f2937]":"bg-[#374151] text-[#999999] cursor-not-allowed"]),innerHTML:e.label},null,8,["href","class","innerHTML"]))),128))])])):f("",!0)],2)])])]),_:1}))}});export{Nt as default};
