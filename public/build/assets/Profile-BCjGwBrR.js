import{d as v,J as N,c as C,o as p,w as a,A as P,G as x,e as t,i as y,b as d,j as E,t as B,r as G,a as r,f as n,am as F,z as O,h as U,y as J,ai as L,k as M,U as R}from"./app-DNz7xqW5.js";import{q as b,b as z}from"./index-C5W0E7bH.js";import{_ as w}from"./InputError.vue_vue_type_script_setup_true_lang-BuB0XpOF.js";import{_ as k}from"./index-rsluyu0R.js";import{a as K,b as W,c as X,d as Y,_ as Z}from"./DialogTitle.vue_vue_type_script_setup_true_lang-c5y5ZS0b.js";import{i as ee,d as te}from"./DialogTitle-5kYcqQhn.js";import{_ as re}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BFUTwFy8.js";import{b as ae}from"./useForwardExpose-Bh4Wiqqq.js";import{a as se}from"./RovingFocusGroup-Yc_1QcHi.js";import{P as oe}from"./Primitive-D5yRNFOr.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-CbljamV3.js";import{_ as q}from"./Label.vue_vue_type_script_setup_true_lang-CpaJ1Lnb.js";import{_ as le,a as ie}from"./CardContent.vue_vue_type_script_setup_true_lang-DX4OlM26.js";import{_ as de}from"./CardDescription.vue_vue_type_script_setup_true_lang-CfsazL1g.js";import{_ as ne}from"./CardHeader.vue_vue_type_script_setup_true_lang-VGFiMmrd.js";import{_ as ue}from"./CardTitle.vue_vue_type_script_setup_true_lang-CdOYfWvU.js";import{_ as me}from"./WebLayout.vue_vue_type_script_setup_true_lang-mIHjGeEI.js";import{_ as fe}from"./Layout.vue_vue_type_script_setup_true_lang-B8NKcsUN.js";import"./index-DVfAX9bo.js";import"./usePrimitiveElement-DPLwNSZo.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-CzzycHYI.js";import"./createLucideIcon-BiZkqaw8.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DIpO6N91.js";import"./heart-tGgFbo3X.js";import"./user-BIKLIumi.js";import"./index-DBG7u9ON.js";import"./index-D4vsjTq5.js";var ce=v({__name:"DialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const s=e,o=ee(),{forwardRef:l,currentElement:i}=ae();return o.contentId||=se(void 0,"reka-dialog-content"),N(()=>{o.triggerElement.value=i.value}),(h,$)=>(p(),C(t(oe),x(s,{ref:t(l),type:h.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":t(o).open.value||!1,"aria-controls":t(o).open.value?t(o).contentId:void 0,"data-state":t(o).open.value?"open":"closed",onClick:t(o).onOpenToggle}),{default:a(()=>[P(h.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),pe=ce;const _e=v({__name:"DialogClose",props:{asChild:{type:Boolean},as:{}},setup(e){const s=e;return(o,l)=>(p(),C(t(te),x({"data-slot":"dialog-close"},s),{default:a(()=>[P(o.$slots,"default")]),_:3},16))}}),ge=v({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(e){const s=e;return(o,l)=>(p(),C(t(pe),x({"data-slot":"dialog-trigger"},s),{default:a(()=>[P(o.$slots,"default")]),_:3},16))}}),f=e=>({url:f.url(e),method:"get"});f.definition={methods:["get","head"],url:"/settings/profile"};f.url=e=>f.definition.url+b(e);f.get=e=>({url:f.url(e),method:"get"});f.head=e=>({url:f.url(e),method:"head"});const T=e=>({action:f.url(e),method:"get"});T.get=e=>({action:f.url(e),method:"get"});T.head=e=>({action:f.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});f.form=T;const _=e=>({url:_.url(e),method:"patch"});_.definition={methods:["patch"],url:"/settings/profile"};_.url=e=>_.definition.url+b(e);_.patch=e=>({url:_.url(e),method:"patch"});const S=e=>({action:_.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...e?.query??e?.mergeQuery??{}}}),method:"post"});S.patch=e=>({action:_.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...e?.query??e?.mergeQuery??{}}}),method:"post"});_.form=S;const g=e=>({url:g.url(e),method:"delete"});g.definition={methods:["delete"],url:"/settings/profile"};g.url=e=>g.definition.url+b(e);g.delete=e=>({url:g.url(e),method:"delete"});const H=e=>({action:g.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});H.delete=e=>({action:g.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});g.form=H;const I={edit:f,update:_,destroy:g},u=e=>({url:u.url(e),method:"get"});u.definition={methods:["get","head"],url:"/verify-email"};u.url=e=>u.definition.url+b(e);u.get=e=>({url:u.url(e),method:"get"});u.head=e=>({url:u.url(e),method:"head"});const A=e=>({action:u.url(e),method:"get"});A.get=e=>({action:u.url(e),method:"get"});A.head=e=>({action:u.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});u.form=A;const m=(e,s)=>({url:m.url(e,s),method:"get"});m.definition={methods:["get","head"],url:"/verify-email/{id}/{hash}"};m.url=(e,s)=>{Array.isArray(e)&&(e={id:e[0],hash:e[1]}),e=z(e);const o={id:e.id,hash:e.hash};return m.definition.url.replace("{id}",o.id.toString()).replace("{hash}",o.hash.toString()).replace(/\/+$/,"")+b(s)};m.get=(e,s)=>({url:m.url(e,s),method:"get"});m.head=(e,s)=>({url:m.url(e,s),method:"head"});const j=(e,s)=>({action:m.url(e,s),method:"get"});j.get=(e,s)=>({action:m.url(e,s),method:"get"});j.head=(e,s)=>({action:m.url(e,{[s?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...s?.query??s?.mergeQuery??{}}}),method:"get"});m.form=j;const c=e=>({url:c.url(e),method:"post"});c.definition={methods:["post"],url:"/email/verification-notification"};c.url=e=>c.definition.url+b(e);c.post=e=>({url:c.url(e),method:"post"});const V=e=>({action:c.url(e),method:"post"});V.post=e=>({action:c.url(e),method:"post"});c.form=V;Object.assign(u,u),Object.assign(m,m),Object.assign(c,c);const he={class:"mb-0.5 text-base font-medium"},ye={key:0,class:"text-sm text-muted-foreground"},ve=v({__name:"HeadingSmall",props:{title:{},description:{}},setup(e){return(s,o)=>(p(),y("header",null,[d("h3",he,B(s.title),1),s.description?(p(),y("p",ye,B(s.description),1)):E("",!0)]))}}),be={class:"space-y-6"},xe={class:"space-y-4 rounded-lg border border-red-100 bg-red-50 p-4 dark:border-red-200/10 dark:bg-red-700/10"},$e={class:"grid gap-2"},we=v({__name:"DeleteUser",setup(e){const s=G(null);return(o,l)=>(p(),y("div",be,[r(ve,{title:"删除账户",description:"删除你的账户及其所有资源"}),d("div",xe,[l[7]||(l[7]=d("div",{class:"relative space-y-0.5 text-red-600 dark:text-red-100"},[d("p",{class:"font-medium"},"警告"),d("p",{class:"text-sm"}," 请谨慎操作，此操作无法撤销。 ")],-1)),r(t(Z),null,{default:a(()=>[r(t(ge),{"as-child":""},{default:a(()=>[r(t(k),{variant:"destructive","data-test":"delete-user-button"},{default:a(()=>l[1]||(l[1]=[n("删除账户",-1)])),_:1,__:[1]})]),_:1}),r(t(K),null,{default:a(()=>[r(t(F),x(t(I).destroy.form(),{"reset-on-success":"",onError:l[0]||(l[0]=()=>s.value?.$el?.focus()),options:{preserveScroll:!0},class:"space-y-6"}),{default:a(({errors:i,processing:h,reset:$,clearErrors:D})=>[r(t(W),{class:"space-y-3"},{default:a(()=>[r(t(X),null,{default:a(()=>l[2]||(l[2]=[n("确定要删除你的账户吗？",-1)])),_:1,__:[2]}),r(t(Y),null,{default:a(()=>l[3]||(l[3]=[n(" 一旦删除你的账户，其所有资源和数据也将被永久删除。请输入你的密码以确认你希望永久删除你的账户。 ",-1)])),_:1,__:[3]})]),_:1}),d("div",$e,[r(t(q),{for:"password",class:"sr-only"},{default:a(()=>l[4]||(l[4]=[n("密码",-1)])),_:1,__:[4]}),r(t(Q),{id:"password",type:"password",name:"password",ref_key:"passwordInput",ref:s,placeholder:"密码"},null,512),r(w,{message:i.password},null,8,["message"])]),r(t(re),{class:"gap-2"},{default:a(()=>[r(t(_e),{"as-child":""},{default:a(()=>[r(t(k),{variant:"secondary",onClick:()=>{D(),$()}},{default:a(()=>l[5]||(l[5]=[n(" 取消 ",-1)])),_:2,__:[5]},1032,["onClick"])]),_:2},1024),r(t(k),{type:"submit",variant:"destructive",disabled:h,"data-test":"confirm-delete-user-button"},{default:a(()=>l[6]||(l[6]=[n(" 删除账户 ",-1)])),_:2,__:[6]},1032,["disabled"])]),_:2},1024)]),_:1},16)]),_:1})]),_:1})])]))}}),ke={class:"grid gap-2"},Qe={class:"flex items-center gap-4"},qe={key:0,class:"shrink-0"},Ce=["src"],De={key:1,class:"flex h-20 w-20 shrink-0 items-center justify-center rounded-full bg-[#1c1c1c] border border-[#4B5563]"},Ee={class:"text-2xl text-[#999999]"},Be={class:"grid gap-2"},Pe={class:"grid gap-2"},Te={key:0},Ae={class:"-mt-4 text-sm text-[#999999]"},je={key:0,class:"mt-2 text-sm font-medium text-green-500"},Fe={class:"flex items-center gap-4"},Se={class:"text-sm text-green-500"},mt=v({__name:"Profile",props:{mustVerifyEmail:{type:Boolean},status:{}},setup(e){const o=O().props.auth.user;return(l,i)=>(p(),C(me,null,{default:a(()=>[r(t(U),{title:"个人资料设置"}),r(fe,null,{default:a(()=>[r(t(le),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[r(t(ne),null,{default:a(()=>[r(t(ue),{class:"text-white"},{default:a(()=>i[0]||(i[0]=[n("个人信息",-1)])),_:1,__:[0]}),r(t(de),{class:"text-[#999999]"},{default:a(()=>i[1]||(i[1]=[n("更新你的姓名和邮箱地址",-1)])),_:1,__:[1]})]),_:1}),r(t(ie),null,{default:a(()=>[r(t(F),x(t(I).update.form(),{class:"space-y-6",enctype:"multipart/form-data"}),{default:a(({errors:h,processing:$,recentlySuccessful:D})=>[d("div",ke,[r(t(q),{for:"avatar",class:"text-white"},{default:a(()=>i[2]||(i[2]=[n("头像",-1)])),_:1,__:[2]}),d("div",Qe,[t(o).avatar?(p(),y("div",qe,[d("img",{src:`/storage/${t(o).avatar}`,alt:"当前头像",class:"h-20 w-20 rounded-full object-cover"},null,8,Ce)])):(p(),y("div",De,[d("span",Ee,B(t(o).name?.charAt(0).toUpperCase()),1)])),r(t(Q),{id:"avatar",type:"file",name:"avatar",accept:"image/*",class:"bg-[#1c1c1c] border-[#4B5563] text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-[#ff6e02] file:text-white hover:file:bg-[#e55a00]"})]),r(w,{class:"mt-2",message:h.avatar},null,8,["message"]),i[3]||(i[3]=d("p",{class:"text-sm text-[#999999]"},"最大文件大小: 2MB。支持的格式: JPG, PNG, GIF",-1))]),d("div",Be,[r(t(q),{for:"name",class:"text-white"},{default:a(()=>i[4]||(i[4]=[n("姓名",-1)])),_:1,__:[4]}),r(t(Q),{id:"name",class:"bg-[#1c1c1c] border-[#4B5563] text-white placeholder:text-[#999999]",name:"name","default-value":t(o).name,required:"",autocomplete:"name",placeholder:"输入你的姓名"},null,8,["default-value"]),r(w,{class:"mt-2",message:h.name},null,8,["message"])]),d("div",Pe,[r(t(q),{for:"email",class:"text-white"},{default:a(()=>i[5]||(i[5]=[n("邮箱地址",-1)])),_:1,__:[5]}),r(t(Q),{id:"email",type:"email",class:"bg-[#1c1c1c] border-[#4B5563] text-white placeholder:text-[#999999]",name:"email","default-value":t(o).email,required:"",autocomplete:"username",placeholder:"输入你的邮箱地址"},null,8,["default-value"]),r(w,{class:"mt-2",message:h.email},null,8,["message"])]),l.mustVerifyEmail&&!t(o).email_verified_at?(p(),y("div",Te,[d("p",Ae,[i[7]||(i[7]=n(" 你的邮箱地址尚未验证。 ",-1)),r(t(J),{href:t(c)(),as:"button",class:"text-[#ff6e02] underline underline-offset-4 hover:text-[#e55a00]"},{default:a(()=>i[6]||(i[6]=[n(" 点击此处重新发送验证邮件。 ",-1)])),_:1,__:[6]},8,["href"])]),l.status==="verification-link-sent"?(p(),y("div",je," 新的验证链接已发送到你的邮箱地址。 ")):E("",!0)])):E("",!0),d("div",Fe,[r(t(k),{disabled:$,"data-test":"update-profile-button",class:"bg-[#ff6e02] hover:bg-[#e55a00] text-white"},{default:a(()=>i[8]||(i[8]=[n("保存",-1)])),_:2,__:[8]},1032,["disabled"]),r(L,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:a(()=>[M(d("p",Se," 已保存 ",512),[[R,D]])]),_:2},1024)])]),_:1},16)]),_:1})]),_:1}),r(we)]),_:1})]),_:1}))}});export{mt as default};
