import{_ as B}from"./WebLayout.vue_vue_type_script_setup_true_lang-C81GkRsX.js";import{d as N,u as V,c as f,o as i,w as u,a as r,b as s,e as n,h as F,i as c,j as l,m as R,E as L,n as m,f as b,t as o,y as E,l as h}from"./app-CGnIBUHd.js";import{_ as g}from"./index-DYYbfXf2.js";import{_ as x}from"./index-DieGkx7F.js";import{A as X}from"./arrow-left-BAf-8Y93.js";import{C as I}from"./crown-Pocyagzu.js";import{C as P}from"./calendar-BMM5kMbc.js";import{C as q}from"./credit-card-tG7bhe8K.js";import{S as G,X as H}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-bTLJB_YX.js";import{R as J}from"./refresh-cw-C5CucBvv.js";import{C as _}from"./circle-check-big-OIuGFlPK.js";import{C}from"./circle-x-DmC6ru79.js";import{C as K}from"./clock-BsXVY5px.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CZmcPzd0.js";import"./createLucideIcon-CwJxfQWd.js";import"./heart-C46dLvQL.js";import"./user-g9nPOSWd.js";import"./Primitive-Ctx9SZAN.js";import"./index-C4HzZ1T_.js";import"./useForwardExpose-B4tSyQsn.js";import"./usePrimitiveElement-BAFidYUa.js";import"./RovingFocusGroup-CO147YIP.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";const O={class:"min-h-screen bg-[#1c1c1c] pb-20"},Q={class:"bg-[#1f2937] u-p-25 sticky top-0 z-10"},U={class:"flex items-center"},W={class:"u-m-25"},Y={class:"listclass u-p-25"},Z={class:"flex items-center justify-center u-m-b-20"},ss={class:"text-center u-m-b-20"},ts={key:0,class:"text-center"},es={class:"font40 text-[#ff6e02] font-w-700"},os={class:"u-m-25"},ns={class:"listclass u-p-25"},is={class:"flex items-center u-m-b-20"},rs={class:"space-y-3"},ls={class:"flex items-center justify-between"},as={class:"flex items-center justify-between"},cs={class:"font24 colorz"},us={class:"flex items-center justify-between"},ds={class:"font24 text-[#ff6e02] font-w-600"},ps={class:"u-m-25"},fs={class:"listclass u-p-25"},ms={class:"flex items-center u-m-b-20"},bs={class:"space-y-3"},_s={class:"flex items-center justify-between"},ws={class:"font24 colorz"},vs={class:"flex items-center justify-between"},ys={class:"font24 colorz"},hs={key:0,class:"flex items-center justify-between"},gs={class:"font24 colorz"},xs={key:1,class:"flex items-center justify-between"},Cs={class:"font24 colorz"},ks={class:"flex items-center justify-between"},js={class:"font24 colorz"},zs={class:"u-m-25"},Ss={class:"listclass u-p-25"},Ms={class:"flex items-center u-m-b-20"},Ds={class:"space-y-3"},$s={class:"flex items-center justify-between"},As={class:"font24 colorz"},Ts={key:0,class:"flex items-center justify-between"},Bs={class:"font22 colorz break-all"},Ns={key:0,class:"u-m-25"},Vs={class:"listclass u-p-25"},Fs={class:"flex items-center u-m-b-20"},Rs={class:"flex items-center justify-between"},Ls={key:1,class:"u-m-25"},Es={class:"listclass u-p-25 bg-red-500/10"},Xs={class:"space-y-3"},Is={key:0,class:"flex items-center justify-between"},Ps={class:"font24 text-red-400"},qs={key:1},Gs={class:"font24 colorz"},Hs={class:"u-m-25 space-y-3"},wt=N({__name:"Show",props:{subscription:{}},setup(k){const a=k,w=V({reason:""}),d=e=>new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),j=e=>({active:"当前有效",cancelled:"已取消",expired:"已过期",suspended:"已暂停",trial:"试用中"})[e]||e,z=e=>({active:"bg-green-500/20 text-green-400",cancelled:"bg-red-500/20 text-red-400",expired:"bg-gray-500/20 text-gray-400",suspended:"bg-yellow-500/20 text-yellow-400",trial:"bg-blue-500/20 text-blue-400"})[e]||"bg-gray-500/20 text-gray-400",S=e=>({active:_,cancelled:C,expired:K,suspended:C,trial:_})[e]||_,M=e=>({alipay:"支付宝",wechat:"微信支付",credits:"金币支付",card:"银行卡"})[e]||e,D=()=>{confirm("确认续费此订阅吗？")&&h.post(`/plan-subscriptions/${a.subscription.id}/renew`,{},{preserveScroll:!0})},$=()=>{const e=prompt("请输入取消原因（可选）：");e!==null&&(w.reason=e,w.post(`/plan-subscriptions/${a.subscription.id}/cancel`,{preserveScroll:!0}))},A=()=>{h.put(`/plan-subscriptions/${a.subscription.id}`,{auto_renew:!a.subscription.auto_renew},{preserveScroll:!0})},v=()=>{if(!a.subscription.expires_at)return null;const e=new Date,T=new Date(a.subscription.expires_at).getTime()-e.getTime();return Math.ceil(T/(1e3*60*60*24))},p=()=>a.subscription.status==="active",y=()=>a.subscription.status==="cancelled";return(e,t)=>(i(),f(B,null,{default:u(()=>[r(n(F),{title:`订阅详情 - ${e.subscription.subscription_number}`},null,8,["title"]),s("div",O,[s("div",Q,[s("div",U,[r(n(R),{href:"/plan-subscriptions",class:"u-p-r-25"},{default:u(()=>[r(n(X),{class:"w-6 h-6 text-white"})]),_:1}),t[0]||(t[0]=s("h1",{class:"colorz font32 font-w-600"},"订阅详情",-1))])]),s("div",W,[s("div",Y,[s("div",Z,[(i(),f(L(S(e.subscription.status)),{class:m(["w-16 h-16",e.subscription.status==="active"?"text-green-400":e.subscription.status==="cancelled"?"text-red-400":"text-gray-400"])},null,8,["class"]))]),s("div",ss,[r(n(g),{class:m([z(e.subscription.status),"font28 u-p-15"])},{default:u(()=>[b(o(j(e.subscription.status)),1)]),_:1},8,["class"])]),p()&&e.subscription.expires_at&&v()!==null?(i(),c("div",ts,[t[1]||(t[1]=s("p",{class:"font24 color999 u-m-b-5"},"距离到期还有",-1)),s("p",es,o(v())+" 天",1)])):l("",!0)])]),s("div",os,[s("div",ns,[s("div",is,[r(n(I),{class:"w-6 h-6 text-[#ff6e02] u-p-r-10"}),t[2]||(t[2]=s("h3",{class:"font28 colorfff font-w-600"},"套餐信息",-1))]),s("div",rs,[s("div",ls,[t[3]||(t[3]=s("span",{class:"font24 color999"},"套餐名称",-1)),r(n(g),{style:E({backgroundColor:e.subscription.plan.badge_color,color:e.subscription.plan.badge_text_color}),class:"font24"},{default:u(()=>[b(o(e.subscription.plan.name),1)]),_:1},8,["style"])]),s("div",as,[t[4]||(t[4]=s("span",{class:"font24 color999"},"套餐等级",-1)),s("span",cs,"LV"+o(e.subscription.plan.level),1)]),s("div",us,[t[5]||(t[5]=s("span",{class:"font24 color999"},"支付金额",-1)),s("span",ds,"¥"+o(parseFloat(e.subscription.price_paid).toFixed(2)),1)])])])]),s("div",ps,[s("div",fs,[s("div",ms,[r(n(P),{class:"w-6 h-6 text-[#ff6e02] u-p-r-10"}),t[6]||(t[6]=s("h3",{class:"font28 colorfff font-w-600"},"订阅详情",-1))]),s("div",bs,[s("div",_s,[t[7]||(t[7]=s("span",{class:"font24 color999"},"订单号",-1)),s("span",ws,o(e.subscription.subscription_number),1)]),s("div",vs,[t[8]||(t[8]=s("span",{class:"font24 color999"},"开始时间",-1)),s("span",ys,o(d(e.subscription.started_at)),1)]),e.subscription.expires_at?(i(),c("div",hs,[t[9]||(t[9]=s("span",{class:"font24 color999"},"到期时间",-1)),s("span",gs,o(d(e.subscription.expires_at)),1)])):l("",!0),e.subscription.last_renewed_at?(i(),c("div",xs,[t[10]||(t[10]=s("span",{class:"font24 color999"},"最后续费",-1)),s("span",Cs,o(d(e.subscription.last_renewed_at)),1)])):l("",!0),s("div",ks,[t[11]||(t[11]=s("span",{class:"font24 color999"},"续费次数",-1)),s("span",js,o(e.subscription.renewal_count)+" 次",1)])])])]),s("div",zs,[s("div",Ss,[s("div",Ms,[r(n(q),{class:"w-6 h-6 text-[#ff6e02] u-p-r-10"}),t[12]||(t[12]=s("h3",{class:"font28 colorfff font-w-600"},"支付信息",-1))]),s("div",Ds,[s("div",$s,[t[13]||(t[13]=s("span",{class:"font24 color999"},"支付方式",-1)),s("span",As,o(M(e.subscription.payment_method)),1)]),e.subscription.payment_transaction_id?(i(),c("div",Ts,[t[14]||(t[14]=s("span",{class:"font24 color999"},"交易号",-1)),s("span",Bs,o(e.subscription.payment_transaction_id),1)])):l("",!0)])])]),p()?(i(),c("div",Ns,[s("div",Vs,[s("div",Fs,[r(n(G),{class:"w-6 h-6 text-[#ff6e02] u-p-r-10"}),t[15]||(t[15]=s("h3",{class:"font28 colorfff font-w-600"},"订阅设置",-1))]),s("div",Rs,[t[16]||(t[16]=s("div",null,[s("h4",{class:"font28 colorfff font-w-600 u-m-b-5"},"自动续费"),s("p",{class:"font22 color999"},"到期后自动续费，可随时关闭")],-1)),s("div",{onClick:A,class:m(["w-14 h-8 rounded-full cursor-pointer transition-all relative",e.subscription.auto_renew?"bg-[#ff6e02]":"bg-[#374151]"])},[s("div",{class:m(["w-6 h-6 bg-white rounded-full absolute top-1 transition-all",e.subscription.auto_renew?"left-7":"left-1"])},null,2)],2)])])])):l("",!0),y()?(i(),c("div",Ls,[s("div",Es,[t[19]||(t[19]=s("h3",{class:"font28 text-red-400 font-w-600 u-m-b-15"},"取消信息",-1)),s("div",Xs,[e.subscription.cancelled_at?(i(),c("div",Is,[t[17]||(t[17]=s("span",{class:"font24 color999"},"取消时间",-1)),s("span",Ps,o(d(e.subscription.cancelled_at)),1)])):l("",!0),e.subscription.cancellation_reason?(i(),c("div",qs,[t[18]||(t[18]=s("span",{class:"font24 color999 block u-m-b-10"},"取消原因",-1)),s("p",Gs,o(e.subscription.cancellation_reason),1)])):l("",!0)])])])):l("",!0),s("div",Hs,[p()?(i(),f(n(x),{key:0,onClick:D,class:"w-full bg-[#ff6e02] hover:bg-[#ff8534] text-white font30 u-p-25 h-auto rounded-lg"},{default:u(()=>[r(n(J),{class:"w-6 h-6 u-p-r-10"}),t[20]||(t[20]=b(" 立即续费 ",-1))]),_:1,__:[20]})):l("",!0),p()&&!y()?(i(),f(n(x),{key:1,onClick:$,variant:"outline",class:"w-full border-red-500 text-red-400 hover:bg-red-500/10 font28 u-p-25 h-auto rounded-lg"},{default:u(()=>[r(n(H),{class:"w-6 h-6 u-p-r-10"}),t[21]||(t[21]=b(" 取消订阅 ",-1))]),_:1,__:[21]})):l("",!0)])])]),_:1}))}});export{wt as default};
