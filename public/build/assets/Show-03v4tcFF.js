import{_ as T}from"./WebLayout.vue_vue_type_script_setup_true_lang-BuEyL4QI.js";import{d as N,u as V,c as f,o as i,w as u,a as r,b as s,e as n,h as F,i as c,j as l,y as L,B as R,n as m,f as b,t as o,x as I,r as h}from"./app-Cr1-bfp6.js";import{_ as g}from"./index-DlFIr6ya.js";import{_ as x}from"./index-lpqA9n3T.js";import{A as X}from"./arrow-left-DUzqObac.js";import{C as q}from"./crown-CUIlMPkf.js";import{C as E}from"./calendar-zJKBoG9p.js";import{C as P}from"./credit-card-Dcnrr1Le.js";import{S as G,X as H}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-BAicNrmo.js";import{R as J}from"./refresh-cw-CcpGZMUR.js";import{C as _}from"./circle-check-big-CiXtFWtn.js";import{c as K}from"./createLucideIcon-Bu3ftgQ4.js";import{C as O}from"./clock-Bi_npgtb.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-B2SYAPub.js";import"./heart-v85_eRed.js";import"./user-DeqqlEKy.js";import"./Primitive-DoRs6A-6.js";import"./index-DL6m3p6E.js";import"./useForwardExpose-0MJtrphj.js";import"./usePrimitiveElement-BCcmWXM-.js";import"./RovingFocusGroup-eCyRDJgY.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=K("CircleXIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Q={class:"min-h-screen bg-[#1c1c1c] pb-20"},U={class:"bg-[#1f2937] u-p-25 sticky top-0 z-10"},W={class:"flex items-center"},Y={class:"u-m-25"},Z={class:"listclass u-p-25"},ss={class:"flex items-center justify-center u-m-b-20"},ts={class:"text-center u-m-b-20"},es={key:0,class:"text-center"},os={class:"font40 text-[#ff6e02] font-w-700"},ns={class:"u-m-25"},is={class:"listclass u-p-25"},rs={class:"flex items-center u-m-b-20"},ls={class:"space-y-3"},as={class:"flex items-center justify-between"},cs={class:"flex items-center justify-between"},us={class:"font24 colorz"},ds={class:"flex items-center justify-between"},ps={class:"font24 text-[#ff6e02] font-w-600"},fs={class:"u-m-25"},ms={class:"listclass u-p-25"},bs={class:"flex items-center u-m-b-20"},_s={class:"space-y-3"},vs={class:"flex items-center justify-between"},ws={class:"font24 colorz"},ys={class:"flex items-center justify-between"},hs={class:"font24 colorz"},gs={key:0,class:"flex items-center justify-between"},xs={class:"font24 colorz"},Cs={key:1,class:"flex items-center justify-between"},ks={class:"font24 colorz"},zs={class:"flex items-center justify-between"},js={class:"font24 colorz"},Ss={class:"u-m-25"},Ms={class:"listclass u-p-25"},Ds={class:"flex items-center u-m-b-20"},$s={class:"space-y-3"},As={class:"flex items-center justify-between"},Bs={class:"font24 colorz"},Ts={key:0,class:"flex items-center justify-between"},Ns={class:"font22 colorz break-all"},Vs={key:0,class:"u-m-25"},Fs={class:"listclass u-p-25"},Ls={class:"flex items-center u-m-b-20"},Rs={class:"flex items-center justify-between"},Is={key:1,class:"u-m-25"},Xs={class:"listclass u-p-25 bg-red-500/10"},qs={class:"space-y-3"},Es={key:0,class:"flex items-center justify-between"},Ps={class:"font24 text-red-400"},Gs={key:1},Hs={class:"font24 colorz"},Js={class:"u-m-25 space-y-3"},vt=N({__name:"Show",props:{subscription:{}},setup(k){const a=k,v=V({reason:""}),d=e=>new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),z=e=>({active:"当前有效",cancelled:"已取消",expired:"已过期",suspended:"已暂停",trial:"试用中"})[e]||e,j=e=>({active:"bg-green-500/20 text-green-400",cancelled:"bg-red-500/20 text-red-400",expired:"bg-gray-500/20 text-gray-400",suspended:"bg-yellow-500/20 text-yellow-400",trial:"bg-blue-500/20 text-blue-400"})[e]||"bg-gray-500/20 text-gray-400",S=e=>({active:_,cancelled:C,expired:O,suspended:C,trial:_})[e]||_,M=e=>({alipay:"支付宝",wechat:"微信支付",credits:"金币支付",card:"银行卡"})[e]||e,D=()=>{confirm("确认续费此订阅吗？")&&h.post(`/plan-subscriptions/${a.subscription.id}/renew`,{},{preserveScroll:!0})},$=()=>{const e=prompt("请输入取消原因（可选）：");e!==null&&(v.reason=e,v.post(`/plan-subscriptions/${a.subscription.id}/cancel`,{preserveScroll:!0}))},A=()=>{h.put(`/plan-subscriptions/${a.subscription.id}`,{auto_renew:!a.subscription.auto_renew},{preserveScroll:!0})},w=()=>{if(!a.subscription.expires_at)return null;const e=new Date,B=new Date(a.subscription.expires_at).getTime()-e.getTime();return Math.ceil(B/(1e3*60*60*24))},p=()=>a.subscription.status==="active",y=()=>a.subscription.status==="cancelled";return(e,t)=>(i(),f(T,null,{default:u(()=>[r(n(F),{title:`订阅详情 - ${e.subscription.subscription_number}`},null,8,["title"]),s("div",Q,[s("div",U,[s("div",W,[r(n(L),{href:"/plan-subscriptions",class:"u-p-r-25"},{default:u(()=>[r(n(X),{class:"w-6 h-6 text-white"})]),_:1}),t[0]||(t[0]=s("h1",{class:"colorz font32 font-w-600"},"订阅详情",-1))])]),s("div",Y,[s("div",Z,[s("div",ss,[(i(),f(R(S(e.subscription.status)),{class:m(["w-16 h-16",e.subscription.status==="active"?"text-green-400":e.subscription.status==="cancelled"?"text-red-400":"text-gray-400"])},null,8,["class"]))]),s("div",ts,[r(n(g),{class:m([j(e.subscription.status),"font28 u-p-15"])},{default:u(()=>[b(o(z(e.subscription.status)),1)]),_:1},8,["class"])]),p()&&e.subscription.expires_at&&w()!==null?(i(),c("div",es,[t[1]||(t[1]=s("p",{class:"font24 color999 u-m-b-5"},"距离到期还有",-1)),s("p",os,o(w())+" 天",1)])):l("",!0)])]),s("div",ns,[s("div",is,[s("div",rs,[r(n(q),{class:"w-6 h-6 text-[#ff6e02] u-p-r-10"}),t[2]||(t[2]=s("h3",{class:"font28 colorfff font-w-600"},"套餐信息",-1))]),s("div",ls,[s("div",as,[t[3]||(t[3]=s("span",{class:"font24 color999"},"套餐名称",-1)),r(n(g),{style:I({backgroundColor:e.subscription.plan.badge_color,color:e.subscription.plan.badge_text_color}),class:"font24"},{default:u(()=>[b(o(e.subscription.plan.name),1)]),_:1},8,["style"])]),s("div",cs,[t[4]||(t[4]=s("span",{class:"font24 color999"},"套餐等级",-1)),s("span",us,"LV"+o(e.subscription.plan.level),1)]),s("div",ds,[t[5]||(t[5]=s("span",{class:"font24 color999"},"支付金额",-1)),s("span",ps,"¥"+o(parseFloat(e.subscription.price_paid).toFixed(2)),1)])])])]),s("div",fs,[s("div",ms,[s("div",bs,[r(n(E),{class:"w-6 h-6 text-[#ff6e02] u-p-r-10"}),t[6]||(t[6]=s("h3",{class:"font28 colorfff font-w-600"},"订阅详情",-1))]),s("div",_s,[s("div",vs,[t[7]||(t[7]=s("span",{class:"font24 color999"},"订单号",-1)),s("span",ws,o(e.subscription.subscription_number),1)]),s("div",ys,[t[8]||(t[8]=s("span",{class:"font24 color999"},"开始时间",-1)),s("span",hs,o(d(e.subscription.started_at)),1)]),e.subscription.expires_at?(i(),c("div",gs,[t[9]||(t[9]=s("span",{class:"font24 color999"},"到期时间",-1)),s("span",xs,o(d(e.subscription.expires_at)),1)])):l("",!0),e.subscription.last_renewed_at?(i(),c("div",Cs,[t[10]||(t[10]=s("span",{class:"font24 color999"},"最后续费",-1)),s("span",ks,o(d(e.subscription.last_renewed_at)),1)])):l("",!0),s("div",zs,[t[11]||(t[11]=s("span",{class:"font24 color999"},"续费次数",-1)),s("span",js,o(e.subscription.renewal_count)+" 次",1)])])])]),s("div",Ss,[s("div",Ms,[s("div",Ds,[r(n(P),{class:"w-6 h-6 text-[#ff6e02] u-p-r-10"}),t[12]||(t[12]=s("h3",{class:"font28 colorfff font-w-600"},"支付信息",-1))]),s("div",$s,[s("div",As,[t[13]||(t[13]=s("span",{class:"font24 color999"},"支付方式",-1)),s("span",Bs,o(M(e.subscription.payment_method)),1)]),e.subscription.payment_transaction_id?(i(),c("div",Ts,[t[14]||(t[14]=s("span",{class:"font24 color999"},"交易号",-1)),s("span",Ns,o(e.subscription.payment_transaction_id),1)])):l("",!0)])])]),p()?(i(),c("div",Vs,[s("div",Fs,[s("div",Ls,[r(n(G),{class:"w-6 h-6 text-[#ff6e02] u-p-r-10"}),t[15]||(t[15]=s("h3",{class:"font28 colorfff font-w-600"},"订阅设置",-1))]),s("div",Rs,[t[16]||(t[16]=s("div",null,[s("h4",{class:"font28 colorfff font-w-600 u-m-b-5"},"自动续费"),s("p",{class:"font22 color999"},"到期后自动续费，可随时关闭")],-1)),s("div",{onClick:A,class:m(["w-14 h-8 rounded-full cursor-pointer transition-all relative",e.subscription.auto_renew?"bg-[#ff6e02]":"bg-[#374151]"])},[s("div",{class:m(["w-6 h-6 bg-white rounded-full absolute top-1 transition-all",e.subscription.auto_renew?"left-7":"left-1"])},null,2)],2)])])])):l("",!0),y()?(i(),c("div",Is,[s("div",Xs,[t[19]||(t[19]=s("h3",{class:"font28 text-red-400 font-w-600 u-m-b-15"},"取消信息",-1)),s("div",qs,[e.subscription.cancelled_at?(i(),c("div",Es,[t[17]||(t[17]=s("span",{class:"font24 color999"},"取消时间",-1)),s("span",Ps,o(d(e.subscription.cancelled_at)),1)])):l("",!0),e.subscription.cancellation_reason?(i(),c("div",Gs,[t[18]||(t[18]=s("span",{class:"font24 color999 block u-m-b-10"},"取消原因",-1)),s("p",Hs,o(e.subscription.cancellation_reason),1)])):l("",!0)])])])):l("",!0),s("div",Js,[p()?(i(),f(n(x),{key:0,onClick:D,class:"w-full bg-[#ff6e02] hover:bg-[#ff8534] text-white font30 u-p-25 h-auto rounded-lg"},{default:u(()=>[r(n(J),{class:"w-6 h-6 u-p-r-10"}),t[20]||(t[20]=b(" 立即续费 ",-1))]),_:1,__:[20]})):l("",!0),p()&&!y()?(i(),f(n(x),{key:1,onClick:$,variant:"outline",class:"w-full border-red-500 text-red-400 hover:bg-red-500/10 font28 u-p-25 h-auto rounded-lg"},{default:u(()=>[r(n(H),{class:"w-6 h-6 u-p-r-10"}),t[21]||(t[21]=b(" 取消订阅 ",-1))]),_:1,__:[21]})):l("",!0)])])]),_:1}))}});export{vt as default};
