import{d as N,r as n,c as j,o as u,w as l,a as r,b as t,e as s,h as z,i as m,j as A,f as p,t as o,k as H,F as k,x as w,s as P,m as M,n as E,l as q}from"./app-Fsc2fWeG.js";import{D as G,_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-BRLOr3JF.js";import{_ as K}from"./index-BvqcHxZ0.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-C-CnsAdF.js";import{_ as g}from"./Card.vue_vue_type_script_setup_true_lang-DFKRuGmr.js";import{_ as y}from"./CardContent.vue_vue_type_script_setup_true_lang-Xltpq-ge.js";import{_ as v}from"./CardHeader.vue_vue_type_script_setup_true_lang-DfyxhswC.js";import{_ as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-BlYHS2HI.js";import{u as O}from"./usePagination-2eLEuHuE.js";import{T as Q}from"./trending-up-MndDfiGd.js";import{U as R}from"./users-CtMQPE_5.js";import{c as W}from"./createLucideIcon-Cxns02P7.js";import"./Primitive-DzJzFL7l.js";import"./useForwardExpose-CDTa1s8D.js";import"./usePrimitiveElement-CGXoSR73.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-DKE0KELH.js";import"./RovingFocusGroup-DOcz2L7-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-hb5zdG9_.js";import"./VisuallyHidden-C8uwcRnc.js";import"./index-CYQTJ8jh.js";import"./DialogTitle-CbE85AY6.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-D2-Ic_NX.js";import"./shield-WBi95os_.js";import"./file-text-BGDH-V6V.js";import"./chevron-right-K-pnYNJJ.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=W("ActivityIcon",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),Y={class:"py-12"},Z={class:"w-full sm:px-6 lg:px-8"},tt={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},et={class:"p-6 text-gray-900 dark:text-gray-100"},st={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},at={class:"text-2xl font-bold text-green-600"},rt={class:"text-2xl font-bold"},lt={class:"text-2xl font-bold"},ot={class:"text-2xl font-bold"},dt={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},it=["value"],nt={class:"overflow-x-auto"},ut={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},mt={class:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700"},pt={class:"px-6 py-4 whitespace-nowrap text-sm"},xt={class:"px-6 py-4"},ct={class:"px-6 py-4 whitespace-nowrap"},ft={class:"text-sm font-medium"},_t={class:"text-xs text-gray-500"},gt={class:"px-6 py-4 whitespace-nowrap"},yt={class:"text-sm font-semibold"},vt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"text-sm font-semibold text-green-600"},ht={class:"px-6 py-4 whitespace-nowrap"},kt={class:"text-sm"},wt={class:"px-6 py-4 whitespace-nowrap"},Vt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},Ct={key:0,class:"mt-6 flex justify-center"},Dt={class:"inline-flex rounded-md shadow-sm -space-x-px"},Zt=N({__name:"Index",props:{transactions:{},creators:{},stats:{},monthlyEarnings:{},filters:{}},setup(T){const i=T,{translatePaginationLabel:U}=O(),x=n(i.filters.search||""),c=n(i.filters.creator_id||""),V=n(i.filters.amount_min||""),C=n(i.filters.amount_max||""),f=n(i.filters.date_from||""),D=n(i.filters.date_to||""),F=n(i.filters.sort_by||"created_at"),$=n(i.filters.sort_direction||"desc"),L=n(i.filters.per_page||"20"),_=()=>{q.get("/admin/platform-transactions",{search:x.value,creator_id:c.value,amount_min:V.value,amount_max:C.value,date_from:f.value,date_to:D.value,sort_by:F.value,sort_direction:$.value,per_page:L.value},{preserveState:!0,preserveScroll:!0})},B=()=>{x.value="",c.value="",V.value="",C.value="",f.value="",D.value="",F.value="created_at",$.value="desc",L.value="20",_()},I=d=>new Date(d).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return(d,e)=>(u(),j(J,null,{default:l(()=>[r(s(z),{title:"平台收益"}),t("div",Y,[t("div",Z,[t("div",tt,[t("div",et,[e[14]||(e[14]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-semibold"},"平台收益"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," 查看和分析平台从付费内容中获得的佣金收益 ")],-1)),t("div",st,[r(s(g),null,{default:l(()=>[r(s(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[r(s(b),{class:"text-sm font-medium"},{default:l(()=>e[3]||(e[3]=[p("总收益",-1)])),_:1,__:[3]}),r(s(G),{class:"h-4 w-4 text-green-600"})]),_:1}),r(s(y),null,{default:l(()=>[t("div",at,"¥"+o(d.stats.total_earnings?.toFixed(2)||"0.00"),1),e[4]||(e[4]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"平台佣金总额",-1))]),_:1,__:[4]})]),_:1}),r(s(g),null,{default:l(()=>[r(s(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[r(s(b),{class:"text-sm font-medium"},{default:l(()=>e[5]||(e[5]=[p("交易总额",-1)])),_:1,__:[5]}),r(s(Q),{class:"h-4 w-4 text-blue-600"})]),_:1}),r(s(y),null,{default:l(()=>[t("div",rt,"¥"+o(d.stats.total_revenue?.toFixed(2)||"0.00"),1),e[6]||(e[6]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"总交易金额",-1))]),_:1,__:[6]})]),_:1}),r(s(g),null,{default:l(()=>[r(s(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[r(s(b),{class:"text-sm font-medium"},{default:l(()=>e[7]||(e[7]=[p("创作者收益",-1)])),_:1,__:[7]}),r(s(R),{class:"h-4 w-4 text-purple-600"})]),_:1}),r(s(y),null,{default:l(()=>[t("div",lt,"¥"+o(d.stats.total_creator_payments?.toFixed(2)||"0.00"),1),e[8]||(e[8]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"支付给创作者",-1))]),_:1,__:[8]})]),_:1}),r(s(g),null,{default:l(()=>[r(s(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[r(s(b),{class:"text-sm font-medium"},{default:l(()=>e[9]||(e[9]=[p("交易数量",-1)])),_:1,__:[9]}),r(s(X),{class:"h-4 w-4 text-orange-600"})]),_:1}),r(s(y),null,{default:l(()=>[t("div",ot,o(d.stats.total_transactions||0),1),e[10]||(e[10]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"笔交易",-1))]),_:1,__:[10]})]),_:1})]),t("div",dt,[t("div",null,[r(s(S),{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),placeholder:"搜索创作者或帖子...",onInput:_},null,8,["modelValue"])]),t("div",null,[H(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>c.value=a),onChange:_,class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white"},[e[11]||(e[11]=t("option",{value:""},"全部创作者",-1)),(u(!0),m(k,null,w(d.creators,a=>(u(),m("option",{key:a.id,value:a.id},o(a.name)+" (@"+o(a.login_name)+") ",9,it))),128))],544),[[P,c.value]])]),t("div",null,[r(s(S),{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=a=>f.value=a),type:"date",placeholder:"开始日期",onChange:_},null,8,["modelValue"])]),t("div",null,[r(s(K),{variant:"outline",onClick:B,class:"w-full"},{default:l(()=>e[12]||(e[12]=[p(" 清除筛选 ",-1)])),_:1,__:[12]})])]),t("div",nt,[t("table",ut,[e[13]||(e[13]=t("thead",{class:"bg-gray-50 dark:bg-gray-900"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"时间"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"帖子"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"创作者"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"交易总额"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"平台佣金"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"创作者所得"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"佣金比例")])],-1)),t("tbody",mt,[(u(!0),m(k,null,w(d.transactions.data,a=>(u(),m("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",pt,o(I(a.created_at)),1),t("td",xt,[r(s(M),{href:`/posts/${a.post.slug}`,class:"text-blue-600 hover:text-blue-800 dark:text-blue-400 text-sm"},{default:l(()=>[p(o(a.post.title),1)]),_:2},1032,["href"])]),t("td",ct,[t("div",ft,o(a.creator.name),1),t("div",_t,"@"+o(a.creator.login_name),1)]),t("td",gt,[t("span",yt,"¥"+o(a.total_transaction),1)]),t("td",vt,[t("span",bt,"¥"+o(a.amount),1)]),t("td",ht,[t("span",kt,"¥"+o(a.creator_amount),1)]),t("td",wt,[t("span",Vt,o(a.percentage)+"% ",1)])]))),128))])])]),d.transactions.last_page>1?(u(),m("div",Ct,[t("nav",Dt,[(u(!0),m(k,null,w(d.transactions.links,(a,h)=>(u(),j(s(M),{key:h,href:a.url||"#",class:E(["px-3 py-2 text-sm border",a.active?"bg-blue-50 border-blue-500 text-blue-600 dark:bg-blue-900 dark:text-blue-200":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400",h===0?"rounded-l-md":"",h===d.transactions.links.length-1?"rounded-r-md":""]),innerHTML:s(U)(a.label),disabled:!a.url},null,8,["href","class","innerHTML","disabled"]))),128))])])):A("",!0)])])])])]),_:1}))}});export{Zt as default};
