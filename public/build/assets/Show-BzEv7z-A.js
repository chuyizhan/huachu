import{d as J,r as x,G as A,c as p,o as l,w as n,a as r,b as e,i as u,j as d,e as o,h as Q,m as D,f as c,t as a,n as g,F as L,x as U,g as W,l as E}from"./app-CFoezxJ4.js";import{_ as Y}from"./WebLayout.vue_vue_type_script_setup_true_lang-Bhja6Hbk.js";import{_ as v}from"./index-DoPs8jux.js";import{_ as w,a as y}from"./CardContent.vue_vue_type_script_setup_true_lang-CyIBYXU4.js";import{_ as B}from"./index-gp64BXSy.js";import{_ as N,b as V,a as z,C as I,X as Z}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-CnjjDV1A.js";import{A as ee}from"./arrow-left-CzwzXk5j.js";import{M as te}from"./map-pin-cR2TUQWC.js";import{C as se}from"./calendar-DlgX_eD1.js";import{U as oe}from"./user-plus-BdTwp2YN.js";import{U as ae}from"./user-minus-8Z3vcwIt.js";import{S as re}from"./star-DITBatSg.js";import{C as le}from"./check-u1K-5Gsi.js";import{c as ie}from"./createLucideIcon-De0fyrFm.js";import{E as ne}from"./eye-BtC8NJgZ.js";import{H as ce}from"./heart-CKpqwPG1.js";import{M as de}from"./message-square-C9Z2hg8M.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-n3ZcxheT.js";import"./user-C-yxyvJH.js";import"./Primitive-Ctm7kvjE.js";import"./index-hQTy9Ctr.js";import"./useForwardExpose-RpB-lHY-.js";import"./usePrimitiveElement-DTLZ93y9.js";import"./RovingFocusGroup-BGPAxTtN.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=ie("BookOpenIcon",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),fe={class:"min-h-screen py-8"},me={class:"max-w-6xl mx-auto px-4"},pe={class:"flex items-center mb-8"},be={class:"flex flex-col md:flex-row gap-8"},_e={class:"flex-shrink-0"},xe={class:"flex-1 text-center md:text-left"},ge={class:"flex flex-col md:flex-row md:items-start md:justify-between mb-4"},ve={class:"text-3xl font-bold text-white mb-2 flex items-center justify-center md:justify-start gap-3"},he={class:"text-[#ff6e02] font-medium mb-2"},we={class:"flex items-center justify-center md:justify-start text-[#999999] text-sm gap-4 mb-4"},ye={key:0,class:"flex items-center gap-1"},ke={class:"flex items-center gap-1"},Se={key:0,class:"mt-4 md:mt-0"},Ce={key:0,class:"text-[#cccccc] mb-6 max-w-2xl"},je={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},Be={class:"text-center p-4 bg-[#1f2937] rounded-lg"},Fe={class:"text-2xl font-bold text-white"},$e={class:"text-center p-4 bg-[#1f2937] rounded-lg"},Me={class:"text-2xl font-bold text-white"},Pe={class:"text-center p-4 bg-[#1f2937] rounded-lg"},Ae={class:"text-2xl font-bold text-white"},De={key:0,class:"text-center p-4 bg-[#1f2937] rounded-lg"},Le={class:"text-2xl font-bold text-white flex items-center justify-center gap-1"},Ue={key:1,class:"text-center md:text-left"},Ee=["href"],Ne={key:0,class:"mb-8"},Ve={class:"text-2xl font-bold text-white mb-6 flex items-center gap-3"},ze={key:0,class:"mb-6"},Ie={class:"flex items-center gap-3"},Te={class:"text-sm text-green-300"},qe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Oe={class:"text-center mb-4"},He={class:"text-xl font-bold text-white mb-2"},Xe={class:"flex items-baseline justify-center gap-2 mb-1"},Ge={class:"text-3xl font-bold text-[#ff6e02]"},Ke={class:"text-sm text-[#999999]"},Re={key:0,class:"text-sm text-[#cccccc] text-center mb-4"},Je={class:"mb-8"},Qe={class:"text-2xl font-bold text-white mb-6 flex items-center gap-3"},We={key:0,class:"text-center py-16"},Ye={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ze={key:0,class:"aspect-video overflow-hidden"},et=["src","alt"],tt={class:"flex items-center justify-between mb-3"},st={class:"flex items-center gap-2"},ot={class:"text-lg"},at={class:"text-lg font-semibold text-white hover:text-[#ff6e02] transition-colors mb-3 line-clamp-2"},rt={key:0,class:"text-[#999999] text-sm mb-4 line-clamp-3"},lt={class:"flex items-center gap-2 mb-4"},it={class:"text-sm text-[#999999]"},nt={class:"flex items-center justify-between text-sm text-[#999999] pt-4 border-t border-[#4B5563]"},ct={class:"flex items-center gap-4"},dt={class:"flex items-center gap-1"},ut={class:"flex items-center gap-1"},ft={class:"flex items-center gap-1"},mt={class:"text-xs"},pt={key:2,class:"mt-12 flex justify-center"},bt={class:"text-[#999999] text-sm"},_t={key:0},xt={class:"flex justify-between items-start mb-6"},gt={class:"space-y-4 mb-6"},vt={class:"flex items-center gap-3 p-3 bg-[#1f2937] rounded-lg"},ht={class:"text-white font-medium"},wt={class:"text-sm text-[#999999]"},yt={class:"p-4 bg-[#1f2937] rounded-lg"},kt={class:"flex justify-between items-center mb-2"},St={class:"text-white font-medium"},Ct={class:"flex justify-between items-center mb-2"},jt={class:"text-white font-medium"},Bt={class:"flex justify-between items-center text-lg border-t border-[#4B5563] pt-3 mt-3"},Ft={class:"flex items-baseline gap-1"},$t={class:"text-2xl font-bold text-[#ff6e02]"},Mt={class:"flex justify-between items-center"},Pt={class:"flex items-baseline gap-1"},At={class:"text-xs text-gray-400 mt-1"},Dt={key:0,class:"p-3 bg-red-900/20 border border-red-500/30 rounded-lg"},Lt={class:"flex gap-3"},Ut=J({__name:"Show",props:{creator:{},posts:{},isFollowing:{type:Boolean},canFollow:{type:Boolean},subscriptionPlans:{},hasActiveSubscription:{type:Boolean},activeSubscription:{},userCredits:{}},setup(q){const m=q,k=x(m.isFollowing),F=x(m.creator.followers_count||0),h=x(!1),C=x(!1),f=x(null),b=x(!1),_=A(()=>typeof m.userCredits=="number"?m.userCredits:parseFloat(String(m.userCredits))||0);console.log("Creator Show - User Credits (raw):",m.userCredits,typeof m.userCredits),console.log("Creator Show - User Credits (parsed):",_.value),console.log("Has Active Subscription:",m.hasActiveSubscription),console.log("Subscription Plans:",m.subscriptionPlans);const O={discussion:"è®¨è®º",tutorial:"æ•™ç¨‹",showcase:"å±•ç¤º",question:"é—®é¢˜"},H={discussion:"ğŸ’¬",tutorial:"ğŸ“–",showcase:"ğŸ¨",question:"â“"},j=A(()=>{switch(m.creator.verification_status){case"verified":return{text:"å·²è®¤è¯",class:"bg-green-500/20 text-green-400 border-green-500/30"};case"premium":return{text:"VIPåˆ›ä½œè€…",class:"bg-[#ff6e02]/20 text-[#ff6e02] border-[#ff6e02]/30"};case"expert":return{text:"ä¸“å®¶",class:"bg-purple-500/20 text-purple-400 border-purple-500/30"};default:return null}});function $(t){return new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}function M(t){return t.split(" ").map(s=>s[0]).join("").toUpperCase()}const X=async()=>{if(!(!m.canFollow||h.value)){h.value=!0;try{const t=await fetch(`/creators/${m.creator.id}/follow`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},credentials:"same-origin"}),s=await t.json();t.ok&&s.success?(k.value=s.following,F.value=s.followers_count):(console.error("Follow toggle failed:",s.message||"Unknown error"),alert(s.message||"æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•"))}catch(t){console.error("Error toggling follow:",t),alert("ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•")}finally{h.value=!1}}},G=t=>{f.value=t,C.value=!0},S=()=>{C.value=!1,f.value=null},K=()=>{if(!f.value||b.value){console.log("Cannot subscribe:",{selectedPlan:f.value,isSubscribing:b.value});return}console.log("Starting subscription for plan:",f.value.id),b.value=!0,E.post(`/subscriptions/plans/${f.value.id}/subscribe`,{},{preserveScroll:!0,onSuccess:t=>{console.log("Subscription successful",t),alert("è®¢é˜…æˆåŠŸï¼"),S(),E.reload({only:["subscriptionPlans","hasActiveSubscription","activeSubscription","userCredits"]})},onError:t=>{console.error("Subscription error:",t);const s=typeof t=="string"?t:Object.values(t).flat().join(`
`);alert(s||"è®¢é˜…å¤±è´¥ï¼Œè¯·é‡è¯•")},onFinish:()=>{console.log("Subscription request finished"),b.value=!1}})},P=t=>t===7?"1å‘¨":t===30?"1ä¸ªæœˆ":t===90?"3ä¸ªæœˆ":t===365?"1å¹´":`${t}å¤©`,R=t=>new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"});return(t,s)=>(l(),p(Y,null,{default:n(()=>[r(o(Q),{title:`${t.creator.display_name} - åˆ›ä½œè€…æ¡£æ¡ˆ`},null,8,["title"]),e("div",fe,[e("div",me,[e("div",pe,[r(o(D),{href:"/creators",class:"mr-4"},{default:n(()=>[r(o(v),{variant:"ghost",size:"sm",class:"text-white hover:text-[#ff6e02]"},{default:n(()=>[r(o(ee),{class:"h-4 w-4 mr-2"}),s[0]||(s[0]=c(" è¿”å›åˆ›ä½œè€… ",-1))]),_:1,__:[0]})]),_:1})]),r(o(w),{class:"bg-[#374151] border-[#4B5563] mb-8"},{default:n(()=>[r(o(y),{class:"p-8"},{default:n(()=>[e("div",be,[e("div",_e,[r(o(N),{class:"h-32 w-32 mx-auto md:mx-0"},{default:n(()=>[t.creator.user.avatar?(l(),p(o(V),{key:0,src:t.creator.user.avatar,alt:t.creator.display_name},null,8,["src","alt"])):d("",!0),r(o(z),{class:"bg-[#ff6e02] text-white text-2xl font-bold"},{default:n(()=>[c(a(M(t.creator.display_name)),1)]),_:1})]),_:1})]),e("div",xe,[e("div",ge,[e("div",null,[e("h1",ve,[c(a(t.creator.display_name)+" ",1),j.value?(l(),p(o(B),{key:0,class:g(j.value.class)},{default:n(()=>[c(a(j.value.text),1)]),_:1},8,["class"])):d("",!0)]),e("p",he,a(t.creator.specialty),1),e("div",we,[t.creator.location?(l(),u("span",ye,[r(o(te),{class:"h-4 w-4"}),c(" "+a(t.creator.location),1)])):d("",!0),e("span",ke,[r(o(se),{class:"h-4 w-4"}),c(" "+a($(t.creator.joined_at||t.creator.user.created_at))+" åŠ å…¥ ",1)])])]),t.canFollow?(l(),u("div",Se,[r(o(v),{onClick:X,disabled:h.value,class:g(k.value?"bg-transparent border-[#ff6e02] text-[#ff6e02] hover:bg-[#ff6e02] hover:text-white":"bg-[#ff6e02] hover:bg-[#e55a00] text-white")},{default:n(()=>[k.value?(l(),p(o(ae),{key:1,class:"h-4 w-4 mr-2"})):(l(),p(o(oe),{key:0,class:"h-4 w-4 mr-2"})),c(" "+a(h.value?"å¤„ç†ä¸­...":k.value?"å–æ¶ˆå…³æ³¨":"å…³æ³¨"),1)]),_:1},8,["disabled","class"])])):d("",!0)]),t.creator.bio?(l(),u("p",Ce,a(t.creator.bio),1)):d("",!0),e("div",je,[e("div",Be,[e("div",Fe,a(F.value),1),s[1]||(s[1]=e("div",{class:"text-sm text-[#999999]"},"ç²‰ä¸",-1))]),e("div",$e,[e("div",Me,a(t.creator.posts_count||0),1),s[2]||(s[2]=e("div",{class:"text-sm text-[#999999]"},"å¸–å­",-1))]),e("div",Pe,[e("div",Ae,a(t.creator.likes_received||0),1),s[3]||(s[3]=e("div",{class:"text-sm text-[#999999]"},"è·èµ",-1))]),t.creator.rating?(l(),u("div",De,[e("div",Le,[c(a(t.creator.rating)+" ",1),r(o(re),{class:"h-5 w-5 text-yellow-400 fill-current"})]),s[4]||(s[4]=e("div",{class:"text-sm text-[#999999]"},"è¯„åˆ†",-1))])):d("",!0)]),t.creator.website?(l(),u("div",Ue,[e("a",{href:t.creator.website,target:"_blank",rel:"noopener noreferrer",class:"text-[#ff6e02] hover:text-[#e55a00] underline"},a(t.creator.website),9,Ee)])):d("",!0)])])]),_:1})]),_:1}),t.subscriptionPlans.length>0?(l(),u("div",Ne,[e("h2",Ve,[r(o(I),{class:"h-7 w-7 text-[#ff6e02]"}),s[5]||(s[5]=c(" è®¢é˜…è®¡åˆ’ ",-1))]),t.hasActiveSubscription&&t.activeSubscription?(l(),u("div",ze,[r(o(w),{class:"bg-green-900/20 border-green-500/30"},{default:n(()=>[r(o(y),{class:"p-4"},{default:n(()=>[e("div",Ie,[r(o(le),{class:"h-5 w-5 text-green-400"}),e("div",null,[s[6]||(s[6]=e("p",{class:"text-green-400 font-medium"},"å·²è®¢é˜…",-1)),e("p",Te," æœ‰æ•ˆæœŸè‡³ï¼š"+a(R(t.activeSubscription.expires_at)),1)])])]),_:1})]),_:1})])):d("",!0),e("div",qe,[(l(!0),u(L,null,U(t.subscriptionPlans,i=>(l(),p(o(w),{key:i.id,class:"bg-[#374151] border-[#4B5563] hover:border-[#ff6e02] transition-colors"},{default:n(()=>[r(o(y),{class:"p-6"},{default:n(()=>[e("div",Oe,[e("h3",He,a(i.name),1),e("div",Xe,[e("span",Ge,a(i.price),1),s[7]||(s[7]=e("span",{class:"text-[#999999]"},"é‡‘å¸",-1))]),e("p",Ke,a(P(i.duration_days)),1)]),i.description?(l(),u("p",Re,a(i.description),1)):d("",!0),t.hasActiveSubscription?(l(),p(o(v),{key:2,disabled:"",class:"w-full bg-gray-600 text-gray-400 cursor-not-allowed"},{default:n(()=>s[9]||(s[9]=[c(" å·²è®¢é˜… ",-1)])),_:1,__:[9]})):(l(),p(o(v),{key:1,onClick:Et=>G(i),class:"w-full bg-[#ff6e02] hover:bg-[#e55a00] text-white"},{default:n(()=>s[8]||(s[8]=[c(" ç«‹å³è®¢é˜… ",-1)])),_:2,__:[8]},1032,["onClick"]))]),_:2},1024)]),_:2},1024))),128))])])):d("",!0),e("div",Je,[e("h2",Qe,[r(o(T),{class:"h-7 w-7 text-[#ff6e02]"}),s[10]||(s[10]=c(" æœ€æ–°å¸–å­ ",-1))]),t.posts.data.length===0?(l(),u("div",We,[r(o(T),{class:"h-16 w-16 text-[#666666] mx-auto mb-6"}),s[11]||(s[11]=e("h3",{class:"text-xl font-medium text-white mb-4"},"æš‚æ— å‘å¸ƒå†…å®¹",-1)),s[12]||(s[12]=e("p",{class:"text-[#999999] max-w-md mx-auto"}," è¯¥åˆ›ä½œè€…è¿˜æ²¡æœ‰å‘å¸ƒä»»ä½•å†…å®¹ï¼Œè¯·ç¨åå†æ¥æŸ¥çœ‹ ",-1))])):(l(),u("div",Ye,[(l(!0),u(L,null,U(t.posts.data,i=>(l(),p(o(w),{key:i.id,class:"bg-[#374151] border-[#4B5563] hover:border-[#6B7280] transition-all duration-200 hover:scale-105 group overflow-hidden"},{default:n(()=>[i.images&&i.images.length>0?(l(),u("div",Ze,[e("img",{src:i.images[0],alt:i.title,class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"},null,8,et)])):d("",!0),r(o(y),{class:"p-6"},{default:n(()=>[e("div",tt,[e("div",st,[e("span",ot,a(H[i.type]),1),r(o(B),{class:"bg-[#ff6e02]/20 text-[#ff6e02] border-[#ff6e02]/30"},{default:n(()=>[c(a(O[i.type]),1)]),_:2},1024)]),i.is_featured?(l(),p(o(B),{key:0,class:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},{default:n(()=>s[13]||(s[13]=[c(" ç²¾é€‰ ",-1)])),_:1,__:[13]})):d("",!0)]),r(o(D),{href:`/posts/${i.slug}`},{default:n(()=>[e("h3",at,a(i.title),1)]),_:2},1032,["href"]),i.excerpt?(l(),u("p",rt,a(i.excerpt),1)):d("",!0),e("div",lt,[s[14]||(s[14]=e("div",{class:"w-3 h-3 rounded-full bg-[#ff6e02]"},null,-1)),e("span",it,a(i.category.name),1)]),e("div",nt,[e("div",ct,[e("span",dt,[r(o(ne),{class:"h-3 w-3"}),c(" "+a(i.view_count),1)]),e("span",ut,[r(o(ce),{class:"h-3 w-3"}),c(" "+a(i.like_count),1)]),e("span",ft,[r(o(de),{class:"h-3 w-3"}),c(" "+a(i.comment_count),1)])]),e("span",mt,a($(i.published_at||i.created_at)),1)])]),_:2},1024)]),_:2},1024))),128))])),t.posts.data.length>0?(l(),u("div",pt,[e("p",bt,[c(" æ˜¾ç¤º "+a(t.posts.data.length)+" ç¯‡å¸–å­ ",1),t.posts.meta?.total?(l(),u("span",_t," / å…± "+a(t.posts.meta.total)+" ç¯‡",1)):d("",!0)])])):d("",!0)])])]),C.value&&f.value?(l(),u("div",{key:0,class:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:W(S,["self"])},[r(o(w),{class:"bg-[#374151] border-[#4B5563] max-w-md w-full"},{default:n(()=>[r(o(y),{class:"p-6"},{default:n(()=>[e("div",xt,[s[15]||(s[15]=e("h3",{class:"text-2xl font-bold text-white"},"ç¡®è®¤è®¢é˜…",-1)),e("button",{onClick:S,class:"text-[#999999] hover:text-white transition-colors"},[r(o(Z),{class:"h-6 w-6"})])]),e("div",gt,[e("div",vt,[r(o(N),{class:"h-12 w-12"},{default:n(()=>[t.creator.user.avatar?(l(),p(o(V),{key:0,src:t.creator.user.avatar,alt:t.creator.display_name},null,8,["src","alt"])):d("",!0),r(o(z),{class:"bg-[#ff6e02] text-white"},{default:n(()=>[c(a(M(t.creator.display_name)),1)]),_:1})]),_:1}),e("div",null,[e("p",ht,a(t.creator.display_name),1),e("p",wt,a(t.creator.specialty),1)])]),e("div",yt,[e("div",kt,[s[16]||(s[16]=e("span",{class:"text-[#cccccc]"},"è®¢é˜…è®¡åˆ’",-1)),e("span",St,a(f.value.name),1)]),e("div",Ct,[s[17]||(s[17]=e("span",{class:"text-[#cccccc]"},"æ—¶é•¿",-1)),e("span",jt,a(P(f.value.duration_days)),1)]),e("div",Bt,[s[19]||(s[19]=e("span",{class:"text-white font-bold"},"æ”¯ä»˜é‡‘é¢",-1)),e("div",Ft,[e("span",$t,a(f.value.price),1),s[18]||(s[18]=e("span",{class:"text-[#999999]"},"é‡‘å¸",-1))])])]),e("div",{class:g(["p-3 rounded-lg",_.value>=f.value.price?"bg-green-900/20":"bg-red-900/20"])},[e("div",Mt,[e("span",{class:g(["text-sm",_.value>=f.value.price?"text-green-300":"text-red-300"])}," å½“å‰ä½™é¢ ",2),e("div",Pt,[e("span",{class:g(["font-bold",_.value>=f.value.price?"text-green-400":"text-red-400"])},a(_.value.toFixed(2)),3),e("span",{class:g(["text-sm",_.value>=f.value.price?"text-green-300":"text-red-300"])}," é‡‘å¸ ",2)])]),e("div",At," éœ€è¦: "+a(f.value.price)+" é‡‘å¸ ",1)],2),_.value<f.value.price?(l(),u("div",Dt,s[20]||(s[20]=[e("p",{class:"text-red-400 text-sm"}," ä½™é¢ä¸è¶³ï¼Œè¯·å…ˆå……å€¼ ",-1)]))):d("",!0)]),e("div",Lt,[r(o(v),{onClick:K,disabled:b.value||_.value<f.value.price,class:"flex-1 bg-[#ff6e02] hover:bg-[#e55a00] text-white disabled:bg-gray-600 disabled:cursor-not-allowed"},{default:n(()=>[b.value?d("",!0):(l(),p(o(I),{key:0,class:"h-4 w-4 mr-2"})),c(" "+a(b.value?"å¤„ç†ä¸­...":"ç¡®è®¤è®¢é˜…"),1)]),_:1},8,["disabled"]),r(o(v),{onClick:S,variant:"outline",class:"flex-1 border-[#4B5563] text-white hover:bg-[#4B5563]",disabled:b.value},{default:n(()=>s[21]||(s[21]=[c(" å–æ¶ˆ ",-1)])),_:1,__:[21]},8,["disabled"])])]),_:1})]),_:1})])):d("",!0)]),_:1}))}}),ds=ue(Ut,[["__scopeId","data-v-22b063a6"]]);export{ds as default};
