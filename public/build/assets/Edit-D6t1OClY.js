import{d as M,u as q,l as B,c as F,o as n,w as d,a as r,b as o,e,h as z,f as a,g as N,i as u,j as c,n as f,t as m,m as L,F as S,s as j,k as b,v,x as A,r as D}from"./app-BmcoeQA4.js";import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-BQbbeRFG.js";import{_ as y}from"./index-CFC5wXei.js";import{_}from"./Input.vue_vue_type_script_setup_true_lang-DfvqelgK.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-BkNpm8KA.js";import{_ as K}from"./Textarea.vue_vue_type_script_setup_true_lang-D-HvjttW.js";import{_ as I,a as R}from"./CardContent.vue_vue_type_script_setup_true_lang-CgRrs4kq.js";import{_ as T}from"./CardDescription.vue_vue_type_script_setup_true_lang-BdxYYPJK.js";import{_ as G}from"./CardHeader.vue_vue_type_script_setup_true_lang-BPTo7i4-.js";import{_ as H}from"./CardTitle.vue_vue_type_script_setup_true_lang-Ck8XMApb.js";import{A as J}from"./arrow-left-Bg3HaHsM.js";import"./Primitive-CJMsgW3h.js";import"./useForwardExpose-DyUhryzs.js";import"./usePrimitiveElement-CsTwf72z.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-CBMBmewU.js";import"./createLucideIcon-CcHLeGQW.js";import"./RovingFocusGroup-CfKgLdVS.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./VisuallyHidden-QO2Ov0b-.js";import"./index-BDSAGe1C.js";import"./DialogTitle-CqtxqFsX.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-D81Bq4kd.js";import"./shield-BdfH3BaU.js";import"./file-text-Bm7yGjU-.js";import"./trending-up-qhu8Urnx.js";import"./book-open-zWFfStMF.js";import"./chevron-right-DbiU3EUz.js";const O={class:"py-12"},P={class:"w-full sm:px-6 lg:px-8"},Q={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},W={class:"p-6 text-gray-900 dark:text-gray-100"},X={class:"mb-6 flex items-center gap-4"},Y={class:"space-y-4"},Z={class:"grid grid-cols-2 gap-4"},h={class:"space-y-2"},ee={key:0,class:"text-sm text-red-500"},se={class:"space-y-2"},te={key:0,class:"text-sm text-red-500"},oe={class:"space-y-2"},re={key:0,class:"text-sm text-red-500"},le={class:"space-y-2"},de={key:0,class:"text-sm text-red-500"},ae={class:"space-y-2"},ie={key:0,class:"text-sm text-red-500"},ne={class:"space-y-4 pt-6 border-t"},pe={class:"grid grid-cols-2 gap-4"},ue={class:"space-y-2"},me={key:0,class:"text-sm text-red-500"},_e={class:"space-y-2"},ce={key:0,class:"text-sm text-red-500"},fe={class:"space-y-4 pt-6 border-t"},ge={class:"space-y-2"},ye={class:"flex gap-2"},xe={key:0,class:"mt-2 space-y-2"},be={class:"space-y-2"},ve={key:0,class:"text-sm text-red-500"},Ve={class:"flex items-center space-x-2"},ke={class:"flex items-center space-x-2"},we={class:"space-y-4 pt-6 border-t"},Ue={class:"grid grid-cols-2 gap-4"},$e={class:"space-y-2"},Ce={class:"flex gap-2"},Me={key:0,class:"text-sm text-red-500"},qe={class:"space-y-2"},Be={class:"flex gap-2"},Fe={key:0,class:"text-sm text-red-500"},ze={class:"p-4 bg-gray-50 dark:bg-gray-900 rounded"},Ne={class:"space-y-4 pt-6 border-t"},Le={class:"flex items-center space-x-2"},Se={class:"flex gap-4 pt-6"},ps=M({__name:"Edit",props:{plan:{}},setup(U){const i=U,t=q({level:i.plan.level,name:i.plan.name,slug:i.plan.slug,description:i.plan.description,price:i.plan.price,period_days:i.plan.period_days,features:i.plan.features||[],max_premium_posts:i.plan.max_premium_posts,can_create_premium_content:i.plan.can_create_premium_content,priority_support:i.plan.priority_support,badge_color:i.plan.badge_color,badge_text_color:i.plan.badge_text_color,sort_order:i.plan.sort_order,is_active:i.plan.is_active}),g=B(""),V=()=>{g.value.trim()&&(t.features.push(g.value.trim()),g.value="")},$=x=>{t.features.splice(x,1)},C=()=>{t.put(`/admin/plans/${i.plan.id}`)},k=()=>{D.visit("/admin/plans")};return(x,s)=>(n(),F(E,null,{default:d(()=>[r(e(z),{title:`编辑套餐 - ${x.plan.name}`},null,8,["title"]),o("div",O,[o("div",P,[o("div",Q,[o("div",W,[o("div",X,[r(e(y),{variant:"outline",size:"icon",onClick:k},{default:d(()=>[r(e(J),{class:"h-4 w-4"})]),_:1}),s[16]||(s[16]=o("h1",{class:"text-2xl font-semibold"},"编辑套餐",-1))]),r(e(I),null,{default:d(()=>[r(e(G),null,{default:d(()=>[r(e(H),null,{default:d(()=>s[17]||(s[17]=[a("套餐信息",-1)])),_:1,__:[17]}),r(e(T),null,{default:d(()=>s[18]||(s[18]=[a("填写套餐的详细信息",-1)])),_:1,__:[18]})]),_:1}),r(e(R),null,{default:d(()=>[o("form",{onSubmit:N(C,["prevent"]),class:"space-y-6"},[o("div",Y,[s[25]||(s[25]=o("h3",{class:"text-lg font-medium"},"基本信息",-1)),o("div",Z,[o("div",h,[r(e(p),{for:"level"},{default:d(()=>s[19]||(s[19]=[a("等级 *",-1)])),_:1,__:[19]}),r(e(_),{id:"level",modelValue:e(t).level,"onUpdate:modelValue":s[0]||(s[0]=l=>e(t).level=l),modelModifiers:{number:!0},type:"number",required:"",class:f({"border-red-500":e(t).errors.level})},null,8,["modelValue","class"]),e(t).errors.level?(n(),u("p",ee,m(e(t).errors.level),1)):c("",!0)]),o("div",se,[r(e(p),{for:"sort_order"},{default:d(()=>s[20]||(s[20]=[a("排序 *",-1)])),_:1,__:[20]}),r(e(_),{id:"sort_order",modelValue:e(t).sort_order,"onUpdate:modelValue":s[1]||(s[1]=l=>e(t).sort_order=l),modelModifiers:{number:!0},type:"number",required:"",class:f({"border-red-500":e(t).errors.sort_order})},null,8,["modelValue","class"]),e(t).errors.sort_order?(n(),u("p",te,m(e(t).errors.sort_order),1)):c("",!0)])]),o("div",oe,[r(e(p),{for:"name"},{default:d(()=>s[21]||(s[21]=[a("套餐名称 *",-1)])),_:1,__:[21]}),r(e(_),{id:"name",modelValue:e(t).name,"onUpdate:modelValue":s[2]||(s[2]=l=>e(t).name=l),required:"",class:f({"border-red-500":e(t).errors.name})},null,8,["modelValue","class"]),e(t).errors.name?(n(),u("p",re,m(e(t).errors.name),1)):c("",!0)]),o("div",le,[r(e(p),{for:"slug"},{default:d(()=>s[22]||(s[22]=[a("别名 *",-1)])),_:1,__:[22]}),r(e(_),{id:"slug",modelValue:e(t).slug,"onUpdate:modelValue":s[3]||(s[3]=l=>e(t).slug=l),required:"",class:f({"border-red-500":e(t).errors.slug})},null,8,["modelValue","class"]),s[23]||(s[23]=o("p",{class:"text-sm text-gray-500"},"用于URL的唯一标识",-1)),e(t).errors.slug?(n(),u("p",de,m(e(t).errors.slug),1)):c("",!0)]),o("div",ae,[r(e(p),{for:"description"},{default:d(()=>s[24]||(s[24]=[a("描述",-1)])),_:1,__:[24]}),r(K,{id:"description",modelValue:e(t).description,"onUpdate:modelValue":s[4]||(s[4]=l=>e(t).description=l),rows:"3",class:f({"border-red-500":e(t).errors.description})},null,8,["modelValue","class"]),e(t).errors.description?(n(),u("p",ie,m(e(t).errors.description),1)):c("",!0)])]),o("div",ne,[s[28]||(s[28]=o("h3",{class:"text-lg font-medium"},"价格与周期",-1)),o("div",pe,[o("div",ue,[r(e(p),{for:"price"},{default:d(()=>s[26]||(s[26]=[a("价格 (¥) *",-1)])),_:1,__:[26]}),r(e(_),{id:"price",modelValue:e(t).price,"onUpdate:modelValue":s[5]||(s[5]=l=>e(t).price=l),modelModifiers:{number:!0},type:"number",step:"0.01",required:"",class:f({"border-red-500":e(t).errors.price})},null,8,["modelValue","class"]),e(t).errors.price?(n(),u("p",me,m(e(t).errors.price),1)):c("",!0)]),o("div",_e,[r(e(p),{for:"period_days"},{default:d(()=>s[27]||(s[27]=[a("有效期 (天) *",-1)])),_:1,__:[27]}),r(e(_),{id:"period_days",modelValue:e(t).period_days,"onUpdate:modelValue":s[6]||(s[6]=l=>e(t).period_days=l),modelModifiers:{number:!0},type:"number",required:"",class:f({"border-red-500":e(t).errors.period_days})},null,8,["modelValue","class"]),e(t).errors.period_days?(n(),u("p",ce,m(e(t).errors.period_days),1)):c("",!0)])])]),o("div",fe,[s[36]||(s[36]=o("h3",{class:"text-lg font-medium"},"功能特性",-1)),o("div",ge,[r(e(p),null,{default:d(()=>s[29]||(s[29]=[a("功能列表",-1)])),_:1,__:[29]}),o("div",ye,[r(e(_),{modelValue:g.value,"onUpdate:modelValue":s[7]||(s[7]=l=>g.value=l),placeholder:"输入功能特性...",onKeyup:L(V,["enter"])},null,8,["modelValue"]),r(e(y),{type:"button",onClick:V},{default:d(()=>s[30]||(s[30]=[a("添加",-1)])),_:1,__:[30]})]),e(t).features.length>0?(n(),u("div",xe,[(n(!0),u(S,null,j(e(t).features,(l,w)=>(n(),u("div",{key:w,class:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-900 rounded"},[o("span",null,m(l),1),r(e(y),{type:"button",variant:"ghost",size:"sm",onClick:je=>$(w)},{default:d(()=>s[31]||(s[31]=[a("删除",-1)])),_:2,__:[31]},1032,["onClick"])]))),128))])):c("",!0)]),o("div",be,[r(e(p),{for:"max_premium_posts"},{default:d(()=>s[32]||(s[32]=[a("最大付费帖子数",-1)])),_:1,__:[32]}),r(e(_),{id:"max_premium_posts",modelValue:e(t).max_premium_posts,"onUpdate:modelValue":s[8]||(s[8]=l=>e(t).max_premium_posts=l),modelModifiers:{number:!0},type:"number",placeholder:"留空表示无限制",class:f({"border-red-500":e(t).errors.max_premium_posts})},null,8,["modelValue","class"]),s[33]||(s[33]=o("p",{class:"text-sm text-gray-500"},"留空表示无限制",-1)),e(t).errors.max_premium_posts?(n(),u("p",ve,m(e(t).errors.max_premium_posts),1)):c("",!0)]),o("div",Ve,[b(o("input",{id:"can_create_premium_content","onUpdate:modelValue":s[9]||(s[9]=l=>e(t).can_create_premium_content=l),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded"},null,512),[[v,e(t).can_create_premium_content]]),r(e(p),{for:"can_create_premium_content",class:"cursor-pointer"},{default:d(()=>s[34]||(s[34]=[a("允许创建付费内容",-1)])),_:1,__:[34]})]),o("div",ke,[b(o("input",{id:"priority_support","onUpdate:modelValue":s[10]||(s[10]=l=>e(t).priority_support=l),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded"},null,512),[[v,e(t).priority_support]]),r(e(p),{for:"priority_support",class:"cursor-pointer"},{default:d(()=>s[35]||(s[35]=[a("优先客服支持",-1)])),_:1,__:[35]})])]),o("div",we,[s[40]||(s[40]=o("h3",{class:"text-lg font-medium"},"徽章设置",-1)),o("div",Ue,[o("div",$e,[r(e(p),{for:"badge_color"},{default:d(()=>s[37]||(s[37]=[a("徽章颜色 *",-1)])),_:1,__:[37]}),o("div",Ce,[r(e(_),{id:"badge_color",modelValue:e(t).badge_color,"onUpdate:modelValue":s[11]||(s[11]=l=>e(t).badge_color=l),type:"color",class:"w-20"},null,8,["modelValue"]),r(e(_),{modelValue:e(t).badge_color,"onUpdate:modelValue":s[12]||(s[12]=l=>e(t).badge_color=l)},null,8,["modelValue"])]),e(t).errors.badge_color?(n(),u("p",Me,m(e(t).errors.badge_color),1)):c("",!0)]),o("div",qe,[r(e(p),{for:"badge_text_color"},{default:d(()=>s[38]||(s[38]=[a("文字颜色 *",-1)])),_:1,__:[38]}),o("div",Be,[r(e(_),{id:"badge_text_color",modelValue:e(t).badge_text_color,"onUpdate:modelValue":s[13]||(s[13]=l=>e(t).badge_text_color=l),type:"color",class:"w-20"},null,8,["modelValue"]),r(e(_),{modelValue:e(t).badge_text_color,"onUpdate:modelValue":s[14]||(s[14]=l=>e(t).badge_text_color=l)},null,8,["modelValue"])]),e(t).errors.badge_text_color?(n(),u("p",Fe,m(e(t).errors.badge_text_color),1)):c("",!0)])]),o("div",ze,[s[39]||(s[39]=o("p",{class:"text-sm mb-2"},"预览：",-1)),o("span",{class:"inline-block px-3 py-1 rounded text-sm font-medium",style:A({backgroundColor:e(t).badge_color,color:e(t).badge_text_color})},m(e(t).name||"套餐名称"),5)])]),o("div",Ne,[o("div",Le,[b(o("input",{id:"is_active","onUpdate:modelValue":s[15]||(s[15]=l=>e(t).is_active=l),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded"},null,512),[[v,e(t).is_active]]),r(e(p),{for:"is_active",class:"cursor-pointer"},{default:d(()=>s[41]||(s[41]=[a("启用套餐",-1)])),_:1,__:[41]})])]),o("div",Se,[r(e(y),{type:"submit",disabled:e(t).processing},{default:d(()=>[a(m(e(t).processing?"保存中...":"保存更改"),1)]),_:1},8,["disabled"]),r(e(y),{type:"button",variant:"outline",onClick:k},{default:d(()=>s[42]||(s[42]=[a(" 取消 ",-1)])),_:1,__:[42]})])],32)]),_:1})]),_:1})])])])])]),_:1}))}});export{ps as default};
