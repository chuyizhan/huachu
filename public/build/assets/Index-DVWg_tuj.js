import{d as I,r as n,c as L,o as u,w as l,a as r,b as t,e as a,h as N,i as p,j as z,f as m,t as o,k as A,F as k,s as w,q as H,y as M,n as E,l as q}from"./app-BYjOY0Z5.js";import{D as P,_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-BgaMw8-t.js";import{_ as J}from"./index-B0Z9ijHc.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-Cdiq9cW4.js";import{_ as g,a as y}from"./CardContent.vue_vue_type_script_setup_true_lang-ClRKjU30.js";import{_ as v}from"./CardHeader.vue_vue_type_script_setup_true_lang-BUdfgZRI.js";import{_ as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-DjA0uPno.js";import{T as K}from"./trending-up-DMQtCW4P.js";import{U as O}from"./users-Cnrp52cO.js";import{c as Q}from"./createLucideIcon-BRlLSjJy.js";import"./Primitive-BXv2y1pX.js";import"./useForwardExpose-BPmMMB0h.js";import"./usePrimitiveElement-ChtXebQp.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-CzR0VkrK.js";import"./RovingFocusGroup-DlrqyQuE.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./VisuallyHidden-DlTOL4yZ.js";import"./index-DyQgRmn4.js";import"./DialogTitle-C3RTehoI.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-BVg9almu.js";import"./shield-D4DqAO4A.js";import"./file-text-ZTpYjp-_.js";import"./chevron-right-CIuQMCal.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=Q("ActivityIcon",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),W={class:"py-12"},X={class:"w-full sm:px-6 lg:px-8"},Y={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},Z={class:"p-6 text-gray-900 dark:text-gray-100"},tt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},et={class:"text-2xl font-bold text-green-600"},st={class:"text-2xl font-bold"},at={class:"text-2xl font-bold"},rt={class:"text-2xl font-bold"},lt={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},ot=["value"],dt={class:"overflow-x-auto"},it={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},nt={class:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700"},ut={class:"px-6 py-4 whitespace-nowrap text-sm"},pt={class:"px-6 py-4"},mt={class:"px-6 py-4 whitespace-nowrap"},xt={class:"text-sm font-medium"},ct={class:"text-xs text-gray-500"},_t={class:"px-6 py-4 whitespace-nowrap"},ft={class:"text-sm font-semibold"},gt={class:"px-6 py-4 whitespace-nowrap"},yt={class:"text-sm font-semibold text-green-600"},vt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"text-sm"},ht={class:"px-6 py-4 whitespace-nowrap"},kt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},wt={key:0,class:"mt-6 flex justify-center"},Vt={class:"inline-flex rounded-md shadow-sm -space-x-px"},Rt=I({__name:"Index",props:{transactions:{},creators:{},stats:{},monthlyEarnings:{},filters:{}},setup(T){const i=T,x=n(i.filters.search||""),c=n(i.filters.creator_id||""),V=n(i.filters.amount_min||""),C=n(i.filters.amount_max||""),_=n(i.filters.date_from||""),D=n(i.filters.date_to||""),F=n(i.filters.sort_by||"created_at"),$=n(i.filters.sort_direction||"desc"),j=n(i.filters.per_page||"20"),f=()=>{q.get("/admin/platform-transactions",{search:x.value,creator_id:c.value,amount_min:V.value,amount_max:C.value,date_from:_.value,date_to:D.value,sort_by:F.value,sort_direction:$.value,per_page:j.value},{preserveState:!0,preserveScroll:!0})},U=()=>{x.value="",c.value="",V.value="",C.value="",_.value="",D.value="",F.value="created_at",$.value="desc",j.value="20",f()},B=d=>new Date(d).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return(d,e)=>(u(),L(G,null,{default:l(()=>[r(a(N),{title:"平台收益"}),t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[e[14]||(e[14]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-semibold"},"平台收益"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," 查看和分析平台从付费内容中获得的佣金收益 ")],-1)),t("div",tt,[r(a(g),null,{default:l(()=>[r(a(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[r(a(b),{class:"text-sm font-medium"},{default:l(()=>e[3]||(e[3]=[m("总收益",-1)])),_:1,__:[3]}),r(a(P),{class:"h-4 w-4 text-green-600"})]),_:1}),r(a(y),null,{default:l(()=>[t("div",et,"¥"+o(d.stats.total_earnings?.toFixed(2)||"0.00"),1),e[4]||(e[4]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"平台佣金总额",-1))]),_:1,__:[4]})]),_:1}),r(a(g),null,{default:l(()=>[r(a(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[r(a(b),{class:"text-sm font-medium"},{default:l(()=>e[5]||(e[5]=[m("交易总额",-1)])),_:1,__:[5]}),r(a(K),{class:"h-4 w-4 text-blue-600"})]),_:1}),r(a(y),null,{default:l(()=>[t("div",st,"¥"+o(d.stats.total_revenue?.toFixed(2)||"0.00"),1),e[6]||(e[6]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"总交易金额",-1))]),_:1,__:[6]})]),_:1}),r(a(g),null,{default:l(()=>[r(a(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[r(a(b),{class:"text-sm font-medium"},{default:l(()=>e[7]||(e[7]=[m("创作者收益",-1)])),_:1,__:[7]}),r(a(O),{class:"h-4 w-4 text-purple-600"})]),_:1}),r(a(y),null,{default:l(()=>[t("div",at,"¥"+o(d.stats.total_creator_payments?.toFixed(2)||"0.00"),1),e[8]||(e[8]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"支付给创作者",-1))]),_:1,__:[8]})]),_:1}),r(a(g),null,{default:l(()=>[r(a(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[r(a(b),{class:"text-sm font-medium"},{default:l(()=>e[9]||(e[9]=[m("交易数量",-1)])),_:1,__:[9]}),r(a(R),{class:"h-4 w-4 text-orange-600"})]),_:1}),r(a(y),null,{default:l(()=>[t("div",rt,o(d.stats.total_transactions||0),1),e[10]||(e[10]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"笔交易",-1))]),_:1,__:[10]})]),_:1})]),t("div",lt,[t("div",null,[r(a(S),{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),placeholder:"搜索创作者或帖子...",onInput:f},null,8,["modelValue"])]),t("div",null,[A(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),onChange:f,class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white"},[e[11]||(e[11]=t("option",{value:""},"全部创作者",-1)),(u(!0),p(k,null,w(d.creators,s=>(u(),p("option",{key:s.id,value:s.id},o(s.name)+" (@"+o(s.login_name)+") ",9,ot))),128))],544),[[H,c.value]])]),t("div",null,[r(a(S),{modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=s=>_.value=s),type:"date",placeholder:"开始日期",onChange:f},null,8,["modelValue"])]),t("div",null,[r(a(J),{variant:"outline",onClick:U,class:"w-full"},{default:l(()=>e[12]||(e[12]=[m(" 清除筛选 ",-1)])),_:1,__:[12]})])]),t("div",dt,[t("table",it,[e[13]||(e[13]=t("thead",{class:"bg-gray-50 dark:bg-gray-900"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"时间"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"帖子"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"创作者"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"交易总额"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"平台佣金"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"创作者所得"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"佣金比例")])],-1)),t("tbody",nt,[(u(!0),p(k,null,w(d.transactions.data,s=>(u(),p("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",ut,o(B(s.created_at)),1),t("td",pt,[r(a(M),{href:`/posts/${s.post.slug}`,class:"text-blue-600 hover:text-blue-800 dark:text-blue-400 text-sm"},{default:l(()=>[m(o(s.post.title),1)]),_:2},1032,["href"])]),t("td",mt,[t("div",xt,o(s.creator.name),1),t("div",ct,"@"+o(s.creator.login_name),1)]),t("td",_t,[t("span",ft,"¥"+o(s.total_transaction),1)]),t("td",gt,[t("span",yt,"¥"+o(s.amount),1)]),t("td",vt,[t("span",bt,"¥"+o(s.creator_amount),1)]),t("td",ht,[t("span",kt,o(s.percentage)+"% ",1)])]))),128))])])]),d.transactions.last_page>1?(u(),p("div",wt,[t("nav",Vt,[(u(!0),p(k,null,w(d.transactions.links,(s,h)=>(u(),L(a(M),{key:h,href:s.url||"#",class:E(["px-3 py-2 text-sm border",s.active?"bg-blue-50 border-blue-500 text-blue-600 dark:bg-blue-900 dark:text-blue-200":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400",h===0?"rounded-l-md":"",h===d.transactions.links.length-1?"rounded-r-md":""]),innerHTML:s.label,disabled:!s.url},null,8,["href","class","innerHTML","disabled"]))),128))])])):z("",!0)])])])])]),_:1}))}});export{Rt as default};
