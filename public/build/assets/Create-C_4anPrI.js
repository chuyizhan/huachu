import{d as j,u as R,r as w,c as M,o as n,w as a,a as o,b as r,e,h as z,f as d,g as N,i as _,j as c,n as g,t as p,k as h,v as V,l as S}from"./app-CUBtHjuK.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-9-ILEEih.js";import{_ as y}from"./index-DtJJbKVT.js";import{_ as f}from"./Input.vue_vue_type_script_setup_true_lang-DG0PmVBh.js";import{_ as i}from"./Label.vue_vue_type_script_setup_true_lang-Bh-xYCYF.js";import{_ as E}from"./Textarea.vue_vue_type_script_setup_true_lang-Bk7nswVa.js";import{_ as q,a as A}from"./CardContent.vue_vue_type_script_setup_true_lang-DatFqOgb.js";import{_ as F}from"./CardDescription.vue_vue_type_script_setup_true_lang-CPdKXWVE.js";import{_ as O}from"./CardHeader.vue_vue_type_script_setup_true_lang-B5cuPCHH.js";import{_ as P}from"./CardTitle.vue_vue_type_script_setup_true_lang-GmyH7xW0.js";import{A as T}from"./arrow-left-ic9RqP4R.js";import{X as C}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-DjW_4YWm.js";import"./Primitive-C8K8xgUe.js";import"./useForwardExpose-BJzjCdxN.js";import"./usePrimitiveElement-CSK95RDE.js";import"./RovingFocusGroup-BmbzXbjs.js";import"./VisuallyHidden-T_FRiZzH.js";import"./index-BA1Ez3KJ.js";import"./createLucideIcon-DZZNp1PE.js";import"./DialogTitle-BA5LLKor.js";import"./index-hb5zdG9_.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-MOG7Q4dv.js";import"./shield-DbDej1cR.js";import"./trending-up-B_1ux6AR.js";import"./file-text-uhXd4rVg.js";import"./chevron-right-C6c1mLDJ.js";import"./useArrowNavigation-C6Y-ieo6.js";const X={class:"py-12"},G={class:"w-full sm:px-6 lg:px-8"},H={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},J={class:"p-6 text-gray-900 dark:text-gray-100"},K={class:"mb-6 flex items-center justify-between"},Q={class:"flex items-center gap-4"},W={class:"space-y-2"},Y={key:0,class:"text-sm text-red-500"},Z={class:"space-y-2"},ee={key:0,class:"text-sm text-red-500"},se={class:"space-y-2"},te={key:0,class:"text-sm text-red-500"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oe={class:"space-y-2"},le={class:"flex gap-2"},ae={key:0,class:"text-sm text-red-500"},de={class:"space-y-2"},ie={key:0,class:"text-sm text-red-500"},ne={class:"space-y-2"},ue={class:"flex items-start gap-4"},_e={key:0,class:"relative"},ce=["src"],pe={class:"flex-1"},me={key:0,class:"text-sm text-red-500 mt-1"},ge={class:"space-y-2"},fe={class:"flex items-start gap-4"},ye={key:0,class:"relative"},xe=["src"],ve={class:"flex-1"},ke={key:0,class:"text-sm text-red-500 mt-1"},be={class:"space-y-2"},we={key:0,class:"text-sm text-red-500"},he={class:"flex items-center space-x-2"},Ve={class:"space-y-4"},Ce={class:"flex items-center space-x-2"},Ue={key:0,class:"space-y-2 pl-6"},Ie={key:0,class:"text-sm text-red-500"},$e={class:"space-y-2"},Be={class:"space-y-2"},Le={class:"flex items-center space-x-2"},je=["checked"],Re={class:"flex items-center space-x-2"},Me=["checked","disabled"],ze={class:"flex items-center space-x-2"},Ne=["checked","disabled"],Se={class:"flex items-center space-x-2"},De=["checked","disabled"],Ee={key:0,class:"text-sm text-red-500"},qe={class:"flex gap-4"},ms=j({__name:"Create",setup(Ae){const t=R({name:"",slug:"",description:"",color:"#3b82f6",icon:"",icon_image:null,category_image:null,sort_order:0,is_active:!0,is_nav_item:!1,nav_route:"",allowed_user_types:["all"]}),x=w(null),v=w(null),U=m=>{const l=m.target.files?.[0];l&&(t.icon_image=l,x.value=URL.createObjectURL(l))},I=m=>{const l=m.target.files?.[0];l&&(t.category_image=l,v.value=URL.createObjectURL(l))},$=()=>{t.icon_image=null,x.value=null;const m=document.getElementById("icon_image");m&&(m.value="")},B=()=>{t.category_image=null,v.value=null;const m=document.getElementById("category_image");m&&(m.value="")},L=()=>{t.post("/admin/categories",{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{}})},b=()=>{S.visit("/admin/categories")};return(m,s)=>(n(),M(D,null,{default:a(()=>[o(e(z),{title:"创建分类"}),r("div",X,[r("div",G,[r("div",H,[r("div",J,[r("div",K,[r("div",Q,[o(e(y),{variant:"outline",size:"icon",onClick:b},{default:a(()=>[o(e(T),{class:"h-4 w-4"})]),_:1}),s[14]||(s[14]=r("h1",{class:"text-2xl font-semibold"},"创建分类",-1))])]),o(e(q),null,{default:a(()=>[o(e(O),null,{default:a(()=>[o(e(P),null,{default:a(()=>s[15]||(s[15]=[d("分类信息",-1)])),_:1,__:[15]}),o(e(F),null,{default:a(()=>s[16]||(s[16]=[d(" 填写分类的基本信息和设置 ",-1)])),_:1,__:[16]})]),_:1}),o(e(A),null,{default:a(()=>[r("form",{onSubmit:N(L,["prevent"]),class:"space-y-6"},[r("div",W,[o(e(i),{for:"name"},{default:a(()=>s[17]||(s[17]=[d("分类名称 *",-1)])),_:1,__:[17]}),o(e(f),{id:"name",modelValue:e(t).name,"onUpdate:modelValue":s[0]||(s[0]=l=>e(t).name=l),type:"text",required:"",class:g({"border-red-500":e(t).errors.name})},null,8,["modelValue","class"]),e(t).errors.name?(n(),_("p",Y,p(e(t).errors.name),1)):c("",!0)]),r("div",Z,[o(e(i),{for:"slug"},{default:a(()=>s[18]||(s[18]=[d("别名 (URL) *",-1)])),_:1,__:[18]}),o(e(f),{id:"slug",modelValue:e(t).slug,"onUpdate:modelValue":s[1]||(s[1]=l=>e(t).slug=l),type:"text",required:"",placeholder:"category-slug",class:g({"border-red-500":e(t).errors.slug})},null,8,["modelValue","class"]),s[19]||(s[19]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," 用于URL的唯一标识符，只能包含小写字母、数字和连字符 ",-1)),e(t).errors.slug?(n(),_("p",ee,p(e(t).errors.slug),1)):c("",!0)]),r("div",se,[o(e(i),{for:"description"},{default:a(()=>s[20]||(s[20]=[d("描述",-1)])),_:1,__:[20]}),o(E,{id:"description",modelValue:e(t).description,"onUpdate:modelValue":s[2]||(s[2]=l=>e(t).description=l),rows:"3",placeholder:"分类描述...",class:g({"border-red-500":e(t).errors.description})},null,8,["modelValue","class"]),e(t).errors.description?(n(),_("p",te,p(e(t).errors.description),1)):c("",!0)]),r("div",re,[r("div",oe,[o(e(i),{for:"color"},{default:a(()=>s[21]||(s[21]=[d("颜色",-1)])),_:1,__:[21]}),r("div",le,[o(e(f),{id:"color",modelValue:e(t).color,"onUpdate:modelValue":s[3]||(s[3]=l=>e(t).color=l),type:"color",class:g(["w-20 h-10 p-1 cursor-pointer",{"border-red-500":e(t).errors.color}])},null,8,["modelValue","class"]),o(e(f),{modelValue:e(t).color,"onUpdate:modelValue":s[4]||(s[4]=l=>e(t).color=l),type:"text",placeholder:"#3b82f6",class:g(["flex-1",{"border-red-500":e(t).errors.color}])},null,8,["modelValue","class"])]),e(t).errors.color?(n(),_("p",ae,p(e(t).errors.color),1)):c("",!0)]),r("div",de,[o(e(i),{for:"icon"},{default:a(()=>s[22]||(s[22]=[d("图标类名",-1)])),_:1,__:[22]}),o(e(f),{id:"icon",modelValue:e(t).icon,"onUpdate:modelValue":s[5]||(s[5]=l=>e(t).icon=l),type:"text",placeholder:"lucide-icon-name",class:g({"border-red-500":e(t).errors.icon})},null,8,["modelValue","class"]),s[23]||(s[23]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," 图标类名或标识符 ",-1)),e(t).errors.icon?(n(),_("p",ie,p(e(t).errors.icon),1)):c("",!0)])]),r("div",ne,[o(e(i),{for:"icon_image"},{default:a(()=>s[24]||(s[24]=[d("图标图片",-1)])),_:1,__:[24]}),r("div",ue,[x.value?(n(),_("div",_e,[r("img",{src:x.value,alt:"Icon preview",class:"w-24 h-24 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-700"},null,8,ce),o(e(y),{type:"button",variant:"destructive",size:"icon",class:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:$},{default:a(()=>[o(e(C),{class:"h-4 w-4"})]),_:1})])):c("",!0),r("div",pe,[o(e(f),{id:"icon_image",type:"file",accept:"image/*",onChange:U,class:g({"border-red-500":e(t).errors.icon_image})},null,8,["class"]),s[25]||(s[25]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," 推荐尺寸: 200x200px, 最大 2MB ",-1)),e(t).errors.icon_image?(n(),_("p",me,p(e(t).errors.icon_image),1)):c("",!0)])])]),r("div",ge,[o(e(i),{for:"category_image"},{default:a(()=>s[26]||(s[26]=[d("分类封面图",-1)])),_:1,__:[26]}),r("div",fe,[v.value?(n(),_("div",ye,[r("img",{src:v.value,alt:"Category preview",class:"w-48 h-32 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-700"},null,8,xe),o(e(y),{type:"button",variant:"destructive",size:"icon",class:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:B},{default:a(()=>[o(e(C),{class:"h-4 w-4"})]),_:1})])):c("",!0),r("div",ve,[o(e(f),{id:"category_image",type:"file",accept:"image/*",onChange:I,class:g({"border-red-500":e(t).errors.category_image})},null,8,["class"]),s[27]||(s[27]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," 推荐尺寸: 800x600px, 最大 5MB ",-1)),e(t).errors.category_image?(n(),_("p",ke,p(e(t).errors.category_image),1)):c("",!0)])])]),r("div",be,[o(e(i),{for:"sort_order"},{default:a(()=>s[28]||(s[28]=[d("排序顺序",-1)])),_:1,__:[28]}),o(e(f),{id:"sort_order",modelValue:e(t).sort_order,"onUpdate:modelValue":s[6]||(s[6]=l=>e(t).sort_order=l),modelModifiers:{number:!0},type:"number",class:g({"border-red-500":e(t).errors.sort_order})},null,8,["modelValue","class"]),s[29]||(s[29]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," 数字越小排序越靠前 ",-1)),e(t).errors.sort_order?(n(),_("p",we,p(e(t).errors.sort_order),1)):c("",!0)]),r("div",he,[h(r("input",{id:"is_active","onUpdate:modelValue":s[7]||(s[7]=l=>e(t).is_active=l),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[V,e(t).is_active]]),o(e(i),{for:"is_active",class:"cursor-pointer"},{default:a(()=>s[30]||(s[30]=[d(" 启用分类 ",-1)])),_:1,__:[30]})]),r("div",Ve,[r("div",Ce,[h(r("input",{id:"is_nav_item","onUpdate:modelValue":s[8]||(s[8]=l=>e(t).is_nav_item=l),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[V,e(t).is_nav_item]]),o(e(i),{for:"is_nav_item",class:"cursor-pointer"},{default:a(()=>s[31]||(s[31]=[d(" 显示在导航菜单 ",-1)])),_:1,__:[31]})]),e(t).is_nav_item?(n(),_("div",Ue,[o(e(i),{for:"nav_route"},{default:a(()=>s[32]||(s[32]=[d("导航路由",-1)])),_:1,__:[32]}),o(e(f),{id:"nav_route",modelValue:e(t).nav_route,"onUpdate:modelValue":s[9]||(s[9]=l=>e(t).nav_route=l),type:"text",placeholder:"/category/slug",class:g({"border-red-500":e(t).errors.nav_route})},null,8,["modelValue","class"]),s[33]||(s[33]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," 导航菜单中的链接地址 ",-1)),e(t).errors.nav_route?(n(),_("p",Ie,p(e(t).errors.nav_route),1)):c("",!0)])):c("",!0)]),r("div",$e,[o(e(i),null,{default:a(()=>s[34]||(s[34]=[d("允许发帖的用户类型",-1)])),_:1,__:[34]}),r("div",Be,[r("div",Le,[r("input",{id:"type_all",type:"checkbox",value:"all",checked:e(t).allowed_user_types.includes("all"),onChange:s[10]||(s[10]=l=>{l.target.checked?e(t).allowed_user_types=["all"]:e(t).allowed_user_types=e(t).allowed_user_types.filter(u=>u!=="all")}),class:"rounded"},null,40,je),o(e(i),{for:"type_all",class:"cursor-pointer"},{default:a(()=>s[35]||(s[35]=[d("所有用户",-1)])),_:1,__:[35]})]),r("div",Re,[r("input",{id:"type_creator",type:"checkbox",value:"creator",checked:e(t).allowed_user_types.includes("creator"),disabled:e(t).allowed_user_types.includes("all"),onChange:s[11]||(s[11]=l=>{l.target.checked?(e(t).allowed_user_types=e(t).allowed_user_types.filter(u=>u!=="all"),e(t).allowed_user_types.push("creator")):e(t).allowed_user_types=e(t).allowed_user_types.filter(u=>u!=="creator")}),class:"rounded"},null,40,Me),o(e(i),{for:"type_creator",class:"cursor-pointer"},{default:a(()=>s[36]||(s[36]=[d("仅创作者",-1)])),_:1,__:[36]})]),r("div",ze,[r("input",{id:"type_regular",type:"checkbox",value:"regular",checked:e(t).allowed_user_types.includes("regular"),disabled:e(t).allowed_user_types.includes("all"),onChange:s[12]||(s[12]=l=>{l.target.checked?(e(t).allowed_user_types=e(t).allowed_user_types.filter(u=>u!=="all"),e(t).allowed_user_types.push("regular")):e(t).allowed_user_types=e(t).allowed_user_types.filter(u=>u!=="regular")}),class:"rounded"},null,40,Ne),o(e(i),{for:"type_regular",class:"cursor-pointer"},{default:a(()=>s[37]||(s[37]=[d("仅普通用户",-1)])),_:1,__:[37]})]),r("div",Se,[r("input",{id:"type_admin",type:"checkbox",value:"admin",checked:e(t).allowed_user_types.includes("admin"),disabled:e(t).allowed_user_types.includes("all"),onChange:s[13]||(s[13]=l=>{l.target.checked?(e(t).allowed_user_types=e(t).allowed_user_types.filter(u=>u!=="all"),e(t).allowed_user_types.push("admin")):e(t).allowed_user_types=e(t).allowed_user_types.filter(u=>u!=="admin")}),class:"rounded"},null,40,De),o(e(i),{for:"type_admin",class:"cursor-pointer"},{default:a(()=>s[38]||(s[38]=[d("仅管理员",-1)])),_:1,__:[38]})])]),s[39]||(s[39]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," 选择哪些类型的用户可以在此分类下发帖。管理员始终可以发帖。 ",-1)),e(t).errors.allowed_user_types?(n(),_("p",Ee,p(e(t).errors.allowed_user_types),1)):c("",!0)]),r("div",qe,[o(e(y),{type:"submit",disabled:e(t).processing},{default:a(()=>[d(p(e(t).processing?"创建中...":"创建分类"),1)]),_:1},8,["disabled"]),o(e(y),{type:"button",variant:"outline",onClick:b},{default:a(()=>s[40]||(s[40]=[d(" 取消 ",-1)])),_:1,__:[40]})])],32)]),_:1})]),_:1})])])])])]),_:1}))}});export{ms as default};
