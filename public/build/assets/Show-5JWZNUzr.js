import{d as W,A as Y,G as B,r as x,c as p,o as l,w as n,a as r,b as e,i as u,j as d,e as o,h as Z,m as D,f as c,t as a,n as g,F as L,x as U,g as ee,l as E}from"./app-yffFBDxN.js";import{_ as te}from"./WebLayout.vue_vue_type_script_setup_true_lang-DvlZ15dq.js";import{_ as v}from"./index-BUy6U1QF.js";import{_ as w,a as y}from"./CardContent.vue_vue_type_script_setup_true_lang-CfxFDWBd.js";import{_ as F}from"./index-CRqnVQ3Q.js";import{_ as N,b as V,a as z,C as I,X as se}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-0fvJFrcD.js";import{A as oe}from"./arrow-left-PCupHVsx.js";import{M as ae}from"./map-pin-DLm7ifpN.js";import{C as re}from"./calendar-2GXfVphs.js";import{U as le}from"./user-plus-Dz8ExIpy.js";import{U as ie}from"./user-minus-BmUyXhsU.js";import{S as ne}from"./star-VvGOxobX.js";import{C as ce}from"./check-DK0Xl5FP.js";import{c as de}from"./createLucideIcon-CGMjwqEZ.js";import{E as ue}from"./eye-BL_2nFrK.js";import{H as fe}from"./heart-BGdJGu4i.js";import{M as me}from"./message-square-CTtjxh4B.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CD5v1c27.js";import"./user-Gl6DO5aE.js";import"./Primitive-w7CM4taK.js";import"./index-Dhw7ndGb.js";import"./useForwardExpose-CxeLvbXy.js";import"./usePrimitiveElement-BWfxx9vH.js";import"./RovingFocusGroup-zj6r8tx-.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-hb5zdG9_.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=de("BookOpenIcon",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),be={class:"min-h-screen py-8"},_e={class:"max-w-6xl mx-auto px-4"},xe={class:"flex items-center mb-8"},ge={class:"flex flex-col md:flex-row gap-8"},ve={class:"flex-shrink-0"},he={class:"flex-1 text-center md:text-left"},we={class:"flex flex-col md:flex-row md:items-start md:justify-between mb-4"},ye={class:"text-3xl font-bold text-white mb-2 flex items-center justify-center md:justify-start gap-3"},ke={class:"text-[#ff6e02] font-medium mb-2"},Se={class:"flex items-center justify-center md:justify-start text-[#999999] text-sm gap-4 mb-4"},Ce={key:0,class:"flex items-center gap-1"},je={class:"flex items-center gap-1"},Be={key:0,class:"mt-4 md:mt-0"},Fe={key:0,class:"text-[#cccccc] mb-6 max-w-2xl"},Pe={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},$e={class:"text-center p-4 bg-[#1f2937] rounded-lg"},Me={class:"text-2xl font-bold text-white"},Ae={class:"text-center p-4 bg-[#1f2937] rounded-lg"},De={class:"text-2xl font-bold text-white"},Le={class:"text-center p-4 bg-[#1f2937] rounded-lg"},Ue={class:"text-2xl font-bold text-white"},Ee={key:0,class:"text-center p-4 bg-[#1f2937] rounded-lg"},Ne={class:"text-2xl font-bold text-white flex items-center justify-center gap-1"},Ve={key:1,class:"text-center md:text-left"},ze=["href"],Ie={key:0,class:"mb-8"},Oe={class:"text-2xl font-bold text-white mb-6 flex items-center gap-3"},Te={key:0,class:"mb-6"},qe={class:"flex items-center gap-3"},He={class:"text-sm text-green-300"},Xe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ge={class:"text-center mb-4"},Ke={class:"text-xl font-bold text-white mb-2"},Re={class:"flex items-baseline justify-center gap-2 mb-1"},Je={class:"text-3xl font-bold text-[#ff6e02]"},Qe={class:"text-sm text-[#999999]"},We={key:0,class:"text-sm text-[#cccccc] text-center mb-4"},Ye={class:"mb-8"},Ze={class:"text-2xl font-bold text-white mb-6 flex items-center gap-3"},et={key:0,class:"text-center py-16"},tt={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},st={key:0,class:"aspect-video overflow-hidden"},ot=["src","alt"],at={class:"flex items-center justify-between mb-3"},rt={class:"flex items-center gap-2"},lt={class:"text-lg"},it={class:"text-lg font-semibold text-white hover:text-[#ff6e02] transition-colors mb-3 line-clamp-2"},nt={key:0,class:"text-[#999999] text-sm mb-4 line-clamp-3"},ct={class:"flex items-center gap-2 mb-4"},dt={class:"text-sm text-[#999999]"},ut={class:"flex items-center justify-between text-sm text-[#999999] pt-4 border-t border-[#4B5563]"},ft={class:"flex items-center gap-4"},mt={class:"flex items-center gap-1"},pt={class:"flex items-center gap-1"},bt={class:"flex items-center gap-1"},_t={class:"text-xs"},xt={key:2,class:"mt-12 flex justify-center"},gt={class:"text-[#999999] text-sm"},vt={key:0},ht={class:"flex justify-between items-start mb-6"},wt={class:"space-y-4 mb-6"},yt={class:"flex items-center gap-3 p-3 bg-[#1f2937] rounded-lg"},kt={class:"text-white font-medium"},St={class:"text-sm text-[#999999]"},Ct={class:"p-4 bg-[#1f2937] rounded-lg"},jt={class:"flex justify-between items-center mb-2"},Bt={class:"text-white font-medium"},Ft={class:"flex justify-between items-center mb-2"},Pt={class:"text-white font-medium"},$t={class:"flex justify-between items-center text-lg border-t border-[#4B5563] pt-3 mt-3"},Mt={class:"flex items-baseline gap-1"},At={class:"text-2xl font-bold text-[#ff6e02]"},Dt={class:"flex justify-between items-center"},Lt={class:"flex items-baseline gap-1"},Ut={class:"text-xs text-gray-400 mt-1"},Et={key:0,class:"p-3 bg-red-900/20 border border-red-500/30 rounded-lg"},Nt={class:"flex gap-3"},Vt=W({__name:"Show",props:{creator:{},posts:{},isFollowing:{type:Boolean},canFollow:{type:Boolean},subscriptionPlans:{},hasActiveSubscription:{type:Boolean},activeSubscription:{},userCredits:{}},setup(T){const m=T,q=Y(),H=B(()=>q.props.auth?.user?.id===m.creator.user_id),k=x(m.isFollowing),P=x(m.creator.followers_count||0),h=x(!1),C=x(!1),f=x(null),b=x(!1),_=B(()=>typeof m.userCredits=="number"?m.userCredits:parseFloat(String(m.userCredits))||0);console.log("Creator Show - User Credits (raw):",m.userCredits,typeof m.userCredits),console.log("Creator Show - User Credits (parsed):",_.value),console.log("Has Active Subscription:",m.hasActiveSubscription),console.log("Subscription Plans:",m.subscriptionPlans);const X={discussion:"è®¨è®º",tutorial:"æ•™ç¨‹",showcase:"å±•ç¤º",question:"é—®é¢˜"},G={discussion:"ğŸ’¬",tutorial:"ğŸ“–",showcase:"ğŸ¨",question:"â“"},j=B(()=>{switch(m.creator.verification_status){case"verified":return{text:"å·²è®¤è¯",class:"bg-green-500/20 text-green-400 border-green-500/30"};case"premium":return{text:"VIPåˆ›ä½œè€…",class:"bg-[#ff6e02]/20 text-[#ff6e02] border-[#ff6e02]/30"};case"expert":return{text:"ä¸“å®¶",class:"bg-purple-500/20 text-purple-400 border-purple-500/30"};default:return null}});function $(t){return new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}function M(t){return t.split(" ").map(s=>s[0]).join("").toUpperCase()}const K=async()=>{if(!(!m.canFollow||h.value)){h.value=!0;try{const t=await fetch(`/creators/${m.creator.id}/follow`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},credentials:"same-origin"}),s=await t.json();t.ok&&s.success?(k.value=s.following,P.value=s.followers_count):(console.error("Follow toggle failed:",s.message||"Unknown error"),alert(s.message||"æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•"))}catch(t){console.error("Error toggling follow:",t),alert("ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•")}finally{h.value=!1}}},R=t=>{f.value=t,C.value=!0},S=()=>{C.value=!1,f.value=null},J=()=>{if(!f.value||b.value){console.log("Cannot subscribe:",{selectedPlan:f.value,isSubscribing:b.value});return}console.log("Starting subscription for plan:",f.value.id),b.value=!0,E.post(`/subscriptions/plans/${f.value.id}/subscribe`,{},{preserveScroll:!0,onSuccess:t=>{console.log("Subscription successful",t),alert("è®¢é˜…æˆåŠŸï¼"),S(),E.reload({only:["subscriptionPlans","hasActiveSubscription","activeSubscription","userCredits"]})},onError:t=>{console.error("Subscription error:",t);const s=typeof t=="string"?t:Object.values(t).flat().join(`
`);alert(s||"è®¢é˜…å¤±è´¥ï¼Œè¯·é‡è¯•")},onFinish:()=>{console.log("Subscription request finished"),b.value=!1}})},A=t=>t===7?"1å‘¨":t===30?"1ä¸ªæœˆ":t===90?"3ä¸ªæœˆ":t===365?"1å¹´":`${t}å¤©`,Q=t=>new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"});return(t,s)=>(l(),p(te,null,{default:n(()=>[r(o(Z),{title:`${t.creator.display_name} - åˆ›ä½œè€…æ¡£æ¡ˆ`},null,8,["title"]),e("div",be,[e("div",_e,[e("div",xe,[r(o(D),{href:"/creators",class:"mr-4"},{default:n(()=>[r(o(v),{variant:"ghost",size:"sm",class:"text-white hover:text-[#ff6e02]"},{default:n(()=>[r(o(oe),{class:"h-4 w-4 mr-2"}),s[0]||(s[0]=c(" è¿”å›åˆ›ä½œè€… ",-1))]),_:1,__:[0]})]),_:1})]),r(o(w),{class:"bg-[#374151] border-[#4B5563] mb-8"},{default:n(()=>[r(o(y),{class:"p-8"},{default:n(()=>[e("div",ge,[e("div",ve,[r(o(N),{class:"h-32 w-32 mx-auto md:mx-0"},{default:n(()=>[t.creator.user.avatar?(l(),p(o(V),{key:0,src:t.creator.user.avatar,alt:t.creator.display_name},null,8,["src","alt"])):d("",!0),r(o(z),{class:"bg-[#ff6e02] text-white text-2xl font-bold"},{default:n(()=>[c(a(M(t.creator.display_name)),1)]),_:1})]),_:1})]),e("div",he,[e("div",we,[e("div",null,[e("h1",ye,[c(a(t.creator.display_name)+" ",1),j.value?(l(),p(o(F),{key:0,class:g(j.value.class)},{default:n(()=>[c(a(j.value.text),1)]),_:1},8,["class"])):d("",!0)]),e("p",ke,a(t.creator.specialty),1),e("div",Se,[t.creator.location?(l(),u("span",Ce,[r(o(ae),{class:"h-4 w-4"}),c(" "+a(t.creator.location),1)])):d("",!0),e("span",je,[r(o(re),{class:"h-4 w-4"}),c(" "+a($(t.creator.joined_at||t.creator.user.created_at))+" åŠ å…¥ ",1)])])]),t.canFollow?(l(),u("div",Be,[r(o(v),{onClick:K,disabled:h.value,class:g(k.value?"bg-transparent border-[#ff6e02] text-[#ff6e02] hover:bg-[#ff6e02] hover:text-white":"bg-[#ff6e02] hover:bg-[#e55a00] text-white")},{default:n(()=>[k.value?(l(),p(o(ie),{key:1,class:"h-4 w-4 mr-2"})):(l(),p(o(le),{key:0,class:"h-4 w-4 mr-2"})),c(" "+a(h.value?"å¤„ç†ä¸­...":k.value?"å–æ¶ˆå…³æ³¨":"å…³æ³¨"),1)]),_:1},8,["disabled","class"])])):d("",!0)]),t.creator.bio?(l(),u("p",Fe,a(t.creator.bio),1)):d("",!0),e("div",Pe,[e("div",$e,[e("div",Me,a(P.value),1),s[1]||(s[1]=e("div",{class:"text-sm text-[#999999]"},"ç²‰ä¸",-1))]),e("div",Ae,[e("div",De,a(t.creator.posts_count||0),1),s[2]||(s[2]=e("div",{class:"text-sm text-[#999999]"},"å¸–å­",-1))]),e("div",Le,[e("div",Ue,a(t.creator.likes_received||0),1),s[3]||(s[3]=e("div",{class:"text-sm text-[#999999]"},"è·èµ",-1))]),t.creator.rating?(l(),u("div",Ee,[e("div",Ne,[c(a(t.creator.rating)+" ",1),r(o(ne),{class:"h-5 w-5 text-yellow-400 fill-current"})]),s[4]||(s[4]=e("div",{class:"text-sm text-[#999999]"},"è¯„åˆ†",-1))])):d("",!0)]),t.creator.website?(l(),u("div",Ve,[e("a",{href:t.creator.website,target:"_blank",rel:"noopener noreferrer",class:"text-[#ff6e02] hover:text-[#e55a00] underline"},a(t.creator.website),9,ze)])):d("",!0)])])]),_:1})]),_:1}),t.subscriptionPlans.length>0&&!H.value?(l(),u("div",Ie,[e("h2",Oe,[r(o(I),{class:"h-7 w-7 text-[#ff6e02]"}),s[5]||(s[5]=c(" è®¢é˜…è®¡åˆ’ ",-1))]),t.hasActiveSubscription&&t.activeSubscription?(l(),u("div",Te,[r(o(w),{class:"bg-green-900/20 border-green-500/30"},{default:n(()=>[r(o(y),{class:"p-4"},{default:n(()=>[e("div",qe,[r(o(ce),{class:"h-5 w-5 text-green-400"}),e("div",null,[s[6]||(s[6]=e("p",{class:"text-green-400 font-medium"},"å·²è®¢é˜…",-1)),e("p",He," æœ‰æ•ˆæœŸè‡³ï¼š"+a(Q(t.activeSubscription.expires_at)),1)])])]),_:1})]),_:1})])):d("",!0),e("div",Xe,[(l(!0),u(L,null,U(t.subscriptionPlans,i=>(l(),p(o(w),{key:i.id,class:"bg-[#374151] border-[#4B5563] hover:border-[#ff6e02] transition-colors"},{default:n(()=>[r(o(y),{class:"p-6"},{default:n(()=>[e("div",Ge,[e("h3",Ke,a(i.name),1),e("div",Re,[e("span",Je,a(i.price),1),s[7]||(s[7]=e("span",{class:"text-[#999999]"},"é‡‘å¸",-1))]),e("p",Qe,a(A(i.duration_days)),1)]),i.description?(l(),u("p",We,a(i.description),1)):d("",!0),t.hasActiveSubscription?(l(),p(o(v),{key:2,disabled:"",class:"w-full bg-gray-600 text-gray-400 cursor-not-allowed"},{default:n(()=>s[9]||(s[9]=[c(" å·²è®¢é˜… ",-1)])),_:1,__:[9]})):(l(),p(o(v),{key:1,onClick:zt=>R(i),class:"w-full bg-[#ff6e02] hover:bg-[#e55a00] text-white"},{default:n(()=>s[8]||(s[8]=[c(" ç«‹å³è®¢é˜… ",-1)])),_:2,__:[8]},1032,["onClick"]))]),_:2},1024)]),_:2},1024))),128))])])):d("",!0),e("div",Ye,[e("h2",Ze,[r(o(O),{class:"h-7 w-7 text-[#ff6e02]"}),s[10]||(s[10]=c(" æœ€æ–°å¸–å­ ",-1))]),t.posts.data.length===0?(l(),u("div",et,[r(o(O),{class:"h-16 w-16 text-[#666666] mx-auto mb-6"}),s[11]||(s[11]=e("h3",{class:"text-xl font-medium text-white mb-4"},"æš‚æ— å‘å¸ƒå†…å®¹",-1)),s[12]||(s[12]=e("p",{class:"text-[#999999] max-w-md mx-auto"}," è¯¥åˆ›ä½œè€…è¿˜æ²¡æœ‰å‘å¸ƒä»»ä½•å†…å®¹ï¼Œè¯·ç¨åå†æ¥æŸ¥çœ‹ ",-1))])):(l(),u("div",tt,[(l(!0),u(L,null,U(t.posts.data,i=>(l(),p(o(w),{key:i.id,class:"bg-[#374151] border-[#4B5563] hover:border-[#6B7280] transition-all duration-200 hover:scale-105 group overflow-hidden"},{default:n(()=>[i.images&&i.images.length>0?(l(),u("div",st,[e("img",{src:i.images[0],alt:i.title,class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"},null,8,ot)])):d("",!0),r(o(y),{class:"p-6"},{default:n(()=>[e("div",at,[e("div",rt,[e("span",lt,a(G[i.type]),1),r(o(F),{class:"bg-[#ff6e02]/20 text-[#ff6e02] border-[#ff6e02]/30"},{default:n(()=>[c(a(X[i.type]),1)]),_:2},1024)]),i.is_featured?(l(),p(o(F),{key:0,class:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},{default:n(()=>s[13]||(s[13]=[c(" ç²¾é€‰ ",-1)])),_:1,__:[13]})):d("",!0)]),r(o(D),{href:`/posts/${i.slug}`},{default:n(()=>[e("h3",it,a(i.title),1)]),_:2},1032,["href"]),i.excerpt?(l(),u("p",nt,a(i.excerpt),1)):d("",!0),e("div",ct,[s[14]||(s[14]=e("div",{class:"w-3 h-3 rounded-full bg-[#ff6e02]"},null,-1)),e("span",dt,a(i.category.name),1)]),e("div",ut,[e("div",ft,[e("span",mt,[r(o(ue),{class:"h-3 w-3"}),c(" "+a(i.view_count),1)]),e("span",pt,[r(o(fe),{class:"h-3 w-3"}),c(" "+a(i.like_count),1)]),e("span",bt,[r(o(me),{class:"h-3 w-3"}),c(" "+a(i.comment_count),1)])]),e("span",_t,a($(i.published_at||i.created_at)),1)])]),_:2},1024)]),_:2},1024))),128))])),t.posts.data.length>0?(l(),u("div",xt,[e("p",gt,[c(" æ˜¾ç¤º "+a(t.posts.data.length)+" ç¯‡å¸–å­ ",1),t.posts.meta?.total?(l(),u("span",vt," / å…± "+a(t.posts.meta.total)+" ç¯‡",1)):d("",!0)])])):d("",!0)])])]),C.value&&f.value?(l(),u("div",{key:0,class:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:ee(S,["self"])},[r(o(w),{class:"bg-[#374151] border-[#4B5563] max-w-md w-full"},{default:n(()=>[r(o(y),{class:"p-6"},{default:n(()=>[e("div",ht,[s[15]||(s[15]=e("h3",{class:"text-2xl font-bold text-white"},"ç¡®è®¤è®¢é˜…",-1)),e("button",{onClick:S,class:"text-[#999999] hover:text-white transition-colors"},[r(o(se),{class:"h-6 w-6"})])]),e("div",wt,[e("div",yt,[r(o(N),{class:"h-12 w-12"},{default:n(()=>[t.creator.user.avatar?(l(),p(o(V),{key:0,src:t.creator.user.avatar,alt:t.creator.display_name},null,8,["src","alt"])):d("",!0),r(o(z),{class:"bg-[#ff6e02] text-white"},{default:n(()=>[c(a(M(t.creator.display_name)),1)]),_:1})]),_:1}),e("div",null,[e("p",kt,a(t.creator.display_name),1),e("p",St,a(t.creator.specialty),1)])]),e("div",Ct,[e("div",jt,[s[16]||(s[16]=e("span",{class:"text-[#cccccc]"},"è®¢é˜…è®¡åˆ’",-1)),e("span",Bt,a(f.value.name),1)]),e("div",Ft,[s[17]||(s[17]=e("span",{class:"text-[#cccccc]"},"æ—¶é•¿",-1)),e("span",Pt,a(A(f.value.duration_days)),1)]),e("div",$t,[s[19]||(s[19]=e("span",{class:"text-white font-bold"},"æ”¯ä»˜é‡‘é¢",-1)),e("div",Mt,[e("span",At,a(f.value.price),1),s[18]||(s[18]=e("span",{class:"text-[#999999]"},"é‡‘å¸",-1))])])]),e("div",{class:g(["p-3 rounded-lg",_.value>=f.value.price?"bg-green-900/20":"bg-red-900/20"])},[e("div",Dt,[e("span",{class:g(["text-sm",_.value>=f.value.price?"text-green-300":"text-red-300"])}," å½“å‰ä½™é¢ ",2),e("div",Lt,[e("span",{class:g(["font-bold",_.value>=f.value.price?"text-green-400":"text-red-400"])},a(_.value.toFixed(2)),3),e("span",{class:g(["text-sm",_.value>=f.value.price?"text-green-300":"text-red-300"])}," é‡‘å¸ ",2)])]),e("div",Ut," éœ€è¦: "+a(f.value.price)+" é‡‘å¸ ",1)],2),_.value<f.value.price?(l(),u("div",Et,s[20]||(s[20]=[e("p",{class:"text-red-400 text-sm"}," ä½™é¢ä¸è¶³ï¼Œè¯·å…ˆå……å€¼ ",-1)]))):d("",!0)]),e("div",Nt,[r(o(v),{onClick:J,disabled:b.value||_.value<f.value.price,class:"flex-1 bg-[#ff6e02] hover:bg-[#e55a00] text-white disabled:bg-gray-600 disabled:cursor-not-allowed"},{default:n(()=>[b.value?d("",!0):(l(),p(o(I),{key:0,class:"h-4 w-4 mr-2"})),c(" "+a(b.value?"å¤„ç†ä¸­...":"ç¡®è®¤è®¢é˜…"),1)]),_:1},8,["disabled"]),r(o(v),{onClick:S,variant:"outline",class:"flex-1 border-[#4B5563] text-white hover:bg-[#4B5563]",disabled:b.value},{default:n(()=>s[21]||(s[21]=[c(" å–æ¶ˆ ",-1)])),_:1,__:[21]},8,["disabled"])])]),_:1})]),_:1})])):d("",!0)]),_:1}))}}),ms=pe(Vt,[["__scopeId","data-v-b728e11e"]]);export{ms as default};
