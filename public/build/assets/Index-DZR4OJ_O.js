import{d as E,r as y,c as n,o as a,w as S,a as w,b as e,e as i,h as O,i as g,j as l,k as _,p as P,q as W,s as $,t as o,f as p,F as M,x as T,n as U,m as j,l as C}from"./app-CGnIBUHd.js";import{_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-aGfxy_eq.js";import{C as D}from"./chevron-up-BluPIrBv.js";import{C as N}from"./chevron-down-B_Vvd1wH.js";import{C as Y}from"./check-B5Ppj-X_.js";import{X as G}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-bTLJB_YX.js";import{S as J}from"./star-Bjyb_YOy.js";import{S as Q}from"./star-off-DZ9If5hv.js";import{T as R}from"./trash-2-BH8Pmga8.js";import"./Primitive-Ctx9SZAN.js";import"./useForwardExpose-B4tSyQsn.js";import"./usePrimitiveElement-BAFidYUa.js";import"./RovingFocusGroup-CO147YIP.js";import"./VisuallyHidden-C6YY9RqH.js";import"./index-C4HzZ1T_.js";import"./createLucideIcon-CwJxfQWd.js";import"./DialogTitle-mcAqqGSg.js";import"./index-C5W0E7bH.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CZmcPzd0.js";import"./shield-CrtJEtjB.js";import"./trending-up-DW1Sfpt5.js";import"./file-text-Bb_8ou8T.js";import"./chevron-right-stKlzRBI.js";import"./index-DieGkx7F.js";import"./useArrowNavigation-C6Y-ieo6.js";const Z={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},ee={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6"},te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},re={class:"mb-4 text-sm text-gray-600 dark:text-gray-400"},se={class:"bg-white dark:bg-gray-800 shadow overflow-hidden rounded-lg"},ae={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},oe={class:"bg-gray-50 dark:bg-gray-700"},ie={class:"flex items-center gap-1"},le={class:"flex items-center gap-1"},de={class:"flex items-center gap-1"},ne={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ge={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},ue={class:"px-6 py-4 whitespace-nowrap"},pe={class:"flex items-center gap-3"},xe=["src","alt"],me={key:1,class:"w-10 h-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center text-gray-600 dark:text-gray-300 font-semibold"},fe={class:"flex flex-col"},ye={class:"text-sm font-medium text-gray-900 dark:text-white"},ce={class:"text-sm text-gray-500 dark:text-gray-400"},ve={key:0,class:"text-xs text-gray-400"},ke={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},be={class:"px-6 py-4 whitespace-nowrap"},he={class:"px-6 py-4 whitespace-nowrap text-sm"},we={class:"flex flex-col gap-1"},_e={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},Ce={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},Se={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600 dark:text-green-400"},$e={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600 dark:text-blue-400"},je={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Ve={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},De={class:"flex items-center justify-end gap-2"},Ne=["onClick"],Fe=["onClick"],Me=["onClick","title"],Te=["onClick"],Ue={key:0,class:"mt-6"},Be={class:"flex items-center justify-between"},ze={class:"flex-1 flex justify-between sm:hidden"},Le={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ie={class:"text-sm text-gray-700 dark:text-gray-300"},He={class:"font-medium"},Ke={class:"font-medium"},qe={class:"font-medium"},Ae={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},mt=E({__name:"Index",props:{creators:{},filters:{}},setup(B){const m=B,c=y(m.filters.search||""),v=y(m.filters.verification_status||""),k=y(m.filters.is_featured||""),b=y(m.filters.is_top_creator||""),u=y(m.filters.sort_by||"created_at"),d=y(m.filters.sort_direction||"desc"),h=y(m.filters.per_page||"20"),x=()=>{const s={};c.value&&(s.search=c.value),v.value&&(s.verification_status=v.value),k.value!==""&&(s.is_featured=k.value),b.value!==""&&(s.is_top_creator=b.value),u.value&&(s.sort_by=u.value),d.value&&(s.sort_direction=d.value),h.value&&(s.per_page=h.value),C.get("/admin/creators",s,{preserveState:!0,preserveScroll:!0})},z=()=>{c.value="",v.value="",k.value="",b.value="",u.value="created_at",d.value="desc",h.value="20",x()},V=s=>{u.value===s?d.value=d.value==="asc"?"desc":"asc":(u.value=s,d.value="desc"),x()},L=s=>{confirm("确定要验证此创作者吗？")&&C.post(`/admin/creators/${s}/verify`,{},{preserveScroll:!0})},I=s=>{const t=prompt("请输入拒绝原因：");t&&C.post(`/admin/creators/${s}/reject`,{verification_notes:t},{preserveScroll:!0})},H=s=>{C.post(`/admin/creators/${s}/toggle-featured`,{},{preserveScroll:!0})},K=s=>{confirm("确定要移除此用户的创作者身份吗？这将软删除其创作者资料。")&&C.delete(`/admin/creators/${s}`,{preserveScroll:!0})},q=s=>({pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",verified:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",rejected:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"})[s]||"bg-gray-100 text-gray-800",A=s=>new Date(s).toLocaleDateString("zh-CN"),F=s=>s==null?"¥0.00":new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(s);return(s,t)=>(a(),n(X,null,{default:S(()=>[w(i(O),{title:"创作者管理"}),e("div",Z,[t[33]||(t[33]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"创作者管理"),e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 管理所有创作者及其资料 ")],-1)),e("div",ee,[e("div",te,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 搜索 ",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>c.value=r),type:"text",placeholder:"名称、邮箱、专长...",class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onKeyup:P(x,["enter"])},null,544),[[W,c.value]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 验证状态 ",-1)),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>v.value=r),onChange:x,class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[9]||(t[9]=[e("option",{value:""},"全部",-1),e("option",{value:"pending"},"待审核",-1),e("option",{value:"verified"},"已验证",-1),e("option",{value:"rejected"},"已拒绝",-1)]),544),[[$,v.value]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 精选状态 ",-1)),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>k.value=r),onChange:x,class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[11]||(t[11]=[e("option",{value:""},"全部",-1),e("option",{value:"1"},"精选",-1),e("option",{value:"0"},"非精选",-1)]),544),[[$,k.value]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 顶级创作者 ",-1)),_(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>b.value=r),onChange:x,class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[13]||(t[13]=[e("option",{value:""},"全部",-1),e("option",{value:"1"},"是",-1),e("option",{value:"0"},"否",-1)]),544),[[$,b.value]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 每页显示 ",-1)),_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>h.value=r),onChange:x,class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[15]||(t[15]=[e("option",{value:"10"},"10",-1),e("option",{value:"20"},"20",-1),e("option",{value:"50"},"50",-1),e("option",{value:"100"},"100",-1)]),544),[[$,h.value]])])]),e("div",{class:"mt-4 flex gap-2"},[e("button",{onClick:x,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"}," 应用筛选 "),e("button",{onClick:z,class:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500"}," 清除筛选 ")])]),e("div",re," 显示 "+o(s.creators.total)+" 个创作者中的 "+o(s.creators.data.length)+" 个 ",1),e("div",se,[e("table",ae,[e("thead",oe,[e("tr",null,[e("th",{onClick:t[5]||(t[5]=r=>V("id")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"},[e("div",ie,[t[17]||(t[17]=p(" ID ",-1)),u.value==="id"&&d.value==="asc"?(a(),n(i(D),{key:0,class:"h-4 w-4"})):l("",!0),u.value==="id"&&d.value==="desc"?(a(),n(i(N),{key:1,class:"h-4 w-4"})):l("",!0)])]),t[20]||(t[20]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 创作者信息 ",-1)),e("th",{onClick:t[6]||(t[6]=r=>V("follower_count")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"},[e("div",le,[t[18]||(t[18]=p(" 粉丝数 ",-1)),u.value==="follower_count"&&d.value==="asc"?(a(),n(i(D),{key:0,class:"h-4 w-4"})):l("",!0),u.value==="follower_count"&&d.value==="desc"?(a(),n(i(N),{key:1,class:"h-4 w-4"})):l("",!0)])]),t[21]||(t[21]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 验证状态 ",-1)),t[22]||(t[22]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 标签 ",-1)),t[23]||(t[23]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 创作者收益 ",-1)),t[24]||(t[24]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 平台分成 ",-1)),e("th",{onClick:t[7]||(t[7]=r=>V("created_at")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"},[e("div",de,[t[19]||(t[19]=p(" 创建时间 ",-1)),u.value==="created_at"&&d.value==="asc"?(a(),n(i(D),{key:0,class:"h-4 w-4"})):l("",!0),u.value==="created_at"&&d.value==="desc"?(a(),n(i(N),{key:1,class:"h-4 w-4"})):l("",!0)])]),t[25]||(t[25]=e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 操作 ",-1))])]),e("tbody",ne,[(a(!0),g(M,null,T(s.creators.data,r=>(a(),g("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",ge,o(r.id),1),e("td",ue,[e("div",pe,[r.avatar?(a(),g("img",{key:0,src:r.avatar.startsWith("http")?r.avatar:`/storage/${r.avatar}`,alt:r.name,class:"w-10 h-10 rounded-full object-cover"},null,8,xe)):(a(),g("div",me,o((r.creator_profile?.display_name||r.name).charAt(0).toUpperCase()),1)),e("div",fe,[e("div",ye,o(r.creator_profile?.display_name||r.name),1),e("div",ce,o(r.email),1),r.creator_profile?.specialty?(a(),g("div",ve,o(r.creator_profile.specialty),1)):l("",!0)])])]),e("td",ke,o(r.creator_profile?.follower_count||0),1),e("td",be,[r.creator_profile?(a(),g("span",{key:0,class:U([q(r.creator_profile.verification_status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},o(r.creator_profile.verification_status==="pending"?"待审核":"")+" "+o(r.creator_profile.verification_status==="verified"?"已验证":"")+" "+o(r.creator_profile.verification_status==="rejected"?"已拒绝":""),3)):l("",!0)]),e("td",he,[e("div",we,[r.is_top_creator?(a(),g("span",_e," 顶级创作者 ")):l("",!0),r.creator_profile?.is_featured?(a(),g("span",Ce," 精选 ")):l("",!0)])]),e("td",Se,o(F(r.creator_profile?.total_earnings)),1),e("td",$e,o(F(r.creator_profile?.total_platform_share)),1),e("td",je,o(A(r.created_at)),1),e("td",Ve,[e("div",De,[w(i(j),{href:`/admin/creators/${r.id}`,class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},{default:S(()=>t[26]||(t[26]=[p(" 查看 ",-1)])),_:2,__:[26]},1032,["href"]),r.creator_profile?.verification_status==="pending"?(a(),g("button",{key:0,onClick:f=>L(r.id),class:"text-green-600 hover:text-green-900 dark:text-green-400",title:"验证"},[w(i(Y),{class:"h-4 w-4"})],8,Ne)):l("",!0),r.creator_profile?.verification_status==="pending"?(a(),g("button",{key:1,onClick:f=>I(r.id),class:"text-red-600 hover:text-red-900 dark:text-red-400",title:"拒绝"},[w(i(G),{class:"h-4 w-4"})],8,Fe)):l("",!0),e("button",{onClick:f=>H(r.id),class:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400",title:r.creator_profile?.is_featured?"取消精选":"设为精选"},[r.creator_profile?.is_featured?(a(),n(i(Q),{key:1,class:"h-4 w-4"})):(a(),n(i(J),{key:0,class:"h-4 w-4"}))],8,Me),e("button",{onClick:f=>K(r.id),class:"text-red-600 hover:text-red-900 dark:text-red-400",title:"移除创作者身份"},[w(i(R),{class:"h-4 w-4"})],8,Te)])])]))),128))])])]),s.creators.links.length>3?(a(),g("div",Ue,[e("nav",Be,[e("div",ze,[s.creators.links[0].url?(a(),n(i(j),{key:0,href:s.creators.links[0].url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"},{default:S(()=>t[27]||(t[27]=[p(" 上一页 ",-1)])),_:1,__:[27]},8,["href"])):l("",!0),s.creators.links[s.creators.links.length-1].url?(a(),n(i(j),{key:1,href:s.creators.links[s.creators.links.length-1].url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"},{default:S(()=>t[28]||(t[28]=[p(" 下一页 ",-1)])),_:1,__:[28]},8,["href"])):l("",!0)]),e("div",Le,[e("div",null,[e("p",Ie,[t[29]||(t[29]=p(" 显示 ",-1)),e("span",He,o((s.creators.current_page-1)*s.creators.per_page+1),1),t[30]||(t[30]=p(" 到 ",-1)),e("span",Ke,o(Math.min(s.creators.current_page*s.creators.per_page,s.creators.total)),1),t[31]||(t[31]=p(" 共 ",-1)),e("span",qe,o(s.creators.total),1),t[32]||(t[32]=p(" 个结果 ",-1))])]),e("div",null,[e("nav",Ae,[(a(!0),g(M,null,T(s.creators.links,(r,f)=>(a(),n(i(j),{key:f,href:r.url||"#",class:U(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",r.active?"z-10 bg-indigo-50 dark:bg-indigo-900 border-indigo-500 text-indigo-600 dark:text-indigo-300":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700",f===0?"rounded-l-md":"",f===s.creators.links.length-1?"rounded-r-md":"",r.url?"":"cursor-not-allowed opacity-50"]),innerHTML:r.label},null,8,["href","class","innerHTML"]))),128))])])])])])):l("",!0)])]),_:1}))}});export{mt as default};
