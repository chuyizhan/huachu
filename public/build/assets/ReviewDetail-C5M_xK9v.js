import{d as U,k as M,p as T,e as t,o as d,i as p,n as F,B as A,r as D,a as e,h as P,w as a,b as o,f as r,t as i,c as b,j as m,F as V,s as N,l as w}from"./app-omrOMKVL.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-bjNwbGzX.js";import{_ as C}from"./index-DZLll_k7.js";import{_,a as c}from"./CardContent.vue_vue_type_script_setup_true_lang-DI2i9Skb.js";import{_ as g}from"./CardHeader.vue_vue_type_script_setup_true_lang-L8cfcDYH.js";import{_ as v}from"./CardTitle.vue_vue_type_script_setup_true_lang-C1bMdFym.js";import{_ as S}from"./index-CLrShI-G.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-5ZlsC7Et.js";import{c as E}from"./Primitive-CqfJ75Ql.js";import{u as X}from"./useForwardExpose-z2OA6_ay.js";import{A as G}from"./arrow-left-C6g9PbFi.js";import{I as H,V as J}from"./video-CeaqsMbU.js";import{U as K}from"./user-DCbq_tdC.js";import{R as O}from"./rotate-ccw-BciWhjwL.js";import{C as Q}from"./circle-check-big-B8Dv9554.js";import{C as W}from"./circle-x-BLRl_xD7.js";import"./usePrimitiveElement-BnM25tZc.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-DmhzqpeE.js";import"./createLucideIcon-DD0foOWP.js";import"./RovingFocusGroup-DlE2znV6.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./VisuallyHidden-y_-ptxJe.js";import"./index-Dbg1u9AM.js";import"./DialogTitle-DpxAaeRA.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-htH7RIcW.js";import"./shield-lZk7-9GN.js";import"./file-text-CZKcEs7-.js";import"./trending-up-8EDjQJTb.js";import"./chevron-right-zHX_yZmE.js";const R=U({__name:"Textarea",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup($,{emit:x}){const f=$,h=X(f,"modelValue",x,{passive:!0,defaultValue:f.defaultValue});return(z,k)=>M((d(),p("textarea",{"onUpdate:modelValue":k[0]||(k[0]=j=>A(h)?h.value=j:null),"data-slot":"textarea",class:F(t(E)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",f.class))},null,2)),[[T,t(h)]])}}),Y={class:"space-y-6"},Z={class:"flex items-center justify-between"},tt={class:"flex items-center gap-4"},et={class:"text-[#999999] mt-1"},st={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},at={class:"lg:col-span-2 space-y-6"},lt={class:"text-white mt-2"},ot={key:0},rt={class:"text-[#999999] mt-2"},it={key:1},dt={class:"text-[#999999] mt-2 whitespace-pre-wrap"},nt={key:2},ut={class:"flex flex-wrap gap-2 mt-2"},pt={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},mt=["src","alt"],ft=["src"],_t={class:"text-xs text-[#999999] mt-2"},ct={class:"text-[#999999]"},gt={class:"space-y-6"},vt={class:"flex items-center gap-2"},wt={class:"text-white"},bt={class:"text-xs text-[#999999]"},xt={key:0,class:"pt-2 border-t border-[#2a2a2a]"},ht={class:"text-white"},yt={class:"text-white mt-1"},kt={class:"text-white mt-1 text-sm"},Vt={key:0},Ct={class:"text-white mt-1 text-sm"},$t={class:"text-white mt-1"},jt={class:"text-white mt-1 text-sm"},Bt={class:"border-t border-[#2a2a2a] pt-4"},oe=U({__name:"ReviewDetail",props:{post:{}},setup($){const x=$,f=D(""),y=D("");function h(){w.get("/admin/post-reviews")}function z(){confirm("确认批准这个帖子？")&&w.post(`/admin/post-reviews/${x.post.id}/approve`,{notes:y.value||null},{onSuccess:()=>{w.get("/admin/post-reviews",{status:"approved"})}})}function k(){if(!f.value.trim()){alert("请输入拒绝原因");return}confirm("确认拒绝这个帖子？")&&w.post(`/admin/post-reviews/${x.post.id}/reject`,{notes:f.value},{onSuccess:()=>{w.get("/admin/post-reviews",{status:"rejected"})}})}function j(){confirm("确认重置审核状态？")&&w.post(`/admin/post-reviews/${x.post.id}/reset`,{},{onSuccess:()=>{w.get("/admin/post-reviews",{status:"pending"})}})}function I(l){switch(l){case"pending":return"bg-yellow-500";case"approved":return"bg-green-500";case"rejected":return"bg-red-500";default:return"bg-gray-500"}}function B(l){return l?new Date(l).toLocaleString("zh-CN"):"-"}function L(l){return(l/1048576).toFixed(2)+" MB"}return(l,s)=>(d(),p(V,null,[e(t(P),{title:`审核: ${l.post.title}`},null,8,["title"]),e(q,null,{default:a(()=>[o("div",Y,[o("div",Z,[o("div",tt,[e(t(C),{variant:"outline",size:"sm",onClick:h,class:"border-gray-500 text-gray-800 hover:bg-gray-100"},{default:a(()=>[e(t(G),{class:"h-4 w-4 mr-2"}),s[2]||(s[2]=r(" 返回列表 ",-1))]),_:1,__:[2]}),o("div",null,[s[3]||(s[3]=o("h1",{class:"text-2xl font-bold text-white"},"审核帖子",-1)),o("p",et,i(l.post.title),1)])]),e(t(S),{class:F([I(l.post.review_status),"text-base px-4 py-2"])},{default:a(()=>[r(i(l.post.review_status==="pending"?"待审核":l.post.review_status==="approved"?"已批准":"已拒绝"),1)]),_:1},8,["class"])]),o("div",st,[o("div",at,[e(t(_),{class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(g),null,{default:a(()=>[e(t(v),{class:"text-white"},{default:a(()=>s[4]||(s[4]=[r("帖子内容",-1)])),_:1,__:[4]})]),_:1}),e(t(c),{class:"space-y-4"},{default:a(()=>[o("div",null,[e(t(u),{class:"text-white"},{default:a(()=>s[5]||(s[5]=[r("标题",-1)])),_:1,__:[5]}),o("p",lt,i(l.post.title),1)]),l.post.excerpt?(d(),p("div",ot,[e(t(u),{class:"text-white"},{default:a(()=>s[6]||(s[6]=[r("摘要",-1)])),_:1,__:[6]}),o("p",rt,i(l.post.excerpt),1)])):m("",!0),l.post.content?(d(),p("div",it,[e(t(u),{class:"text-white"},{default:a(()=>s[7]||(s[7]=[r("内容",-1)])),_:1,__:[7]}),o("div",dt,i(l.post.content),1)])):m("",!0),l.post.tags&&l.post.tags.length>0?(d(),p("div",nt,[e(t(u),{class:"text-white"},{default:a(()=>s[8]||(s[8]=[r("标签",-1)])),_:1,__:[8]}),o("div",ut,[(d(!0),p(V,null,N(l.post.tags,n=>(d(),b(t(S),{key:n,variant:"outline",class:"border-[#2a2a2a] text-white"},{default:a(()=>[r(i(n),1)]),_:2},1024))),128))])])):m("",!0)]),_:1})]),_:1}),l.post.image_urls&&l.post.image_urls.length>0?(d(),b(t(_),{key:0,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(g),null,{default:a(()=>[e(t(v),{class:"text-white flex items-center gap-2"},{default:a(()=>[e(t(H),{class:"h-5 w-5"}),r(" 图片 ("+i(l.post.image_urls.length)+") ",1)]),_:1})]),_:1}),e(t(c),null,{default:a(()=>[o("div",pt,[(d(!0),p(V,null,N(l.post.image_urls,n=>(d(),p("img",{key:n.id,src:n.url,alt:`Image ${n.id}`,class:"w-full h-48 object-cover rounded-lg"},null,8,mt))),128))])]),_:1})]),_:1})):m("",!0),l.post.video_urls&&l.post.video_urls.length>0?(d(),b(t(_),{key:1,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(g),null,{default:a(()=>[e(t(v),{class:"text-white flex items-center gap-2"},{default:a(()=>[e(t(J),{class:"h-5 w-5"}),r(" 视频 ("+i(l.post.video_urls.length)+") ",1)]),_:1})]),_:1}),e(t(c),{class:"space-y-4"},{default:a(()=>[(d(!0),p(V,null,N(l.post.video_urls,n=>(d(),p("div",{key:n.id},[o("video",{src:n.url,controls:"",class:"w-full rounded-lg"},null,8,ft),o("p",_t,i(n.name)+" ("+i(L(n.size))+") ",1)]))),128))]),_:1})]),_:1})):m("",!0),l.post.review_notes?(d(),b(t(_),{key:2,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(g),null,{default:a(()=>[e(t(v),{class:"text-white"},{default:a(()=>s[9]||(s[9]=[r("审核备注",-1)])),_:1,__:[9]})]),_:1}),e(t(c),null,{default:a(()=>[o("p",ct,i(l.post.review_notes),1)]),_:1})]),_:1})):m("",!0)]),o("div",gt,[e(t(_),{class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(g),null,{default:a(()=>[e(t(v),{class:"text-white"},{default:a(()=>s[10]||(s[10]=[r("作者信息",-1)])),_:1,__:[10]})]),_:1}),e(t(c),{class:"space-y-3"},{default:a(()=>[o("div",vt,[e(t(K),{class:"h-4 w-4 text-[#999999]"}),o("div",null,[o("p",wt,i(l.post.user.name),1),o("p",bt,i(l.post.user.email),1)])]),l.post.user.creator_profile?(d(),p("div",xt,[s[11]||(s[11]=o("p",{class:"text-xs text-[#999999]"},"创作者",-1)),o("p",ht,i(l.post.user.creator_profile.display_name),1)])):m("",!0)]),_:1})]),_:1}),e(t(_),{class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(g),null,{default:a(()=>[e(t(v),{class:"text-white"},{default:a(()=>s[12]||(s[12]=[r("帖子信息",-1)])),_:1,__:[12]})]),_:1}),e(t(c),{class:"space-y-3"},{default:a(()=>[o("div",null,[e(t(u),{class:"text-[#999999]"},{default:a(()=>s[13]||(s[13]=[r("分类",-1)])),_:1,__:[13]}),e(t(S),{variant:"outline",class:"mt-1 border-[#2a2a2a] text-white"},{default:a(()=>[r(i(l.post.category.name),1)]),_:1})]),o("div",null,[e(t(u),{class:"text-[#999999]"},{default:a(()=>s[14]||(s[14]=[r("类型",-1)])),_:1,__:[14]}),o("p",yt,i(l.post.type),1)]),o("div",null,[e(t(u),{class:"text-[#999999]"},{default:a(()=>s[15]||(s[15]=[r("创建时间",-1)])),_:1,__:[15]}),o("p",kt,i(B(l.post.created_at)),1)]),l.post.published_at?(d(),p("div",Vt,[e(t(u),{class:"text-[#999999]"},{default:a(()=>s[16]||(s[16]=[r("发布时间",-1)])),_:1,__:[16]}),o("p",Ct,i(B(l.post.published_at)),1)])):m("",!0)]),_:1})]),_:1}),l.post.reviewer?(d(),b(t(_),{key:0,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(g),null,{default:a(()=>[e(t(v),{class:"text-white"},{default:a(()=>s[17]||(s[17]=[r("审核信息",-1)])),_:1,__:[17]})]),_:1}),e(t(c),{class:"space-y-3"},{default:a(()=>[o("div",null,[e(t(u),{class:"text-[#999999]"},{default:a(()=>s[18]||(s[18]=[r("审核员",-1)])),_:1,__:[18]}),o("p",$t,i(l.post.reviewer.name),1)]),o("div",null,[e(t(u),{class:"text-[#999999]"},{default:a(()=>s[19]||(s[19]=[r("审核时间",-1)])),_:1,__:[19]}),o("p",jt,i(B(l.post.reviewed_at)),1)]),e(t(C),{size:"sm",variant:"outline",onClick:j,class:"w-full border-[#2a2a2a] text-white hover:bg-[#2a2a2a]"},{default:a(()=>[e(t(O),{class:"h-4 w-4 mr-2"}),s[20]||(s[20]=r(" 重置审核 ",-1))]),_:1,__:[20]})]),_:1})]),_:1})):m("",!0),l.post.review_status==="pending"?(d(),b(t(_),{key:1,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(g),null,{default:a(()=>[e(t(v),{class:"text-white"},{default:a(()=>s[21]||(s[21]=[r("审核操作",-1)])),_:1,__:[21]})]),_:1}),e(t(c),{class:"space-y-4"},{default:a(()=>[o("div",null,[e(t(u),{class:"text-white"},{default:a(()=>s[22]||(s[22]=[r("批准备注 (可选)",-1)])),_:1,__:[22]}),e(t(R),{modelValue:y.value,"onUpdate:modelValue":s[0]||(s[0]=n=>y.value=n),placeholder:"添加批准备注...",class:"mt-2 bg-[#2a2a2a] border-[#3a3a3a] text-white"},null,8,["modelValue"]),e(t(C),{onClick:z,class:"w-full mt-2 bg-green-600 hover:bg-green-700"},{default:a(()=>[e(t(Q),{class:"h-4 w-4 mr-2"}),s[23]||(s[23]=r(" 批准帖子 ",-1))]),_:1,__:[23]})]),o("div",Bt,[e(t(u),{class:"text-white"},{default:a(()=>s[24]||(s[24]=[r("拒绝原因 *",-1)])),_:1,__:[24]}),e(t(R),{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=n=>f.value=n),placeholder:"请输入拒绝原因...",class:"mt-2 bg-[#2a2a2a] border-[#3a3a3a] text-white",required:""},null,8,["modelValue"]),e(t(C),{onClick:k,variant:"destructive",class:"w-full mt-2"},{default:a(()=>[e(t(W),{class:"h-4 w-4 mr-2"}),s[25]||(s[25]=r(" 拒绝帖子 ",-1))]),_:1,__:[25]})])]),_:1})]),_:1})):m("",!0)])])])]),_:1})],64))}});export{oe as default};
