import{d as v,H as N,c as C,o as c,w as a,z as D,D as x,e as t,i as y,b as d,j as B,t as P,n as O,r as U,a as r,f as n,aj as F,O as G,h as z,y as L,al as M,k as R,U as J}from"./app-Dgh3oJjq.js";import{q as b,b as K}from"./index-C5W0E7bH.js";import{_ as w}from"./InputError.vue_vue_type_script_setup_true_lang-nHR9Nt-w.js";import{_ as k}from"./index-C_h7MrCB.js";import{_ as W,a as X,b as Y,c as Z,d as ee}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CtJRxkLP.js";import{i as te,d as re}from"./DialogTitle-DS3Wii2c.js";import{P as se,c as ae}from"./Primitive-DShOXFwH.js";import{b as oe}from"./useForwardExpose-odqyuJF-.js";import{a as le}from"./RovingFocusGroup-BLirK_F7.js";import{_ as Q}from"./Input.vue_vue_type_script_setup_true_lang-B41dsgId.js";import{_ as q}from"./Label.vue_vue_type_script_setup_true_lang-Dm92UkKe.js";import{_ as ie,a as de}from"./CardContent.vue_vue_type_script_setup_true_lang-CKy59itl.js";import{_ as ne}from"./CardDescription.vue_vue_type_script_setup_true_lang-CT-grjH3.js";import{_ as ue}from"./CardHeader.vue_vue_type_script_setup_true_lang-expGPZIU.js";import{_ as me}from"./CardTitle.vue_vue_type_script_setup_true_lang-C6ydpjlq.js";import{_ as fe}from"./WebLayout.vue_vue_type_script_setup_true_lang-iGwojr8I.js";import{_ as ce}from"./Layout.vue_vue_type_script_setup_true_lang-C1Ft8aQT.js";import"./index-BxbiCIKl.js";import"./usePrimitiveElement-DrCa_6C1.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-EC1a0P-g.js";import"./createLucideIcon-CDku7WmC.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DvRqC9RU.js";import"./heart-MSvaKViA.js";import"./user-GNv-VnnM.js";import"./index-DBG7u9ON.js";import"./index-D4vsjTq5.js";var pe=v({__name:"DialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const s=e,o=te(),{forwardRef:l,currentElement:i}=oe();return o.contentId||=le(void 0,"reka-dialog-content"),N(()=>{o.triggerElement.value=i.value}),(h,$)=>(c(),C(t(se),x(s,{ref:t(l),type:h.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":t(o).open.value||!1,"aria-controls":t(o).open.value?t(o).contentId:void 0,"data-state":t(o).open.value?"open":"closed",onClick:t(o).onOpenToggle}),{default:a(()=>[D(h.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),_e=pe;const f=e=>({url:f.url(e),method:"get"});f.definition={methods:["get","head"],url:"/settings/profile"};f.url=e=>f.definition.url+b(e);f.get=e=>({url:f.url(e),method:"get"});f.head=e=>({url:f.url(e),method:"head"});const T=e=>({action:f.url(e),method:"get"});T.get=e=>({action:f.url(e),method:"get"});T.head=e=>({action:f.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});f.form=T;const _=e=>({url:_.url(e),method:"patch"});_.definition={methods:["patch"],url:"/settings/profile"};_.url=e=>_.definition.url+b(e);_.patch=e=>({url:_.url(e),method:"patch"});const H=e=>({action:_.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...e?.query??e?.mergeQuery??{}}}),method:"post"});H.patch=e=>({action:_.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"PATCH",...e?.query??e?.mergeQuery??{}}}),method:"post"});_.form=H;const g=e=>({url:g.url(e),method:"delete"});g.definition={methods:["delete"],url:"/settings/profile"};g.url=e=>g.definition.url+b(e);g.delete=e=>({url:g.url(e),method:"delete"});const S=e=>({action:g.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});S.delete=e=>({action:g.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});g.form=S;const I={edit:f,update:_,destroy:g},u=e=>({url:u.url(e),method:"get"});u.definition={methods:["get","head"],url:"/verify-email"};u.url=e=>u.definition.url+b(e);u.get=e=>({url:u.url(e),method:"get"});u.head=e=>({url:u.url(e),method:"head"});const j=e=>({action:u.url(e),method:"get"});j.get=e=>({action:u.url(e),method:"get"});j.head=e=>({action:u.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});u.form=j;const m=(e,s)=>({url:m.url(e,s),method:"get"});m.definition={methods:["get","head"],url:"/verify-email/{id}/{hash}"};m.url=(e,s)=>{Array.isArray(e)&&(e={id:e[0],hash:e[1]}),e=K(e);const o={id:e.id,hash:e.hash};return m.definition.url.replace("{id}",o.id.toString()).replace("{hash}",o.hash.toString()).replace(/\/+$/,"")+b(s)};m.get=(e,s)=>({url:m.url(e,s),method:"get"});m.head=(e,s)=>({url:m.url(e,s),method:"head"});const A=(e,s)=>({action:m.url(e,s),method:"get"});A.get=(e,s)=>({action:m.url(e,s),method:"get"});A.head=(e,s)=>({action:m.url(e,{[s?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...s?.query??s?.mergeQuery??{}}}),method:"get"});m.form=A;const p=e=>({url:p.url(e),method:"post"});p.definition={methods:["post"],url:"/email/verification-notification"};p.url=e=>p.definition.url+b(e);p.post=e=>({url:p.url(e),method:"post"});const V=e=>({action:p.url(e),method:"post"});V.post=e=>({action:p.url(e),method:"post"});p.form=V;Object.assign(u,u),Object.assign(m,m),Object.assign(p,p);const ge={class:"mb-0.5 text-base font-medium"},he={key:0,class:"text-sm text-muted-foreground"},ye=v({__name:"HeadingSmall",props:{title:{},description:{}},setup(e){return(s,o)=>(c(),y("header",null,[d("h3",ge,P(s.title),1),s.description?(c(),y("p",he,P(s.description),1)):B("",!0)]))}}),ve=v({__name:"DialogClose",props:{asChild:{type:Boolean},as:{}},setup(e){const s=e;return(o,l)=>(c(),C(t(re),x({"data-slot":"dialog-close"},s),{default:a(()=>[D(o.$slots,"default")]),_:3},16))}}),be=v({__name:"DialogFooter",props:{class:{}},setup(e){const s=e;return(o,l)=>(c(),y("div",{"data-slot":"dialog-footer",class:O(t(ae)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s.class))},[D(o.$slots,"default")],2))}}),xe=v({__name:"DialogTrigger",props:{asChild:{type:Boolean},as:{}},setup(e){const s=e;return(o,l)=>(c(),C(t(_e),x({"data-slot":"dialog-trigger"},s),{default:a(()=>[D(o.$slots,"default")]),_:3},16))}}),$e={class:"space-y-6"},we={class:"space-y-4 rounded-lg border border-red-100 bg-red-50 p-4 dark:border-red-200/10 dark:bg-red-700/10"},ke={class:"grid gap-2"},Qe=v({__name:"DeleteUser",setup(e){const s=U(null);return(o,l)=>(c(),y("div",$e,[r(ye,{title:"删除账户",description:"删除你的账户及其所有资源"}),d("div",we,[l[7]||(l[7]=d("div",{class:"relative space-y-0.5 text-red-600 dark:text-red-100"},[d("p",{class:"font-medium"},"警告"),d("p",{class:"text-sm"}," 请谨慎操作，此操作无法撤销。 ")],-1)),r(t(ee),null,{default:a(()=>[r(t(xe),{"as-child":""},{default:a(()=>[r(t(k),{variant:"destructive","data-test":"delete-user-button"},{default:a(()=>l[1]||(l[1]=[n("删除账户",-1)])),_:1,__:[1]})]),_:1}),r(t(W),null,{default:a(()=>[r(t(F),x(t(I).destroy.form(),{"reset-on-success":"",onError:l[0]||(l[0]=()=>s.value?.$el?.focus()),options:{preserveScroll:!0},class:"space-y-6"}),{default:a(({errors:i,processing:h,reset:$,clearErrors:E})=>[r(t(X),{class:"space-y-3"},{default:a(()=>[r(t(Y),null,{default:a(()=>l[2]||(l[2]=[n("确定要删除你的账户吗？",-1)])),_:1,__:[2]}),r(t(Z),null,{default:a(()=>l[3]||(l[3]=[n(" 一旦删除你的账户，其所有资源和数据也将被永久删除。请输入你的密码以确认你希望永久删除你的账户。 ",-1)])),_:1,__:[3]})]),_:1}),d("div",ke,[r(t(q),{for:"password",class:"sr-only"},{default:a(()=>l[4]||(l[4]=[n("密码",-1)])),_:1,__:[4]}),r(t(Q),{id:"password",type:"password",name:"password",ref_key:"passwordInput",ref:s,placeholder:"密码"},null,512),r(w,{message:i.password},null,8,["message"])]),r(t(be),{class:"gap-2"},{default:a(()=>[r(t(ve),{"as-child":""},{default:a(()=>[r(t(k),{variant:"secondary",onClick:()=>{E(),$()}},{default:a(()=>l[5]||(l[5]=[n(" 取消 ",-1)])),_:2,__:[5]},1032,["onClick"])]),_:2},1024),r(t(k),{type:"submit",variant:"destructive",disabled:h,"data-test":"confirm-delete-user-button"},{default:a(()=>l[6]||(l[6]=[n(" 删除账户 ",-1)])),_:2,__:[6]},1032,["disabled"])]),_:2},1024)]),_:1},16)]),_:1})]),_:1})])]))}}),qe={class:"grid gap-2"},Ce={class:"flex items-center gap-4"},De={key:0,class:"shrink-0"},Ee=["src"],Be={key:1,class:"flex h-20 w-20 shrink-0 items-center justify-center rounded-full bg-[#1c1c1c] border border-[#4B5563]"},Pe={class:"text-2xl text-[#999999]"},Te={class:"grid gap-2"},je={class:"grid gap-2"},Ae={key:0},Fe={class:"-mt-4 text-sm text-[#999999]"},He={key:0,class:"mt-2 text-sm font-medium text-green-500"},Se={class:"flex items-center gap-4"},Ie={class:"text-sm text-green-500"},ft=v({__name:"Profile",props:{mustVerifyEmail:{type:Boolean},status:{}},setup(e){const o=G().props.auth.user;return(l,i)=>(c(),C(fe,null,{default:a(()=>[r(t(z),{title:"个人资料设置"}),r(ce,null,{default:a(()=>[r(t(ie),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[r(t(ue),null,{default:a(()=>[r(t(me),{class:"text-white"},{default:a(()=>i[0]||(i[0]=[n("个人信息",-1)])),_:1,__:[0]}),r(t(ne),{class:"text-[#999999]"},{default:a(()=>i[1]||(i[1]=[n("更新你的姓名和邮箱地址",-1)])),_:1,__:[1]})]),_:1}),r(t(de),null,{default:a(()=>[r(t(F),x(t(I).update.form(),{class:"space-y-6",enctype:"multipart/form-data"}),{default:a(({errors:h,processing:$,recentlySuccessful:E})=>[d("div",qe,[r(t(q),{for:"avatar",class:"text-white"},{default:a(()=>i[2]||(i[2]=[n("头像",-1)])),_:1,__:[2]}),d("div",Ce,[t(o).avatar?(c(),y("div",De,[d("img",{src:`/storage/${t(o).avatar}`,alt:"当前头像",class:"h-20 w-20 rounded-full object-cover"},null,8,Ee)])):(c(),y("div",Be,[d("span",Pe,P(t(o).name?.charAt(0).toUpperCase()),1)])),r(t(Q),{id:"avatar",type:"file",name:"avatar",accept:"image/*",class:"bg-[#1c1c1c] border-[#4B5563] text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-[#ff6e02] file:text-white hover:file:bg-[#e55a00]"})]),r(w,{class:"mt-2",message:h.avatar},null,8,["message"]),i[3]||(i[3]=d("p",{class:"text-sm text-[#999999]"},"最大文件大小: 2MB。支持的格式: JPG, PNG, GIF",-1))]),d("div",Te,[r(t(q),{for:"name",class:"text-white"},{default:a(()=>i[4]||(i[4]=[n("姓名",-1)])),_:1,__:[4]}),r(t(Q),{id:"name",class:"bg-[#1c1c1c] border-[#4B5563] text-white placeholder:text-[#999999]",name:"name","default-value":t(o).name,required:"",autocomplete:"name",placeholder:"输入你的姓名"},null,8,["default-value"]),r(w,{class:"mt-2",message:h.name},null,8,["message"])]),d("div",je,[r(t(q),{for:"email",class:"text-white"},{default:a(()=>i[5]||(i[5]=[n("邮箱地址",-1)])),_:1,__:[5]}),r(t(Q),{id:"email",type:"email",class:"bg-[#1c1c1c] border-[#4B5563] text-white placeholder:text-[#999999]",name:"email","default-value":t(o).email,required:"",autocomplete:"username",placeholder:"输入你的邮箱地址"},null,8,["default-value"]),r(w,{class:"mt-2",message:h.email},null,8,["message"])]),l.mustVerifyEmail&&!t(o).email_verified_at?(c(),y("div",Ae,[d("p",Fe,[i[7]||(i[7]=n(" 你的邮箱地址尚未验证。 ",-1)),r(t(L),{href:t(p)(),as:"button",class:"text-[#ff6e02] underline underline-offset-4 hover:text-[#e55a00]"},{default:a(()=>i[6]||(i[6]=[n(" 点击此处重新发送验证邮件。 ",-1)])),_:1,__:[6]},8,["href"])]),l.status==="verification-link-sent"?(c(),y("div",He," 新的验证链接已发送到你的邮箱地址。 ")):B("",!0)])):B("",!0),d("div",Se,[r(t(k),{disabled:$,"data-test":"update-profile-button",class:"bg-[#ff6e02] hover:bg-[#e55a00] text-white"},{default:a(()=>i[8]||(i[8]=[n("保存",-1)])),_:2,__:[8]},1032,["disabled"]),r(M,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:a(()=>[R(d("p",Ie," 已保存 ",512),[[J,E]])]),_:2},1024)])]),_:1},16)]),_:1})]),_:1}),r(Qe)]),_:1})]),_:1}))}});export{ft as default};
