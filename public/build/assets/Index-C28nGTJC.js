import{C as $,_ as P}from"./WebLayout.vue_vue_type_script_setup_true_lang-BBzKfQpy.js";import{_ as g}from"./index-BHV2WZQp.js";import{_ as u,a as x}from"./CardContent.vue_vue_type_script_setup_true_lang-BycRxxhI.js";import{_ as V}from"./CardHeader.vue_vue_type_script_setup_true_lang-SlUoBphN.js";import{_ as E}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bku6mZ33.js";import{_ as p}from"./index-NptnU35y.js";import{d as T,c as w,o as d,w as a,a as l,b as e,e as s,h as q,y as b,f as c,t as o,i as n,F as y,s as k,j as h,n as B,x as D,l as F}from"./app-CwqX47Va.js";import{S as v}from"./square-pen-Bg9_xCas.js";import{E as C}from"./eye-Ch7bHwoO.js";import{H as S}from"./heart-CLTWDBDZ.js";import{T as H}from"./trash-2-7aB3nNS0.js";import{M}from"./message-square-DWhX2p81.js";import{C as A}from"./calendar-D731vLRj.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-D94a62pg.js";import"./createLucideIcon-DVzQojCg.js";import"./usePrimitiveElement-0Sj8yhN2.js";import"./useForwardExpose-CmX8ti2p.js";import"./Primitive-GT_ktTbU.js";import"./RovingFocusGroup-DQa8zKLb.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-B5N7NCuu.js";import"./user-B_9Nzv2D.js";import"./index-DBB-Ipl7.js";const G={class:"min-h-screen py-8"},J={class:"max-w-6xl mx-auto px-2"},K={class:"flex items-center justify-between mb-8"},O={class:"grid grid-cols-4 md:grid-cols-4 gap-2 md:gap-6 mb-8"},Q={class:"flex flex-col md:flex-row items-center md:items-center"},R={class:"p-1 md:p-2 bg-[#ff6e02]/20 rounded-lg mb-1 md:mb-0"},U={class:"md:ml-4 text-center md:text-left"},W={class:"text-sm md:text-2xl font-bold text-white"},X={class:"flex flex-col md:flex-row items-center md:items-center"},Y={class:"p-1 md:p-2 bg-green-500/20 rounded-lg mb-1 md:mb-0"},Z={class:"md:ml-4 text-center md:text-left"},ee={class:"text-sm md:text-2xl font-bold text-white"},te={class:"flex flex-col md:flex-row items-center md:items-center"},se={class:"p-1 md:p-2 bg-yellow-500/20 rounded-lg mb-1 md:mb-0"},le={class:"md:ml-4 text-center md:text-left"},re={class:"text-sm md:text-2xl font-bold text-white"},ae={class:"flex flex-col md:flex-row items-center md:items-center"},de={class:"p-1 md:p-2 bg-purple-500/20 rounded-lg mb-1 md:mb-0"},oe={class:"md:ml-4 text-center md:text-left"},ie={class:"text-sm md:text-2xl font-bold text-white"},ne={key:0,class:"text-center py-12"},ce={key:1,class:"divide-y divide-[#4B5563]"},me={class:"flex items-center justify-between mb-3"},_e={class:"flex items-center gap-2 flex-wrap"},fe={class:"flex items-center gap-1.5"},ue={class:"text-xs text-[#999999]"},xe={class:"flex items-center gap-1"},he={key:0,class:"mb-3 p-3 bg-red-500/10 border border-red-500/30 rounded-lg"},ge={class:"text-sm text-red-400"},pe={class:"text-lg font-semibold text-white hover:text-[#ff6e02] transition-colors mb-2 line-clamp-2"},be={key:0,class:"text-sm text-[#999999] mb-3 line-clamp-2"},ve={key:1,class:"mb-3"},we={key:0,class:"max-w-lg"},ye={class:"relative overflow-hidden rounded-lg border border-[#4B5563]",style:{"aspect-ratio":"16/9"}},ke=["src","alt"],$e={key:1,class:"grid grid-cols-2 gap-2 max-w-xl"},Be=["src","alt"],Ce={key:2,class:"grid grid-cols-3 gap-2 max-w-2xl"},Se=["src","alt"],je={class:"flex items-center gap-6 text-sm text-[#999999] mt-3"},Ie={class:"flex items-center gap-1.5"},ze={class:"flex items-center gap-1.5"},Le={class:"flex items-center gap-1.5"},Ne={class:"flex items-center gap-1.5 ml-auto"},rt=T({__name:"Index",props:{posts:{},stats:{}},setup(Pe){const m=i=>i.post_images&&i.post_images.length>0?i.post_images:i.first_image?[i.first_image]:[],j={discussion:"讨论",tutorial:"教程",showcase:"展示",question:"问题"},I={draft:"草稿",published:"已发布",archived:"已归档"},z={pending:"审核中",approved:"已批准",rejected:"已拒绝"},L={pending:"bg-yellow-500",approved:"bg-green-500",rejected:"bg-red-500"};function N(i,r){confirm(`确认删除帖子 "${r}"？

此操作无法撤销。`)&&F.delete(`/posts/${i}`,{preserveScroll:!0,onSuccess:()=>{},onError:t=>{console.error("Failed to delete post:",t),alert("删除失败，请重试")}})}return(i,r)=>(d(),w(P,null,{default:a(()=>[l(s(q),{title:"我的帖子"}),e("div",G,[e("div",J,[e("div",K,[r[1]||(r[1]=e("div",null,[e("h1",{class:"text-3xl font-bold text-white mb-2"},"我的帖子"),e("p",{class:"text-[#999999]"},"管理你的所有帖子内容")],-1)),l(s(b),{href:"/posts/create"},{default:a(()=>[l(s(g),{class:"bg-[#ff6e02] hover:bg-[#e55a00] text-white"},{default:a(()=>[l(s($),{class:"h-4 w-4 mr-2"}),r[0]||(r[0]=c(" 创建新帖子 ",-1))]),_:1,__:[0]})]),_:1})]),e("div",O,[l(s(u),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[l(s(x),{class:"p-2 md:p-6"},{default:a(()=>[e("div",Q,[e("div",R,[l(s(v),{class:"h-3 w-3 md:h-5 md:w-5 text-[#ff6e02]"})]),e("div",U,[r[2]||(r[2]=e("p",{class:"text-xs md:text-sm text-[#999999]"},"总帖子",-1)),e("p",W,o(i.stats.total),1)])])]),_:1})]),_:1}),l(s(u),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[l(s(x),{class:"p-2 md:p-6"},{default:a(()=>[e("div",X,[e("div",Y,[l(s(C),{class:"h-3 w-3 md:h-5 md:w-5 text-green-500"})]),e("div",Z,[r[3]||(r[3]=e("p",{class:"text-xs md:text-sm text-[#999999]"},"已发布",-1)),e("p",ee,o(i.stats.published),1)])])]),_:1})]),_:1}),l(s(u),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[l(s(x),{class:"p-2 md:p-6"},{default:a(()=>[e("div",te,[e("div",se,[l(s(v),{class:"h-3 w-3 md:h-5 md:w-5 text-yellow-500"})]),e("div",le,[r[4]||(r[4]=e("p",{class:"text-xs md:text-sm text-[#999999]"},"草稿",-1)),e("p",re,o(i.stats.drafts),1)])])]),_:1})]),_:1}),l(s(u),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[l(s(x),{class:"p-2 md:p-6"},{default:a(()=>[e("div",ae,[e("div",de,[l(s(S),{class:"h-3 w-3 md:h-5 md:w-5 text-purple-500"})]),e("div",oe,[r[5]||(r[5]=e("p",{class:"text-xs md:text-sm text-[#999999]"},"高级内容",-1)),e("p",ie,o(i.stats.premium),1)])])]),_:1})]),_:1})]),l(s(u),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[l(s(V),null,{default:a(()=>[l(s(E),{class:"text-white"},{default:a(()=>r[6]||(r[6]=[c("帖子列表",-1)])),_:1,__:[6]})]),_:1}),l(s(x),null,{default:a(()=>[i.posts.data.length===0?(d(),n("div",ne,[l(s(v),{class:"h-12 w-12 text-[#999999] mx-auto mb-4"}),r[8]||(r[8]=e("h3",{class:"text-lg font-medium text-white mb-2"},"还没有帖子",-1)),r[9]||(r[9]=e("p",{class:"text-[#999999] mb-6"},"创建你的第一个帖子来分享想法",-1)),l(s(b),{href:"/posts/create"},{default:a(()=>[l(s(g),{class:"bg-[#ff6e02] hover:bg-[#e55a00] text-white"},{default:a(()=>[l(s($),{class:"h-4 w-4 mr-2"}),r[7]||(r[7]=c(" 创建帖子 ",-1))]),_:1,__:[7]})]),_:1})])):(d(),n("div",ce,[(d(!0),n(y,null,k(i.posts.data,t=>(d(),n("div",{key:t.id,class:"relative py-4 first:pt-0 hover:bg-[#1f2937]/30 transition-colors px-4"},[e("div",me,[e("div",_e,[l(s(p),{class:"bg-[#ff6e02]/20 text-[#ff6e02] border-[#ff6e02]/30 text-xs"},{default:a(()=>[c(o(j[t.type]),1)]),_:2},1024),l(s(p),{class:B([{"bg-green-500/20 text-green-500 border-green-500/30":t.status==="published","bg-yellow-500/20 text-yellow-500 border-yellow-500/30":t.status==="draft","bg-gray-500/20 text-gray-500 border-gray-500/30":t.status==="archived"},"text-xs"])},{default:a(()=>[c(o(I[t.status]),1)]),_:2},1032,["class"]),t.status==="published"?(d(),w(s(p),{key:0,class:B([L[t.review_status],"text-xs text-white"])},{default:a(()=>[c(o(z[t.review_status]),1)]),_:2},1032,["class"])):h("",!0),t.is_premium?(d(),w(s(p),{key:1,class:"bg-purple-500/20 text-purple-500 border-purple-500/30 text-xs"},{default:a(()=>r[10]||(r[10]=[c(" VIP ",-1)])),_:1,__:[10]})):h("",!0),e("div",fe,[e("div",{class:"w-2 h-2 rounded-full",style:D({backgroundColor:t.category.color})},null,4),e("span",ue,o(t.category.name),1)])]),e("div",xe,[l(s(b),{href:`/posts/${t.id}/edit`},{default:a(()=>[l(s(g),{variant:"ghost",size:"sm",class:"text-[#999999] hover:text-white hover:bg-[#4B5563]"},{default:a(()=>[l(s(v),{class:"h-4 w-4"})]),_:1})]),_:2},1032,["href"]),l(s(g),{variant:"ghost",size:"sm",class:"text-red-400 hover:text-red-300 hover:bg-red-900/20",onClick:_=>N(t.id,t.title)},{default:a(()=>[l(s(H),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])]),t.review_status==="rejected"&&t.review_notes?(d(),n("div",he,[e("p",ge,[r[11]||(r[11]=e("strong",null,"拒绝原因:",-1)),c(" "+o(t.review_notes),1)])])):h("",!0),l(s(b),{href:`/posts/${t.slug}`,class:"block"},{default:a(()=>[e("h3",pe,o(t.title),1),t.excerpt?(d(),n("p",be,o(t.excerpt),1)):h("",!0),m(t).length>0?(d(),n("div",ve,[m(t).length===1?(d(),n("div",we,[e("div",ye,[e("img",{src:m(t)[0].thumb||m(t)[0].url,class:"w-full h-full object-cover",alt:`${t.title} - Image 1`},null,8,ke)])])):m(t).length===2?(d(),n("div",$e,[(d(!0),n(y,null,k(m(t),(_,f)=>(d(),n("div",{key:f,class:"relative overflow-hidden rounded-lg border border-[#4B5563]",style:{"aspect-ratio":"1/1"}},[e("img",{src:_.thumb||_.url,class:"w-full h-full object-cover",alt:`${t.title} - Image ${f+1}`},null,8,Be)]))),128))])):(d(),n("div",Ce,[(d(!0),n(y,null,k(m(t).slice(0,3),(_,f)=>(d(),n("div",{key:f,class:"relative overflow-hidden rounded-lg border border-[#4B5563]",style:{"aspect-ratio":"1/1"}},[e("img",{src:_.thumb||_.url,class:"w-full h-full object-cover",alt:`${t.title} - Image ${f+1}`},null,8,Se)]))),128))]))])):h("",!0)]),_:2},1032,["href"]),e("div",je,[e("div",Ie,[l(s(C),{class:"h-4 w-4"}),e("span",null,o(t.view_count),1)]),e("div",ze,[l(s(S),{class:"h-4 w-4"}),e("span",null,o(t.like_count),1)]),e("div",Le,[l(s(M),{class:"h-4 w-4"}),e("span",null,o(t.comment_count),1)]),e("div",Ne,[l(s(A),{class:"h-4 w-4"}),e("span",null,o(new Date(t.published_at||t.created_at).toLocaleDateString("zh-CN")),1)])])]))),128))]))]),_:1})]),_:1})])])]),_:1}))}});export{rt as default};
