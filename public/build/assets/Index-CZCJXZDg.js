import{d as P,l as n,c as T,o as p,w as o,a,b as t,e as s,h as q,i as f,j as E,f as u,t as d,k as F,q as $,F as j,s as D,n as I,y as A,r as G}from"./app-mRNHHJ5y.js";import{S as J,D as K,_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-CztLUwBh.js";import{_ as Q}from"./index-dIlapslU.js";import{_ as R}from"./Input.vue_vue_type_script_setup_true_lang-3x2e9IKC.js";import{_ as y,a as _}from"./CardContent.vue_vue_type_script_setup_true_lang-Cv7JTwT2.js";import{_ as v}from"./CardHeader.vue_vue_type_script_setup_true_lang-tU42TayU.js";import{_ as b}from"./CardTitle.vue_vue_type_script_setup_true_lang-SLmDZP6H.js";import{C as W}from"./circle-check-BlUI-SXv.js";import{c as X}from"./createLucideIcon-CDC2VEs-.js";import"./Primitive-CvJ0vu-v.js";import"./useForwardExpose-Bl32_82v.js";import"./usePrimitiveElement-hcvdO7w1.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-U4-4ZzhD.js";import"./RovingFocusGroup-CMybDdW8.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./VisuallyHidden-BePfdSPO.js";import"./index-7bJkH70K.js";import"./DialogTitle-BlOfOXs2.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-M3EFLJlF.js";import"./file-text-D6f-Wj2u.js";import"./trending-up-CC0_L_mm.js";import"./book-open-JASVKyhi.js";import"./chevron-right-DUorCYxd.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=X("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Z={class:"py-12"},tt={class:"w-full sm:px-6 lg:px-8"},et={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},st={class:"p-6 text-gray-900 dark:text-gray-100"},at={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},rt={class:"text-2xl font-bold"},lt={class:"text-2xl font-bold"},ot={class:"text-2xl font-bold"},dt={class:"text-xs text-gray-500 dark:text-gray-400"},it={class:"text-2xl font-bold"},nt={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},pt={class:"overflow-x-auto"},ut={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ct={class:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700"},mt={class:"px-6 py-4 whitespace-nowrap"},xt={class:"text-sm font-mono text-blue-600 dark:text-blue-400"},gt={class:"px-6 py-4 whitespace-nowrap"},ft={class:"text-sm font-medium"},yt={class:"text-xs text-gray-500"},_t={class:"px-6 py-4 whitespace-nowrap"},vt={class:"text-sm"},bt={class:"px-6 py-4 whitespace-nowrap"},ht={class:"text-sm font-semibold"},wt={class:"px-6 py-4 whitespace-nowrap"},kt={class:"text-sm"},Ct={class:"px-6 py-4 whitespace-nowrap"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Vt={key:0,class:"mt-6 flex justify-center"},Tt={class:"inline-flex rounded-md shadow-sm -space-x-px"},Yt=P({__name:"Index",props:{orders:{},users:{},stats:{},filters:{}},setup(L){const i=L,c=n(i.filters.search||""),m=n(i.filters.type||""),x=n(i.filters.status||""),w=n(i.filters.payment_method||""),k=n(i.filters.user_id||""),C=n(i.filters.date_from||""),S=n(i.filters.date_to||""),V=n(i.filters.per_page||"20"),g=()=>{G.get("/admin/orders",{search:c.value,type:m.value,status:x.value,payment_method:w.value,user_id:k.value,date_from:C.value,date_to:S.value,per_page:V.value},{preserveState:!0,preserveScroll:!0})},M=()=>{c.value="",m.value="",x.value="",w.value="",k.value="",C.value="",S.value="",V.value="20",g()},N=r=>new Date(r).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),B=r=>({completed:"bg-green-900 text-green-200",pending:"bg-yellow-900 text-yellow-200",failed:"bg-red-900 text-red-200",refunded:"bg-gray-900 text-gray-200"})[r]||"bg-gray-900 text-gray-200",U=r=>({completed:"已完成",pending:"待处理",failed:"失败",refunded:"已退款"})[r]||r,z=r=>({recharge:"充值",subscription:"订阅",post_purchase:"购买帖子"})[r]||r,H=r=>({fake:"模拟支付",alipay:"支付宝",wechat:"微信支付",credit_card:"信用卡"})[r]||r;return(r,e)=>(p(),T(O,null,{default:o(()=>[a(s(q),{title:"订单管理"}),t("div",Z,[t("div",tt,[t("div",et,[t("div",st,[e[14]||(e[14]=t("div",{class:"mb-6"},[t("h1",{class:"text-2xl font-semibold"},"订单管理"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," 查看和管理所有用户订单 ")],-1)),t("div",at,[a(s(y),null,{default:o(()=>[a(s(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[a(s(b),{class:"text-sm font-medium"},{default:o(()=>e[3]||(e[3]=[u("总订单数",-1)])),_:1,__:[3]}),a(s(J),{class:"h-4 w-4 text-blue-600"})]),_:1}),a(s(_),null,{default:o(()=>[t("div",rt,d(r.stats.total_orders),1),e[4]||(e[4]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"所有订单",-1))]),_:1,__:[4]})]),_:1}),a(s(y),null,{default:o(()=>[a(s(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[a(s(b),{class:"text-sm font-medium"},{default:o(()=>e[5]||(e[5]=[u("订单总额",-1)])),_:1,__:[5]}),a(s(K),{class:"h-4 w-4 text-green-600"})]),_:1}),a(s(_),null,{default:o(()=>[t("div",lt,"¥"+d(r.stats.total_amount.toFixed(2)),1),e[6]||(e[6]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"已完成订单",-1))]),_:1,__:[6]})]),_:1}),a(s(y),null,{default:o(()=>[a(s(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[a(s(b),{class:"text-sm font-medium"},{default:o(()=>e[7]||(e[7]=[u("充值订单",-1)])),_:1,__:[7]}),a(s(W),{class:"h-4 w-4 text-purple-600"})]),_:1}),a(s(_),null,{default:o(()=>[t("div",ot,d(r.stats.recharge_orders),1),t("p",dt,"¥"+d(r.stats.recharge_amount.toFixed(2)),1)]),_:1})]),_:1}),a(s(y),null,{default:o(()=>[a(s(v),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[a(s(b),{class:"text-sm font-medium"},{default:o(()=>e[8]||(e[8]=[u("待处理",-1)])),_:1,__:[8]}),a(s(Y),{class:"h-4 w-4 text-orange-600"})]),_:1}),a(s(_),null,{default:o(()=>[t("div",it,d(r.stats.pending_orders),1),e[9]||(e[9]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"待处理订单",-1))]),_:1,__:[9]})]),_:1})]),t("div",nt,[t("div",null,[a(s(R),{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=l=>c.value=l),placeholder:"搜索订单号或用户...",onInput:g},null,8,["modelValue"])]),t("div",null,[F(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>m.value=l),onChange:g,class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white"},e[10]||(e[10]=[t("option",{value:""},"全部类型",-1),t("option",{value:"recharge"},"充值",-1),t("option",{value:"subscription"},"订阅",-1),t("option",{value:"post_purchase"},"购买帖子",-1)]),544),[[$,m.value]])]),t("div",null,[F(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>x.value=l),onChange:g,class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white"},e[11]||(e[11]=[t("option",{value:""},"全部状态",-1),t("option",{value:"completed"},"已完成",-1),t("option",{value:"pending"},"待处理",-1),t("option",{value:"failed"},"失败",-1),t("option",{value:"refunded"},"已退款",-1)]),544),[[$,x.value]])]),t("div",null,[a(s(Q),{variant:"outline",onClick:M,class:"w-full"},{default:o(()=>e[12]||(e[12]=[u(" 清除筛选 ",-1)])),_:1,__:[12]})])]),t("div",pt,[t("table",ut,[e[13]||(e[13]=t("thead",{class:"bg-gray-50 dark:bg-gray-900"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"订单号"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"用户"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"类型"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"金额"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"支付方式"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"状态"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"创建时间")])],-1)),t("tbody",ct,[(p(!0),f(j,null,D(r.orders.data,l=>(p(),f("tr",{key:l.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",mt,[t("span",xt,d(l.order_number),1)]),t("td",gt,[t("div",ft,d(l.user.name),1),t("div",yt,"@"+d(l.user.login_name),1)]),t("td",_t,[t("span",vt,d(z(l.type)),1)]),t("td",bt,[t("span",ht,"¥"+d(l.amount),1)]),t("td",wt,[t("span",kt,d(H(l.payment_method)),1)]),t("td",Ct,[t("span",{class:I(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",B(l.status)])},d(U(l.status)),3)]),t("td",St,d(N(l.created_at)),1)]))),128))])])]),r.orders.last_page>1?(p(),f("div",Vt,[t("nav",Tt,[(p(!0),f(j,null,D(r.orders.links,(l,h)=>(p(),T(s(A),{key:h,href:l.url||"#",class:I(["px-3 py-2 text-sm border",l.active?"bg-blue-50 border-blue-500 text-blue-600 dark:bg-blue-900 dark:text-blue-200":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400",h===0?"rounded-l-md":"",h===r.orders.links.length-1?"rounded-r-md":""]),innerHTML:l.label,disabled:!l.url},null,8,["href","class","innerHTML","disabled"]))),128))])])):E("",!0)])])])])]),_:1}))}});export{Yt as default};
