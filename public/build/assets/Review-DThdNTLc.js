import{d as L,z as O,r as R,i as g,o as i,a as l,e as s,h as T,w as o,b as e,j as v,t as d,c as p,n as b,f as u,F as k,s as C,l as f}from"./app-CXZ3ihfB.js";import{_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-D_wtm9_C.js";import{_}from"./index-D0-ZYer3.js";import{_ as S}from"./index-DkARcj_-.js";import{_ as q,a as G,b as $,c,d as H,e as m}from"./TableRow.vue_vue_type_script_setup_true_lang-BPQxL13H.js";import{C as J}from"./clock-D3VvgB6B.js";import{C as j}from"./circle-check-big-DQJOQO5w.js";import{C as z}from"./circle-x-xypnzuCW.js";import{E as K}from"./eye-CxMhqLXg.js";import"./Primitive-D0xDaFh3.js";import"./useForwardExpose-BhWxxEkc.js";import"./usePrimitiveElement-BFYqXDhz.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-C-S5_BHm.js";import"./createLucideIcon-BuepBHXs.js";import"./RovingFocusGroup-CoYUuK5I.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./VisuallyHidden-DF1nfNDS.js";import"./index-BUN61GMe.js";import"./DialogTitle-BVzlyT0D.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-DNjeEonB.js";import"./shield-B3yaYVDX.js";import"./file-text-DUHMMCo5.js";import"./trending-up-DLAqxEwG.js";import"./book-open-aCmUfh07.js";import"./chevron-right-C3J7z1jY.js";const M={class:"py-12"},Q={class:"w-full sm:px-6 lg:px-8"},U={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},W={class:"p-6 text-gray-900 dark:text-gray-100"},Y={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Z={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600"},I={class:"flex items-center justify-between"},ee={class:"text-2xl font-bold mt-1"},te={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600"},re={class:"flex items-center justify-between"},se={class:"text-2xl font-bold mt-1"},ae={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600"},le={class:"flex items-center justify-between"},oe={class:"text-2xl font-bold mt-1"},ne={class:"mb-6"},de={class:"flex items-center justify-between mb-4"},ie={class:"border-b border-gray-200 dark:border-gray-700"},ue={class:"-mb-px flex space-x-8"},ge={key:0,class:"overflow-x-auto rounded-md border border-gray-200 dark:border-gray-700"},ce=["checked"],me=["checked","onChange"],ve={class:"flex items-center gap-3"},pe=["src"],fe={class:"font-medium"},_e={class:"text-xs text-gray-500 dark:text-gray-400"},ye={class:"text-xs text-gray-500 dark:text-gray-400"},be={class:"text-sm text-gray-600 dark:text-gray-400"},xe={key:0,class:"text-sm"},ke={class:"text-xs text-gray-500 dark:text-gray-400"},he={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},we={class:"flex gap-2"},Ce={key:1,class:"text-center py-12 bg-gray-50 dark:bg-gray-700 rounded-lg"},Se={key:2,class:"flex justify-center gap-2 mt-6"},Ze=L({__name:"Review",props:{posts:{},stats:{},currentStatus:{}},setup(B){const h=B;O();const n=R([]);function x(t){f.get(route("admin.post-reviews.index"),{status:t},{preserveState:!0,preserveScroll:!0})}function N(t){f.get(route("admin.post-reviews.show",t))}function P(t){confirm("确认批准这个帖子？")&&f.post(route("admin.post-reviews.approve",t),{},{preserveScroll:!0,onSuccess:()=>{n.value=n.value.filter(r=>r!==t)}})}function V(t){const r=prompt("请输入拒绝原因：");r&&f.post(route("admin.post-reviews.reject",t),{notes:r},{preserveScroll:!0,onSuccess:()=>{n.value=n.value.filter(a=>a!==t)}})}function D(){if(n.value.length===0){alert("请选择要批准的帖子");return}confirm(`确认批准 ${n.value.length} 个帖子？`)&&f.post(route("admin.post-reviews.batch-approve"),{post_ids:n.value},{preserveScroll:!0,onSuccess:()=>{n.value=[]}})}function E(t){const r=n.value.indexOf(t);r>-1?n.value.splice(r,1):n.value.push(t)}function A(){n.value.length===h.posts.data.length?n.value=[]:n.value=h.posts.data.map(t=>t.id)}function F(t){switch(t){case"pending":return"bg-yellow-500";case"approved":return"bg-green-500";case"rejected":return"bg-red-500";default:return"bg-gray-500"}}function w(t){return t?new Date(t).toLocaleString("zh-CN"):"-"}return(t,r)=>(i(),g(k,null,[l(s(T),{title:"帖子审核管理"}),l(X,null,{default:o(()=>[e("div",M,[e("div",Q,[e("div",U,[e("div",W,[r[15]||(r[15]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-semibold"},"帖子审核管理"),e("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"审核和管理用户提交的帖子")],-1)),e("div",Y,[e("div",Z,[e("div",I,[e("div",null,[r[3]||(r[3]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"待审核",-1)),e("p",ee,d(t.stats.pending),1)]),l(s(J),{class:"h-8 w-8 text-yellow-500"})])]),e("div",te,[e("div",re,[e("div",null,[r[4]||(r[4]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"已批准",-1)),e("p",se,d(t.stats.approved),1)]),l(s(j),{class:"h-8 w-8 text-green-500"})])]),e("div",ae,[e("div",le,[e("div",null,[r[5]||(r[5]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"已拒绝",-1)),e("p",oe,d(t.stats.rejected),1)]),l(s(z),{class:"h-8 w-8 text-red-500"})])])]),e("div",ne,[e("div",de,[e("div",ie,[e("nav",ue,[e("button",{onClick:r[0]||(r[0]=a=>x("pending")),class:b(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",t.currentStatus==="pending"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"])}," 待审核 ("+d(t.stats.pending)+") ",3),e("button",{onClick:r[1]||(r[1]=a=>x("approved")),class:b(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",t.currentStatus==="approved"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"])}," 已批准 ("+d(t.stats.approved)+") ",3),e("button",{onClick:r[2]||(r[2]=a=>x("rejected")),class:b(["whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium",t.currentStatus==="rejected"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"])}," 已拒绝 ("+d(t.stats.rejected)+") ",3)])]),t.currentStatus==="pending"&&n.value.length>0?(i(),p(s(_),{key:0,onClick:D,class:"bg-green-600 hover:bg-green-700 text-white"},{default:o(()=>[u(" 批量批准 ("+d(n.value.length)+") ",1)]),_:1})):v("",!0)])]),t.posts.data.length>0?(i(),g("div",ge,[l(s(q),null,{default:o(()=>[l(s(G),null,{default:o(()=>[l(s($),{class:"bg-gray-50 dark:bg-gray-700"},{default:o(()=>[t.currentStatus==="pending"?(i(),p(s(c),{key:0,class:"w-12"},{default:o(()=>[e("input",{type:"checkbox",checked:n.value.length===t.posts.data.length,onChange:A,class:"rounded border-gray-300 dark:border-gray-600"},null,40,ce)]),_:1})):v("",!0),l(s(c),null,{default:o(()=>r[6]||(r[6]=[u("帖子",-1)])),_:1,__:[6]}),l(s(c),null,{default:o(()=>r[7]||(r[7]=[u("作者",-1)])),_:1,__:[7]}),l(s(c),null,{default:o(()=>r[8]||(r[8]=[u("分类",-1)])),_:1,__:[8]}),l(s(c),null,{default:o(()=>r[9]||(r[9]=[u("媒体",-1)])),_:1,__:[9]}),l(s(c),null,{default:o(()=>r[10]||(r[10]=[u("状态",-1)])),_:1,__:[10]}),l(s(c),null,{default:o(()=>r[11]||(r[11]=[u("审核信息",-1)])),_:1,__:[11]}),l(s(c),null,{default:o(()=>r[12]||(r[12]=[u("操作",-1)])),_:1,__:[12]})]),_:1})]),_:1}),l(s(H),null,{default:o(()=>[(i(!0),g(k,null,C(t.posts.data,a=>(i(),p(s($),{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},{default:o(()=>[t.currentStatus==="pending"?(i(),p(s(m),{key:0},{default:o(()=>[e("input",{type:"checkbox",checked:n.value.includes(a.id),onChange:y=>E(a.id),class:"rounded border-gray-300 dark:border-gray-600"},null,40,me)]),_:2},1024)):v("",!0),l(s(m),null,{default:o(()=>[e("div",ve,[a.first_image?(i(),g("img",{key:0,src:a.first_image,alt:"",class:"w-16 h-16 object-cover rounded"},null,8,pe)):v("",!0),e("div",null,[e("div",fe,d(a.title),1),e("div",_e,d(w(a.created_at)),1)])])]),_:2},1024),l(s(m),null,{default:o(()=>[e("div",null,d(a.user.name),1),e("div",ye,d(a.user.email),1)]),_:2},1024),l(s(m),null,{default:o(()=>[l(s(S),{variant:"outline"},{default:o(()=>[u(d(a.category.name),1)]),_:2},1024)]),_:2},1024),l(s(m),null,{default:o(()=>[e("div",be,[u(d(a.images_count)+" 图片 ",1),r[13]||(r[13]=e("br",null,null,-1)),u(" "+d(a.videos_count)+" 视频 ",1)])]),_:2},1024),l(s(m),null,{default:o(()=>[l(s(S),{class:b(F(a.review_status))},{default:o(()=>[u(d(a.review_status==="pending"?"待审核":a.review_status==="approved"?"已批准":"已拒绝"),1)]),_:2},1032,["class"])]),_:2},1024),l(s(m),null,{default:o(()=>[a.reviewer?(i(),g("div",xe,[e("div",null,d(a.reviewer.name),1),e("div",ke,d(w(a.reviewed_at)),1)])):(i(),g("div",he,"-"))]),_:2},1024),l(s(m),null,{default:o(()=>[e("div",we,[l(s(_),{size:"sm",variant:"outline",onClick:y=>N(a.id)},{default:o(()=>[l(s(K),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),a.review_status==="pending"?(i(),p(s(_),{key:0,size:"sm",onClick:y=>P(a.id),class:"bg-green-600 hover:bg-green-700 text-white"},{default:o(()=>[l(s(j),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):v("",!0),a.review_status==="pending"?(i(),p(s(_),{key:1,size:"sm",onClick:y=>V(a.id),class:"bg-red-600 hover:bg-red-700 text-white"},{default:o(()=>[l(s(z),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):v("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(i(),g("div",Ce,r[14]||(r[14]=[e("p",{class:"text-gray-500 dark:text-gray-400"},"没有找到帖子",-1)]))),t.posts.last_page>1?(i(),g("div",Se,[(i(!0),g(k,null,C(t.posts.last_page,a=>(i(),p(s(_),{key:a,size:"sm",variant:a===t.posts.current_page?"default":"outline",onClick:y=>s(f).get(t.route("admin.post-reviews.index"),{status:t.currentStatus,page:a})},{default:o(()=>[u(d(a),1)]),_:2},1032,["variant","onClick"]))),128))])):v("",!0)])])])])]),_:1})],64))}});export{Ze as default};
