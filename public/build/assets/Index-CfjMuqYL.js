import{d as P,r as d,c as k,o as n,w as p,a as r,b as e,e as a,h as j,i as _,j as D,m as f,f as y,k as I,s as M,F as w,x as V,t as o,y as T,n as U,l as C}from"./app-D7JLHZQu.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-B4yj9ts1.js";import{_ as $}from"./index-Dwn8uRmC.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-14hBJ1uD.js";import{_ as H}from"./index-D2byTBHj.js";import{u as A}from"./usePagination-2eLEuHuE.js";import"./Primitive-BAQBOfwU.js";import"./useForwardExpose-Bn2djeiF.js";import"./usePrimitiveElement-BWSfl_RV.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-CbT0vu7c.js";import"./createLucideIcon-Jmld2wR3.js";import"./RovingFocusGroup-DM1Pcmd8.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-hb5zdG9_.js";import"./VisuallyHidden-RSbYF_2N.js";import"./index-Hyeev8z-.js";import"./DialogTitle-yzSqrO01.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-ykvkgB-i.js";import"./shield-B5p1WuUP.js";import"./trending-up-DtNWuQP_.js";import"./file-text-7jlCoLmG.js";import"./chevron-right-KnDqCj6t.js";const E={class:"py-12"},q={class:"w-full sm:px-6 lg:px-8"},G={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},J={class:"p-6 text-gray-900 dark:text-gray-100"},K={class:"mb-6 flex items-center justify-between"},O={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},Q={class:"overflow-x-auto"},R={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},W={class:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"text-sm font-semibold"},Z={class:"px-6 py-4"},ee={class:"flex items-center gap-2"},te={class:"text-sm font-medium"},se={class:"text-xs text-gray-500"},ae={class:"px-6 py-4 whitespace-nowrap"},re={class:"text-sm font-semibold text-green-600"},oe={class:"px-6 py-4 whitespace-nowrap"},le={class:"text-sm"},ie={class:"px-6 py-4 whitespace-nowrap"},de={class:"text-sm"},ne={class:"px-6 py-4 whitespace-nowrap"},pe={class:"px-6 py-4 whitespace-nowrap"},ce={class:"text-sm"},ue={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},me=["onClick"],xe={key:0,class:"mt-6 flex justify-center"},ge={class:"inline-flex rounded-md shadow-sm -space-x-px"},Ue=P({__name:"Index",props:{plans:{},filters:{}},setup(B){const l=B,{translatePaginationLabel:F}=A(),c=d(l.filters.search||""),u=d(l.filters.is_active||""),m=d(l.filters.level||""),v=d(l.filters.sort_by||"sort_order"),h=d(l.filters.sort_direction||"asc"),b=d(l.filters.per_page||"20"),x=()=>{C.get("/admin/plans",{search:c.value,is_active:u.value,level:m.value,sort_by:v.value,sort_direction:h.value,per_page:b.value},{preserveState:!0,preserveScroll:!0})},L=()=>{c.value="",u.value="",m.value="",v.value="sort_order",h.value="asc",b.value="20",x()},N=i=>{confirm("确定要删除此套餐吗？")&&C.delete(`/admin/plans/${i}`,{preserveScroll:!0})};return(i,s)=>(n(),k(z,null,{default:p(()=>[r(a(j),{title:"套餐管理"}),e("div",E,[e("div",q,[e("div",G,[e("div",J,[e("div",K,[s[4]||(s[4]=e("h1",{class:"text-2xl font-semibold"},"套餐管理",-1)),r(a(f),{href:"/admin/plans/create"},{default:p(()=>[r(a($),null,{default:p(()=>s[3]||(s[3]=[y("创建套餐",-1)])),_:1,__:[3]})]),_:1})]),e("div",O,[e("div",null,[r(a(S),{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),placeholder:"搜索套餐名称或别名...",onInput:x},null,8,["modelValue"])]),e("div",null,[I(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>u.value=t),onChange:x,class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white"},s[5]||(s[5]=[e("option",{value:""},"全部状态",-1),e("option",{value:"1"},"启用",-1),e("option",{value:"0"},"禁用",-1)]),544),[[M,u.value]])]),e("div",null,[r(a(S),{modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=t=>m.value=t),type:"number",placeholder:"等级...",onInput:x},null,8,["modelValue"])]),e("div",null,[r(a($),{variant:"outline",onClick:L,class:"w-full"},{default:p(()=>s[6]||(s[6]=[y(" 清除筛选 ",-1)])),_:1,__:[6]})])]),e("div",Q,[e("table",R,[s[8]||(s[8]=e("thead",{class:"bg-gray-50 dark:bg-gray-900"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"等级"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"套餐名称"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"价格"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"周期"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"订阅数"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"状态"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"排序"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"操作")])],-1)),e("tbody",W,[(n(!0),_(w,null,V(i.plans.data,t=>(n(),_("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",X,[e("span",Y,o(t.level),1)]),e("td",Z,[e("div",ee,[e("div",{class:"w-4 h-4 rounded",style:T({backgroundColor:t.badge_color})},null,4),e("div",null,[e("div",te,o(t.name),1),e("div",se,o(t.slug),1)])])]),e("td",ae,[e("span",re,"¥"+o(t.price),1)]),e("td",oe,[e("span",le,o(t.period_days)+" 天",1)]),e("td",ie,[e("span",de,o(t.subscriptions_count),1)]),e("td",ne,[r(a(H),{variant:t.is_active?"default":"secondary"},{default:p(()=>[y(o(t.is_active?"启用":"禁用"),1)]),_:2},1032,["variant"])]),e("td",pe,[e("span",ce,o(t.sort_order),1)]),e("td",ue,[r(a(f),{href:`/admin/plans/${t.id}/edit`,class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 mr-3"},{default:p(()=>s[7]||(s[7]=[y(" 编辑 ",-1)])),_:2,__:[7]},1032,["href"]),e("button",{onClick:g=>N(t.id),class:"text-red-600 hover:text-red-900 dark:text-red-400"}," 删除 ",8,me)])]))),128))])])]),i.plans.last_page>1?(n(),_("div",xe,[e("nav",ge,[(n(!0),_(w,null,V(i.plans.links,(t,g)=>(n(),k(a(f),{key:g,href:t.url||"#",class:U(["px-3 py-2 text-sm border",t.active?"bg-blue-50 border-blue-500 text-blue-600 dark:bg-blue-900 dark:text-blue-200":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400",g===0?"rounded-l-md":"",g===i.plans.links.length-1?"rounded-r-md":""]),innerHTML:a(F)(t.label),disabled:!t.url},null,8,["href","class","innerHTML","disabled"]))),128))])])):D("",!0)])])])])]),_:1}))}});export{Ue as default};
