import{d as j,u as z,r as k,c as N,o as m,w as l,a as s,b as o,e,h as R,f as d,g as S,i as u,j as g,n as p,t as c,k as V,v as w,l as D}from"./app-KFEODeFH.js";import{_ as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cda_Z6GP.js";import{_ as f}from"./index-CzUa1E86.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-mdOD5vBF.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-u4bG-yIF.js";import{_ as E}from"./Textarea.vue_vue_type_script_setup_true_lang-B-myQSM4.js";import{_ as P,a as q}from"./CardContent.vue_vue_type_script_setup_true_lang-CAxbpNHo.js";import{_ as A}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bp0Mdsyf.js";import{_ as F}from"./CardHeader.vue_vue_type_script_setup_true_lang-CiMeWi0H.js";import{_ as O}from"./CardTitle.vue_vue_type_script_setup_true_lang-DdARYuiX.js";import{A as T}from"./arrow-left-Dy8dCGzc.js";import{X as C}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-BfNWuLBY.js";import"./Primitive-BJP5LoXZ.js";import"./useForwardExpose-BNwhN2Hl.js";import"./usePrimitiveElement-CE7j_lkG.js";import"./RovingFocusGroup-SZlu1p1J.js";import"./VisuallyHidden-BJ0L5TPQ.js";import"./index-BieuuCCp.js";import"./createLucideIcon-Dl1dhQhq.js";import"./DialogTitle-DaBw-h7N.js";import"./index-C5W0E7bH.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CukCHI5b.js";import"./shield-BxfqG8EW.js";import"./trending-up-Bvtl8mCZ.js";import"./file-text-Wwh469JO.js";import"./chevron-right-DSaglwEj.js";import"./useArrowNavigation-C6Y-ieo6.js";const X={class:"py-12"},G={class:"w-full sm:px-6 lg:px-8"},H={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},J={class:"p-6 text-gray-900 dark:text-gray-100"},K={class:"mb-6 flex items-center justify-between"},Q={class:"flex items-center gap-4"},W={class:"space-y-2"},Y={key:0,class:"text-sm text-red-500"},Z={class:"space-y-2"},ee={key:0,class:"text-sm text-red-500"},te={class:"space-y-2"},re={key:0,class:"text-sm text-red-500"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},se={class:"space-y-2"},ae={class:"flex gap-2"},le={key:0,class:"text-sm text-red-500"},ie={class:"space-y-2"},de={key:0,class:"text-sm text-red-500"},ne={class:"space-y-2"},me={class:"flex items-start gap-4"},ce={key:0,class:"relative"},ue=["src"],ge={class:"flex-1"},_e={key:0,class:"text-sm text-red-500 mt-1"},pe={class:"space-y-2"},ye={class:"flex items-start gap-4"},fe={key:0,class:"relative"},ve=["src"],xe={class:"flex-1"},be={key:0,class:"text-sm text-red-500 mt-1"},ke={class:"space-y-2"},Ve={key:0,class:"text-sm text-red-500"},we={class:"flex items-center space-x-2"},Ce={class:"space-y-4"},Ue={class:"flex items-center space-x-2"},he={key:0,class:"space-y-2 pl-6"},$e={key:0,class:"text-sm text-red-500"},Ie={class:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg"},Be={class:"text-sm text-gray-600 dark:text-gray-400 space-y-1"},Le={class:"font-semibold"},je={class:"flex gap-4"},at=j({__name:"Edit",props:{category:{}},setup(U){const n=U,r=z({name:n.category.name,slug:n.category.slug,description:n.category.description||"",color:n.category.color,icon:n.category.icon||"",icon_image:null,category_image:null,remove_icon_image:!1,remove_category_image:!1,sort_order:n.category.sort_order,is_active:n.category.is_active,is_nav_item:n.category.is_nav_item,nav_route:n.category.nav_route||""}),v=k(n.category.icon_image?`/storage/${n.category.icon_image}`:null),x=k(n.category.category_image?`/storage/${n.category.category_image}`:null),h=i=>{const a=i.target.files?.[0];a&&(r.icon_image=a,r.remove_icon_image=!1,v.value=URL.createObjectURL(a))},$=i=>{const a=i.target.files?.[0];a&&(r.category_image=a,r.remove_category_image=!1,x.value=URL.createObjectURL(a))},I=()=>{r.icon_image=null,r.remove_icon_image=!0,v.value=null;const i=document.getElementById("icon_image");i&&(i.value="")},B=()=>{r.category_image=null,r.remove_category_image=!0,x.value=null;const i=document.getElementById("category_image");i&&(i.value="")},L=()=>{r.transform(i=>({...i,_method:"PUT"})).post(`/admin/categories/${n.category.id}`,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{}})},b=()=>{D.visit("/admin/categories")};return(i,t)=>(m(),N(M,null,{default:l(()=>[s(e(R),{title:`编辑分类 - ${i.category.name}`},null,8,["title"]),o("div",X,[o("div",G,[o("div",H,[o("div",J,[o("div",K,[o("div",Q,[s(e(f),{variant:"outline",size:"icon",onClick:b},{default:l(()=>[s(e(T),{class:"h-4 w-4"})]),_:1}),t[10]||(t[10]=o("h1",{class:"text-2xl font-semibold"},"编辑分类",-1))])]),s(e(P),null,{default:l(()=>[s(e(F),null,{default:l(()=>[s(e(O),null,{default:l(()=>t[11]||(t[11]=[d("分类信息",-1)])),_:1,__:[11]}),s(e(A),null,{default:l(()=>t[12]||(t[12]=[d(" 编辑分类的基本信息和设置 ",-1)])),_:1,__:[12]})]),_:1}),s(e(q),null,{default:l(()=>[o("form",{onSubmit:S(L,["prevent"]),class:"space-y-6"},[o("div",W,[s(e(_),{for:"name"},{default:l(()=>t[13]||(t[13]=[d("分类名称 *",-1)])),_:1,__:[13]}),s(e(y),{id:"name",modelValue:e(r).name,"onUpdate:modelValue":t[0]||(t[0]=a=>e(r).name=a),type:"text",required:"",class:p({"border-red-500":e(r).errors.name})},null,8,["modelValue","class"]),e(r).errors.name?(m(),u("p",Y,c(e(r).errors.name),1)):g("",!0)]),o("div",Z,[s(e(_),{for:"slug"},{default:l(()=>t[14]||(t[14]=[d("别名 (URL) *",-1)])),_:1,__:[14]}),s(e(y),{id:"slug",modelValue:e(r).slug,"onUpdate:modelValue":t[1]||(t[1]=a=>e(r).slug=a),type:"text",required:"",placeholder:"category-slug",class:p({"border-red-500":e(r).errors.slug})},null,8,["modelValue","class"]),t[15]||(t[15]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," 用于URL的唯一标识符，只能包含小写字母、数字和连字符 ",-1)),e(r).errors.slug?(m(),u("p",ee,c(e(r).errors.slug),1)):g("",!0)]),o("div",te,[s(e(_),{for:"description"},{default:l(()=>t[16]||(t[16]=[d("描述",-1)])),_:1,__:[16]}),s(E,{id:"description",modelValue:e(r).description,"onUpdate:modelValue":t[2]||(t[2]=a=>e(r).description=a),rows:"3",placeholder:"分类描述...",class:p({"border-red-500":e(r).errors.description})},null,8,["modelValue","class"]),e(r).errors.description?(m(),u("p",re,c(e(r).errors.description),1)):g("",!0)]),o("div",oe,[o("div",se,[s(e(_),{for:"color"},{default:l(()=>t[17]||(t[17]=[d("颜色",-1)])),_:1,__:[17]}),o("div",ae,[s(e(y),{id:"color",modelValue:e(r).color,"onUpdate:modelValue":t[3]||(t[3]=a=>e(r).color=a),type:"color",class:p(["w-20 h-10 p-1 cursor-pointer",{"border-red-500":e(r).errors.color}])},null,8,["modelValue","class"]),s(e(y),{modelValue:e(r).color,"onUpdate:modelValue":t[4]||(t[4]=a=>e(r).color=a),type:"text",placeholder:"#3b82f6",class:p(["flex-1",{"border-red-500":e(r).errors.color}])},null,8,["modelValue","class"])]),e(r).errors.color?(m(),u("p",le,c(e(r).errors.color),1)):g("",!0)]),o("div",ie,[s(e(_),{for:"icon"},{default:l(()=>t[18]||(t[18]=[d("图标类名",-1)])),_:1,__:[18]}),s(e(y),{id:"icon",modelValue:e(r).icon,"onUpdate:modelValue":t[5]||(t[5]=a=>e(r).icon=a),type:"text",placeholder:"lucide-icon-name",class:p({"border-red-500":e(r).errors.icon})},null,8,["modelValue","class"]),t[19]||(t[19]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," 图标类名或标识符 ",-1)),e(r).errors.icon?(m(),u("p",de,c(e(r).errors.icon),1)):g("",!0)])]),o("div",ne,[s(e(_),{for:"icon_image"},{default:l(()=>t[20]||(t[20]=[d("图标图片",-1)])),_:1,__:[20]}),o("div",me,[v.value?(m(),u("div",ce,[o("img",{src:v.value,alt:"Icon preview",class:"w-24 h-24 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-700"},null,8,ue),s(e(f),{type:"button",variant:"destructive",size:"icon",class:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:I},{default:l(()=>[s(e(C),{class:"h-4 w-4"})]),_:1})])):g("",!0),o("div",ge,[s(e(y),{id:"icon_image",type:"file",accept:"image/*",onChange:h,class:p({"border-red-500":e(r).errors.icon_image})},null,8,["class"]),t[21]||(t[21]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," 推荐尺寸: 200x200px, 最大 2MB ",-1)),e(r).errors.icon_image?(m(),u("p",_e,c(e(r).errors.icon_image),1)):g("",!0)])])]),o("div",pe,[s(e(_),{for:"category_image"},{default:l(()=>t[22]||(t[22]=[d("分类封面图",-1)])),_:1,__:[22]}),o("div",ye,[x.value?(m(),u("div",fe,[o("img",{src:x.value,alt:"Category preview",class:"w-48 h-32 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-700"},null,8,ve),s(e(f),{type:"button",variant:"destructive",size:"icon",class:"absolute -top-2 -right-2 h-6 w-6 rounded-full",onClick:B},{default:l(()=>[s(e(C),{class:"h-4 w-4"})]),_:1})])):g("",!0),o("div",xe,[s(e(y),{id:"category_image",type:"file",accept:"image/*",onChange:$,class:p({"border-red-500":e(r).errors.category_image})},null,8,["class"]),t[23]||(t[23]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," 推荐尺寸: 800x600px, 最大 5MB ",-1)),e(r).errors.category_image?(m(),u("p",be,c(e(r).errors.category_image),1)):g("",!0)])])]),o("div",ke,[s(e(_),{for:"sort_order"},{default:l(()=>t[24]||(t[24]=[d("排序顺序",-1)])),_:1,__:[24]}),s(e(y),{id:"sort_order",modelValue:e(r).sort_order,"onUpdate:modelValue":t[6]||(t[6]=a=>e(r).sort_order=a),modelModifiers:{number:!0},type:"number",class:p({"border-red-500":e(r).errors.sort_order})},null,8,["modelValue","class"]),t[25]||(t[25]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," 数字越小排序越靠前 ",-1)),e(r).errors.sort_order?(m(),u("p",Ve,c(e(r).errors.sort_order),1)):g("",!0)]),o("div",we,[V(o("input",{id:"is_active","onUpdate:modelValue":t[7]||(t[7]=a=>e(r).is_active=a),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[w,e(r).is_active]]),s(e(_),{for:"is_active",class:"cursor-pointer"},{default:l(()=>t[26]||(t[26]=[d(" 启用分类 ",-1)])),_:1,__:[26]})]),o("div",Ce,[o("div",Ue,[V(o("input",{id:"is_nav_item","onUpdate:modelValue":t[8]||(t[8]=a=>e(r).is_nav_item=a),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[w,e(r).is_nav_item]]),s(e(_),{for:"is_nav_item",class:"cursor-pointer"},{default:l(()=>t[27]||(t[27]=[d(" 显示在导航菜单 ",-1)])),_:1,__:[27]})]),e(r).is_nav_item?(m(),u("div",he,[s(e(_),{for:"nav_route"},{default:l(()=>t[28]||(t[28]=[d("导航路由",-1)])),_:1,__:[28]}),s(e(y),{id:"nav_route",modelValue:e(r).nav_route,"onUpdate:modelValue":t[9]||(t[9]=a=>e(r).nav_route=a),type:"text",placeholder:"/category/slug",class:p({"border-red-500":e(r).errors.nav_route})},null,8,["modelValue","class"]),t[29]||(t[29]=o("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," 导航菜单中的链接地址 ",-1)),e(r).errors.nav_route?(m(),u("p",$e,c(e(r).errors.nav_route),1)):g("",!0)])):g("",!0)]),o("div",Ie,[t[31]||(t[31]=o("h3",{class:"text-sm font-medium mb-2"},"分类统计",-1)),o("div",Be,[o("p",null,[t[30]||(t[30]=d("关联帖子数: ",-1)),o("span",Le,c(i.category.posts_count),1)]),o("p",null,"创建时间: "+c(new Date(i.category.created_at).toLocaleString("zh-CN")),1),o("p",null,"更新时间: "+c(new Date(i.category.updated_at).toLocaleString("zh-CN")),1)])]),o("div",je,[s(e(f),{type:"submit",disabled:e(r).processing},{default:l(()=>[d(c(e(r).processing?"保存中...":"保存更改"),1)]),_:1},8,["disabled"]),s(e(f),{type:"button",variant:"outline",onClick:b},{default:l(()=>t[32]||(t[32]=[d(" 取消 ",-1)])),_:1,__:[32]})])],32)]),_:1})]),_:1})])])])])]),_:1}))}});export{at as default};
