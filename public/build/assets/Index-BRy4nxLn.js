import{d as A,r as y,c as n,o as a,w as S,a as w,b as e,e as o,h as E,i as g,j as i,k as _,m as O,p as P,q as $,t as l,f as p,F as T,s as U,n as B,y as j,l as C}from"./app-kob8CVRK.js";import{_ as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-BdQ8QA9l.js";import{C as D}from"./chevron-up-CfeshfP-.js";import{C as M}from"./chevron-down-CexOmhTm.js";import{C as X}from"./check-DGt3MJwf.js";import{X as G}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-B1Y7R2CB.js";import{S as J}from"./star-B5rwIVNo.js";import{S as Q}from"./star-off-7T3fnjQ0.js";import{T as R}from"./trash-2-BhbVHNto.js";import"./Primitive-BE7hyEE5.js";import"./useForwardExpose-C-dMyllY.js";import"./usePrimitiveElement-vQoX7tlz.js";import"./RovingFocusGroup-eP3yFYFc.js";import"./VisuallyHidden-Df262hPE.js";import"./index-CET7fbM1.js";import"./createLucideIcon-CW2CPC90.js";import"./DialogTitle-DWqGpV3s.js";import"./index-C5W0E7bH.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C16ycLJU.js";import"./shield-yL3bQPLl.js";import"./trending-up-DgoaXaT_.js";import"./file-text-CaGjPdGH.js";import"./chevron-right-0AUNV4YL.js";import"./index-CKFw0FL_.js";import"./useArrowNavigation-C6Y-ieo6.js";const Y={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},Z={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6"},ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},te={class:"mb-4 text-sm text-gray-600 dark:text-gray-400"},re={class:"bg-white dark:bg-gray-800 shadow overflow-hidden rounded-lg"},se={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ae={class:"bg-gray-50 dark:bg-gray-700"},oe={class:"flex items-center gap-1"},ie={class:"flex items-center gap-1"},le={class:"flex items-center gap-1"},de={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},ge={class:"px-6 py-4 whitespace-nowrap"},ue={class:"flex items-center gap-3"},pe=["src","alt"],me={key:1,class:"w-10 h-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center text-gray-600 dark:text-gray-300 font-semibold"},xe={class:"flex flex-col"},fe={class:"text-sm font-medium text-gray-900 dark:text-white"},ye={class:"text-sm text-gray-500 dark:text-gray-400"},ce={key:0,class:"text-xs text-gray-400"},ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},ke={class:"px-6 py-4 whitespace-nowrap"},be={class:"px-6 py-4 whitespace-nowrap text-sm"},he={class:"flex flex-col gap-1"},we={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},_e={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Se={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},$e={class:"flex items-center justify-end gap-2"},je=["onClick"],Ve=["onClick"],De=["onClick","title"],Me=["onClick"],Te={key:0,class:"mt-6"},Ue={class:"flex items-center justify-between"},Be={class:"flex-1 flex justify-between sm:hidden"},Fe={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ne={class:"text-sm text-gray-700 dark:text-gray-300"},ze={class:"font-medium"},Le={class:"font-medium"},He={class:"font-medium"},Ie={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},ut=A({__name:"Index",props:{creators:{},filters:{}},setup(F){const x=F,c=y(x.filters.search||""),v=y(x.filters.verification_status||""),k=y(x.filters.is_featured||""),b=y(x.filters.is_top_creator||""),u=y(x.filters.sort_by||"created_at"),d=y(x.filters.sort_direction||"desc"),h=y(x.filters.per_page||"20"),m=()=>{const s={};c.value&&(s.search=c.value),v.value&&(s.verification_status=v.value),k.value!==""&&(s.is_featured=k.value),b.value!==""&&(s.is_top_creator=b.value),u.value&&(s.sort_by=u.value),d.value&&(s.sort_direction=d.value),h.value&&(s.per_page=h.value),C.get("/admin/creators",s,{preserveState:!0,preserveScroll:!0})},N=()=>{c.value="",v.value="",k.value="",b.value="",u.value="created_at",d.value="desc",h.value="20",m()},V=s=>{u.value===s?d.value=d.value==="asc"?"desc":"asc":(u.value=s,d.value="desc"),m()},z=s=>{confirm("确定要验证此创作者吗？")&&C.post(`/admin/creators/${s}/verify`,{},{preserveScroll:!0})},L=s=>{const t=prompt("请输入拒绝原因：");t&&C.post(`/admin/creators/${s}/reject`,{verification_notes:t},{preserveScroll:!0})},H=s=>{C.post(`/admin/creators/${s}/toggle-featured`,{},{preserveScroll:!0})},I=s=>{confirm("确定要移除此用户的创作者身份吗？这将软删除其创作者资料。")&&C.delete(`/admin/creators/${s}`,{preserveScroll:!0})},K=s=>({pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",verified:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",rejected:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"})[s]||"bg-gray-100 text-gray-800",q=s=>new Date(s).toLocaleDateString("zh-CN");return(s,t)=>(a(),n(W,null,{default:S(()=>[w(o(E),{title:"创作者管理"}),e("div",Y,[t[31]||(t[31]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"创作者管理"),e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 管理所有创作者及其资料 ")],-1)),e("div",Z,[e("div",ee,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 搜索 ",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>c.value=r),type:"text",placeholder:"名称、邮箱、专长...",class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onKeyup:O(m,["enter"])},null,544),[[P,c.value]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 验证状态 ",-1)),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>v.value=r),onChange:m,class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[9]||(t[9]=[e("option",{value:""},"全部",-1),e("option",{value:"pending"},"待审核",-1),e("option",{value:"verified"},"已验证",-1),e("option",{value:"rejected"},"已拒绝",-1)]),544),[[$,v.value]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 精选状态 ",-1)),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>k.value=r),onChange:m,class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[11]||(t[11]=[e("option",{value:""},"全部",-1),e("option",{value:"1"},"精选",-1),e("option",{value:"0"},"非精选",-1)]),544),[[$,k.value]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 顶级创作者 ",-1)),_(e("select",{"onUpdate:modelValue":t[3]||(t[3]=r=>b.value=r),onChange:m,class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[13]||(t[13]=[e("option",{value:""},"全部",-1),e("option",{value:"1"},"是",-1),e("option",{value:"0"},"否",-1)]),544),[[$,b.value]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 每页显示 ",-1)),_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>h.value=r),onChange:m,class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[15]||(t[15]=[e("option",{value:"10"},"10",-1),e("option",{value:"20"},"20",-1),e("option",{value:"50"},"50",-1),e("option",{value:"100"},"100",-1)]),544),[[$,h.value]])])]),e("div",{class:"mt-4 flex gap-2"},[e("button",{onClick:m,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"}," 应用筛选 "),e("button",{onClick:N,class:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500"}," 清除筛选 ")])]),e("div",te," 显示 "+l(s.creators.total)+" 个创作者中的 "+l(s.creators.data.length)+" 个 ",1),e("div",re,[e("table",se,[e("thead",ae,[e("tr",null,[e("th",{onClick:t[5]||(t[5]=r=>V("id")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"},[e("div",oe,[t[17]||(t[17]=p(" ID ",-1)),u.value==="id"&&d.value==="asc"?(a(),n(o(D),{key:0,class:"h-4 w-4"})):i("",!0),u.value==="id"&&d.value==="desc"?(a(),n(o(M),{key:1,class:"h-4 w-4"})):i("",!0)])]),t[20]||(t[20]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 创作者信息 ",-1)),e("th",{onClick:t[6]||(t[6]=r=>V("follower_count")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"},[e("div",ie,[t[18]||(t[18]=p(" 粉丝数 ",-1)),u.value==="follower_count"&&d.value==="asc"?(a(),n(o(D),{key:0,class:"h-4 w-4"})):i("",!0),u.value==="follower_count"&&d.value==="desc"?(a(),n(o(M),{key:1,class:"h-4 w-4"})):i("",!0)])]),t[21]||(t[21]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 验证状态 ",-1)),t[22]||(t[22]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 标签 ",-1)),e("th",{onClick:t[7]||(t[7]=r=>V("created_at")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"},[e("div",le,[t[19]||(t[19]=p(" 创建时间 ",-1)),u.value==="created_at"&&d.value==="asc"?(a(),n(o(D),{key:0,class:"h-4 w-4"})):i("",!0),u.value==="created_at"&&d.value==="desc"?(a(),n(o(M),{key:1,class:"h-4 w-4"})):i("",!0)])]),t[23]||(t[23]=e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 操作 ",-1))])]),e("tbody",de,[(a(!0),g(T,null,U(s.creators.data,r=>(a(),g("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",ne,l(r.id),1),e("td",ge,[e("div",ue,[r.avatar?(a(),g("img",{key:0,src:r.avatar.startsWith("http")?r.avatar:`/storage/${r.avatar}`,alt:r.name,class:"w-10 h-10 rounded-full object-cover"},null,8,pe)):(a(),g("div",me,l((r.creator_profile?.display_name||r.name).charAt(0).toUpperCase()),1)),e("div",xe,[e("div",fe,l(r.creator_profile?.display_name||r.name),1),e("div",ye,l(r.email),1),r.creator_profile?.specialty?(a(),g("div",ce,l(r.creator_profile.specialty),1)):i("",!0)])])]),e("td",ve,l(r.creator_profile?.follower_count||0),1),e("td",ke,[r.creator_profile?(a(),g("span",{key:0,class:B([K(r.creator_profile.verification_status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},l(r.creator_profile.verification_status==="pending"?"待审核":"")+" "+l(r.creator_profile.verification_status==="verified"?"已验证":"")+" "+l(r.creator_profile.verification_status==="rejected"?"已拒绝":""),3)):i("",!0)]),e("td",be,[e("div",he,[r.is_top_creator?(a(),g("span",we," 顶级创作者 ")):i("",!0),r.creator_profile?.is_featured?(a(),g("span",_e," 精选 ")):i("",!0)])]),e("td",Ce,l(q(r.created_at)),1),e("td",Se,[e("div",$e,[w(o(j),{href:`/admin/creators/${r.id}`,class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},{default:S(()=>t[24]||(t[24]=[p(" 查看 ",-1)])),_:2,__:[24]},1032,["href"]),r.creator_profile?.verification_status==="pending"?(a(),g("button",{key:0,onClick:f=>z(r.id),class:"text-green-600 hover:text-green-900 dark:text-green-400",title:"验证"},[w(o(X),{class:"h-4 w-4"})],8,je)):i("",!0),r.creator_profile?.verification_status==="pending"?(a(),g("button",{key:1,onClick:f=>L(r.id),class:"text-red-600 hover:text-red-900 dark:text-red-400",title:"拒绝"},[w(o(G),{class:"h-4 w-4"})],8,Ve)):i("",!0),e("button",{onClick:f=>H(r.id),class:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400",title:r.creator_profile?.is_featured?"取消精选":"设为精选"},[r.creator_profile?.is_featured?(a(),n(o(Q),{key:1,class:"h-4 w-4"})):(a(),n(o(J),{key:0,class:"h-4 w-4"}))],8,De),e("button",{onClick:f=>I(r.id),class:"text-red-600 hover:text-red-900 dark:text-red-400",title:"移除创作者身份"},[w(o(R),{class:"h-4 w-4"})],8,Me)])])]))),128))])])]),s.creators.links.length>3?(a(),g("div",Te,[e("nav",Ue,[e("div",Be,[s.creators.links[0].url?(a(),n(o(j),{key:0,href:s.creators.links[0].url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"},{default:S(()=>t[25]||(t[25]=[p(" 上一页 ",-1)])),_:1,__:[25]},8,["href"])):i("",!0),s.creators.links[s.creators.links.length-1].url?(a(),n(o(j),{key:1,href:s.creators.links[s.creators.links.length-1].url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"},{default:S(()=>t[26]||(t[26]=[p(" 下一页 ",-1)])),_:1,__:[26]},8,["href"])):i("",!0)]),e("div",Fe,[e("div",null,[e("p",Ne,[t[27]||(t[27]=p(" 显示 ",-1)),e("span",ze,l((s.creators.current_page-1)*s.creators.per_page+1),1),t[28]||(t[28]=p(" 到 ",-1)),e("span",Le,l(Math.min(s.creators.current_page*s.creators.per_page,s.creators.total)),1),t[29]||(t[29]=p(" 共 ",-1)),e("span",He,l(s.creators.total),1),t[30]||(t[30]=p(" 个结果 ",-1))])]),e("div",null,[e("nav",Ie,[(a(!0),g(T,null,U(s.creators.links,(r,f)=>(a(),n(o(j),{key:f,href:r.url||"#",class:B(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",r.active?"z-10 bg-indigo-50 dark:bg-indigo-900 border-indigo-500 text-indigo-600 dark:text-indigo-300":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700",f===0?"rounded-l-md":"",f===s.creators.links.length-1?"rounded-r-md":"",r.url?"":"cursor-not-allowed opacity-50"]),innerHTML:r.label},null,8,["href","class","innerHTML"]))),128))])])])])])):i("",!0)])]),_:1}))}});export{ut as default};
