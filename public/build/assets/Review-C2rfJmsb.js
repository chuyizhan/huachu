import{d as X,z as q,r as G,i as c,o as u,a as t,e,h as H,w as s,b as i,f as n,t as d,c as m,j as v,F as y,s as z,n as J,l as p}from"./app-BftH3T70.js";import{_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-h2tK87RC.js";import{_ as g}from"./index-BiMAF9T8.js";import{_ as h,a as x}from"./CardContent.vue_vue_type_script_setup_true_lang-CdphTVkZ.js";import{_ as b}from"./CardHeader.vue_vue_type_script_setup_true_lang-CmHuJBuv.js";import{_ as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-A97dnsrJ.js";import{_ as B}from"./index-BWpgm7yY.js";import{_ as M,a as Q,b as N,c as f,d as U,e as _}from"./TableRow.vue_vue_type_script_setup_true_lang-65nWQPM9.js";import{_ as W,a as Y,b as $}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-BztIJX6E.js";import{C as Z}from"./clock-DanDcyK9.js";import{C as P}from"./circle-check-big-Bd6SS3CF.js";import{C as V}from"./circle-x-DnEioV1f.js";import{E as I}from"./eye-B5uq-BRU.js";import"./Primitive-DN6HJjFU.js";import"./useForwardExpose-DJDGFTSi.js";import"./usePrimitiveElement-CZFpCf5P.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-Bxao1L3d.js";import"./createLucideIcon-JizK6MQU.js";import"./RovingFocusGroup-CqrbLCj3.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./VisuallyHidden-T84jKtDP.js";import"./index-bnhk9dBX.js";import"./DialogTitle-DYl0csw4.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-B6YsOck1.js";import"./shield-BLaWVYmq.js";import"./file-text-iy-Xa5pA.js";import"./trending-up-BR4a28Qr.js";import"./book-open-DYffuGYx.js";import"./chevron-right-DA06PRTZ.js";import"./RovingFocusItem-C28BQ0R2.js";const ee={class:"space-y-6"},te={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},se={class:"text-2xl font-bold text-white"},ae={class:"text-2xl font-bold text-white"},le={class:"text-2xl font-bold text-white"},re={class:"flex items-center justify-between"},ie={key:0,class:"rounded-md border border-[#2a2a2a]"},ne=["checked"],oe=["checked","onChange"],de={class:"flex items-center gap-3"},ue=["src"],ce={class:"font-medium text-white"},fe={class:"text-xs text-[#999999]"},_e={class:"text-white"},me={class:"text-xs text-[#999999]"},ve={class:"text-sm text-[#999999]"},pe={key:0,class:"text-sm"},ge={class:"text-white"},we={class:"text-xs text-[#999999]"},he={key:1,class:"text-sm text-[#999999]"},xe={class:"flex gap-2"},be={key:1,class:"text-center py-12"},ke={key:2,class:"flex justify-center gap-2 mt-4"},et=X({__name:"Review",props:{posts:{},stats:{},currentStatus:{}},setup(D){const S=D;q();const o=G([]);function k(l){p.get(route("admin.post-reviews.index"),{status:l},{preserveState:!0,preserveScroll:!0})}function E(l){p.get(route("admin.post-reviews.show",l))}function A(l){confirm("确认批准这个帖子？")&&p.post(route("admin.post-reviews.approve",l),{},{preserveScroll:!0,onSuccess:()=>{o.value=o.value.filter(a=>a!==l)}})}function F(l){const a=prompt("请输入拒绝原因：");a&&p.post(route("admin.post-reviews.reject",l),{notes:a},{preserveScroll:!0,onSuccess:()=>{o.value=o.value.filter(r=>r!==l)}})}function L(){if(o.value.length===0){alert("请选择要批准的帖子");return}confirm(`确认批准 ${o.value.length} 个帖子？`)&&p.post(route("admin.post-reviews.batch-approve"),{post_ids:o.value},{preserveScroll:!0,onSuccess:()=>{o.value=[]}})}function O(l){const a=o.value.indexOf(l);a>-1?o.value.splice(a,1):o.value.push(l)}function R(){o.value.length===S.posts.data.length?o.value=[]:o.value=S.posts.data.map(l=>l.id)}function T(l){switch(l){case"pending":return"bg-yellow-500";case"approved":return"bg-green-500";case"rejected":return"bg-red-500";default:return"bg-gray-500"}}function j(l){return l?new Date(l).toLocaleString("zh-CN"):"-"}return(l,a)=>(u(),c(y,null,[t(e(H),{title:"帖子审核管理"}),t(K,null,{default:s(()=>[i("div",ee,[a[15]||(a[15]=i("div",null,[i("h1",{class:"text-3xl font-bold text-white"},"帖子审核管理"),i("p",{class:"text-[#999999] mt-2"},"审核和管理用户提交的帖子")],-1)),i("div",te,[t(e(h),{class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:s(()=>[t(e(b),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(C),{class:"text-sm font-medium text-white"},{default:s(()=>a[3]||(a[3]=[n("待审核",-1)])),_:1,__:[3]}),t(e(Z),{class:"h-4 w-4 text-yellow-500"})]),_:1}),t(e(x),null,{default:s(()=>[i("div",se,d(l.stats.pending),1)]),_:1})]),_:1}),t(e(h),{class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:s(()=>[t(e(b),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(C),{class:"text-sm font-medium text-white"},{default:s(()=>a[4]||(a[4]=[n("已批准",-1)])),_:1,__:[4]}),t(e(P),{class:"h-4 w-4 text-green-500"})]),_:1}),t(e(x),null,{default:s(()=>[i("div",ae,d(l.stats.approved),1)]),_:1})]),_:1}),t(e(h),{class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:s(()=>[t(e(b),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[t(e(C),{class:"text-sm font-medium text-white"},{default:s(()=>a[5]||(a[5]=[n("已拒绝",-1)])),_:1,__:[5]}),t(e(V),{class:"h-4 w-4 text-red-500"})]),_:1}),t(e(x),null,{default:s(()=>[i("div",le,d(l.stats.rejected),1)]),_:1})]),_:1})]),t(e(h),{class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:s(()=>[t(e(b),null,{default:s(()=>[i("div",re,[t(e(W),{"model-value":l.currentStatus,class:"w-full"},{default:s(()=>[t(e(Y),{class:"bg-[#2a2a2a]"},{default:s(()=>[t(e($),{value:"pending",onClick:a[0]||(a[0]=r=>k("pending"))},{default:s(()=>[n(" 待审核 ("+d(l.stats.pending)+") ",1)]),_:1}),t(e($),{value:"approved",onClick:a[1]||(a[1]=r=>k("approved"))},{default:s(()=>[n(" 已批准 ("+d(l.stats.approved)+") ",1)]),_:1}),t(e($),{value:"rejected",onClick:a[2]||(a[2]=r=>k("rejected"))},{default:s(()=>[n(" 已拒绝 ("+d(l.stats.rejected)+") ",1)]),_:1})]),_:1})]),_:1},8,["model-value"]),l.currentStatus==="pending"&&o.value.length>0?(u(),m(e(g),{key:0,onClick:L,class:"ml-4 bg-green-600 hover:bg-green-700"},{default:s(()=>[n(" 批量批准 ("+d(o.value.length)+") ",1)]),_:1})):v("",!0)])]),_:1}),t(e(x),null,{default:s(()=>[l.posts.data.length>0?(u(),c("div",ie,[t(e(M),null,{default:s(()=>[t(e(Q),null,{default:s(()=>[t(e(N),{class:"border-[#2a2a2a] hover:bg-[#2a2a2a]/50"},{default:s(()=>[l.currentStatus==="pending"?(u(),m(e(f),{key:0,class:"w-12"},{default:s(()=>[i("input",{type:"checkbox",checked:o.value.length===l.posts.data.length,onChange:R,class:"rounded border-gray-300"},null,40,ne)]),_:1})):v("",!0),t(e(f),{class:"text-white"},{default:s(()=>a[6]||(a[6]=[n("帖子",-1)])),_:1,__:[6]}),t(e(f),{class:"text-white"},{default:s(()=>a[7]||(a[7]=[n("作者",-1)])),_:1,__:[7]}),t(e(f),{class:"text-white"},{default:s(()=>a[8]||(a[8]=[n("分类",-1)])),_:1,__:[8]}),t(e(f),{class:"text-white"},{default:s(()=>a[9]||(a[9]=[n("媒体",-1)])),_:1,__:[9]}),t(e(f),{class:"text-white"},{default:s(()=>a[10]||(a[10]=[n("状态",-1)])),_:1,__:[10]}),t(e(f),{class:"text-white"},{default:s(()=>a[11]||(a[11]=[n("审核信息",-1)])),_:1,__:[11]}),t(e(f),{class:"text-white"},{default:s(()=>a[12]||(a[12]=[n("操作",-1)])),_:1,__:[12]})]),_:1})]),_:1}),t(e(U),null,{default:s(()=>[(u(!0),c(y,null,z(l.posts.data,r=>(u(),m(e(N),{key:r.id,class:"border-[#2a2a2a] hover:bg-[#2a2a2a]/50"},{default:s(()=>[l.currentStatus==="pending"?(u(),m(e(_),{key:0},{default:s(()=>[i("input",{type:"checkbox",checked:o.value.includes(r.id),onChange:w=>O(r.id),class:"rounded border-gray-300"},null,40,oe)]),_:2},1024)):v("",!0),t(e(_),null,{default:s(()=>[i("div",de,[r.first_image?(u(),c("img",{key:0,src:r.first_image,alt:"",class:"w-16 h-16 object-cover rounded"},null,8,ue)):v("",!0),i("div",null,[i("div",ce,d(r.title),1),i("div",fe,d(j(r.created_at)),1)])])]),_:2},1024),t(e(_),null,{default:s(()=>[i("div",_e,d(r.user.name),1),i("div",me,d(r.user.email),1)]),_:2},1024),t(e(_),null,{default:s(()=>[t(e(B),{variant:"outline",class:"text-white border-[#2a2a2a]"},{default:s(()=>[n(d(r.category.name),1)]),_:2},1024)]),_:2},1024),t(e(_),null,{default:s(()=>[i("div",ve,[n(d(r.images_count)+" 图片 ",1),a[13]||(a[13]=i("br",null,null,-1)),n(" "+d(r.videos_count)+" 视频 ",1)])]),_:2},1024),t(e(_),null,{default:s(()=>[t(e(B),{class:J(T(r.review_status))},{default:s(()=>[n(d(r.review_status==="pending"?"待审核":r.review_status==="approved"?"已批准":"已拒绝"),1)]),_:2},1032,["class"])]),_:2},1024),t(e(_),null,{default:s(()=>[r.reviewer?(u(),c("div",pe,[i("div",ge,d(r.reviewer.name),1),i("div",we,d(j(r.reviewed_at)),1)])):(u(),c("div",he,"-"))]),_:2},1024),t(e(_),null,{default:s(()=>[i("div",xe,[t(e(g),{size:"sm",variant:"outline",onClick:w=>E(r.id),class:"border-[#2a2a2a] text-white hover:bg-[#2a2a2a]"},{default:s(()=>[t(e(I),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),r.review_status==="pending"?(u(),m(e(g),{key:0,size:"sm",onClick:w=>A(r.id),class:"bg-green-600 hover:bg-green-700"},{default:s(()=>[t(e(P),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):v("",!0),r.review_status==="pending"?(u(),m(e(g),{key:1,size:"sm",variant:"destructive",onClick:w=>F(r.id)},{default:s(()=>[t(e(V),{class:"h-4 w-4"})]),_:2},1032,["onClick"])):v("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(u(),c("div",be,a[14]||(a[14]=[i("p",{class:"text-[#999999]"},"没有找到帖子",-1)]))),l.posts.last_page>1?(u(),c("div",ke,[(u(!0),c(y,null,z(l.posts.last_page,r=>(u(),m(e(g),{key:r,size:"sm",variant:r===l.posts.current_page?"default":"outline",onClick:w=>e(p).get(l.route("admin.post-reviews.index"),{status:l.currentStatus,page:r}),class:"border-[#2a2a2a]"},{default:s(()=>[n(d(r),1)]),_:2},1032,["variant","onClick"]))),128))])):v("",!0)]),_:1})]),_:1})])]),_:1})],64))}});export{et as default};
