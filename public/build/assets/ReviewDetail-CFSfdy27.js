import{d as I,r as j,i as p,o as d,a as e,e as t,h as L,w as a,b as o,f as r,t as i,n as A,c as w,j as m,F as h,s as $,l as v}from"./app-kob8CVRK.js";import{_ as P}from"./AppLayout.vue_vue_type_script_setup_true_lang-BdQ8QA9l.js";import{_ as x}from"./index-CKFw0FL_.js";import{_,a as f}from"./CardContent.vue_vue_type_script_setup_true_lang-CiR0AURR.js";import{_ as c}from"./CardHeader.vue_vue_type_script_setup_true_lang-ClevN_XI.js";import{_ as g}from"./CardTitle.vue_vue_type_script_setup_true_lang-BobXNG0R.js";import{_ as V}from"./index-BA9zYvjA.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-Cry2wXHN.js";import{_ as B}from"./Textarea.vue_vue_type_script_setup_true_lang-C8jYMLCo.js";import{A as q}from"./arrow-left-wTdxeIp2.js";import{I as E,V as M}from"./video-BPzBs3Be.js";import{U as T}from"./user-DbSs4ckc.js";import{R as X}from"./rotate-ccw-Cxww8ZwT.js";import{C as G}from"./circle-check-big-CNJWJkaP.js";import{C as H}from"./circle-x-b_FhS5IV.js";import"./Primitive-BE7hyEE5.js";import"./useForwardExpose-C-dMyllY.js";import"./usePrimitiveElement-vQoX7tlz.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-B1Y7R2CB.js";import"./createLucideIcon-CW2CPC90.js";import"./RovingFocusGroup-eP3yFYFc.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./VisuallyHidden-Df262hPE.js";import"./index-CET7fbM1.js";import"./DialogTitle-DWqGpV3s.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-C16ycLJU.js";import"./shield-yL3bQPLl.js";import"./trending-up-DgoaXaT_.js";import"./file-text-CaGjPdGH.js";import"./chevron-right-0AUNV4YL.js";const J={class:"space-y-6"},K={class:"flex items-center justify-between"},O={class:"flex items-center gap-4"},Q={class:"text-[#999999] mt-1"},W={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Y={class:"lg:col-span-2 space-y-6"},Z={class:"text-white mt-2"},tt={key:0},et={class:"text-[#999999] mt-2"},st={key:1},at={class:"text-[#999999] mt-2 whitespace-pre-wrap"},lt={key:2},ot={class:"flex flex-wrap gap-2 mt-2"},rt={class:"grid grid-cols-2 md:grid-cols-3 gap-4"},it=["src","alt"],dt=["src"],nt={class:"text-xs text-[#999999] mt-2"},ut={class:"text-[#999999]"},pt={class:"space-y-6"},mt={class:"flex items-center gap-2"},_t={class:"text-white"},ft={class:"text-xs text-[#999999]"},ct={key:0,class:"pt-2 border-t border-[#2a2a2a]"},gt={class:"text-white"},vt={class:"text-white mt-1"},wt={class:"text-white mt-1 text-sm"},bt={key:0},ht={class:"text-white mt-1 text-sm"},xt={class:"text-white mt-1"},yt={class:"text-white mt-1 text-sm"},kt={class:"border-t border-[#2a2a2a] pt-4"},ee=I({__name:"ReviewDetail",props:{post:{}},setup(N){const y=N,b=j(""),k=j("");function S(){v.get("/admin/post-reviews")}function z(){confirm("确认批准这个帖子？")&&v.post(`/admin/post-reviews/${y.post.id}/approve`,{notes:k.value||null},{onSuccess:()=>{v.get("/admin/post-reviews",{status:"approved"})}})}function D(){if(!b.value.trim()){alert("请输入拒绝原因");return}confirm("确认拒绝这个帖子？")&&v.post(`/admin/post-reviews/${y.post.id}/reject`,{notes:b.value},{onSuccess:()=>{v.get("/admin/post-reviews",{status:"rejected"})}})}function F(){confirm("确认重置审核状态？")&&v.post(`/admin/post-reviews/${y.post.id}/reset`,{},{onSuccess:()=>{v.get("/admin/post-reviews",{status:"pending"})}})}function R(l){switch(l){case"pending":return"bg-yellow-500";case"approved":return"bg-green-500";case"rejected":return"bg-red-500";default:return"bg-gray-500"}}function C(l){return l?new Date(l).toLocaleString("zh-CN"):"-"}function U(l){return(l/1048576).toFixed(2)+" MB"}return(l,s)=>(d(),p(h,null,[e(t(L),{title:`审核: ${l.post.title}`},null,8,["title"]),e(P,null,{default:a(()=>[o("div",J,[o("div",K,[o("div",O,[e(t(x),{variant:"outline",size:"sm",onClick:S,class:"border-gray-500 text-gray-800 hover:bg-gray-100"},{default:a(()=>[e(t(q),{class:"h-4 w-4 mr-2"}),s[2]||(s[2]=r(" 返回列表 ",-1))]),_:1,__:[2]}),o("div",null,[s[3]||(s[3]=o("h1",{class:"text-2xl font-bold text-white"},"审核帖子",-1)),o("p",Q,i(l.post.title),1)])]),e(t(V),{class:A([R(l.post.review_status),"text-base px-4 py-2"])},{default:a(()=>[r(i(l.post.review_status==="pending"?"待审核":l.post.review_status==="approved"?"已批准":"已拒绝"),1)]),_:1},8,["class"])]),o("div",W,[o("div",Y,[e(t(_),{class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(c),null,{default:a(()=>[e(t(g),{class:"text-white"},{default:a(()=>s[4]||(s[4]=[r("帖子内容",-1)])),_:1,__:[4]})]),_:1}),e(t(f),{class:"space-y-4"},{default:a(()=>[o("div",null,[e(t(u),{class:"text-white"},{default:a(()=>s[5]||(s[5]=[r("标题",-1)])),_:1,__:[5]}),o("p",Z,i(l.post.title),1)]),l.post.excerpt?(d(),p("div",tt,[e(t(u),{class:"text-white"},{default:a(()=>s[6]||(s[6]=[r("摘要",-1)])),_:1,__:[6]}),o("p",et,i(l.post.excerpt),1)])):m("",!0),l.post.content?(d(),p("div",st,[e(t(u),{class:"text-white"},{default:a(()=>s[7]||(s[7]=[r("内容",-1)])),_:1,__:[7]}),o("div",at,i(l.post.content),1)])):m("",!0),l.post.tags&&l.post.tags.length>0?(d(),p("div",lt,[e(t(u),{class:"text-white"},{default:a(()=>s[8]||(s[8]=[r("标签",-1)])),_:1,__:[8]}),o("div",ot,[(d(!0),p(h,null,$(l.post.tags,n=>(d(),w(t(V),{key:n,variant:"outline",class:"border-[#2a2a2a] text-white"},{default:a(()=>[r(i(n),1)]),_:2},1024))),128))])])):m("",!0)]),_:1})]),_:1}),l.post.image_urls&&l.post.image_urls.length>0?(d(),w(t(_),{key:0,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(c),null,{default:a(()=>[e(t(g),{class:"text-white flex items-center gap-2"},{default:a(()=>[e(t(E),{class:"h-5 w-5"}),r(" 图片 ("+i(l.post.image_urls.length)+") ",1)]),_:1})]),_:1}),e(t(f),null,{default:a(()=>[o("div",rt,[(d(!0),p(h,null,$(l.post.image_urls,n=>(d(),p("img",{key:n.id,src:n.url,alt:`Image ${n.id}`,class:"w-full h-48 object-cover rounded-lg"},null,8,it))),128))])]),_:1})]),_:1})):m("",!0),l.post.video_urls&&l.post.video_urls.length>0?(d(),w(t(_),{key:1,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(c),null,{default:a(()=>[e(t(g),{class:"text-white flex items-center gap-2"},{default:a(()=>[e(t(M),{class:"h-5 w-5"}),r(" 视频 ("+i(l.post.video_urls.length)+") ",1)]),_:1})]),_:1}),e(t(f),{class:"space-y-4"},{default:a(()=>[(d(!0),p(h,null,$(l.post.video_urls,n=>(d(),p("div",{key:n.id},[o("video",{src:n.url,controls:"",class:"w-full rounded-lg"},null,8,dt),o("p",nt,i(n.name)+" ("+i(U(n.size))+") ",1)]))),128))]),_:1})]),_:1})):m("",!0),l.post.review_notes?(d(),w(t(_),{key:2,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(c),null,{default:a(()=>[e(t(g),{class:"text-white"},{default:a(()=>s[9]||(s[9]=[r("审核备注",-1)])),_:1,__:[9]})]),_:1}),e(t(f),null,{default:a(()=>[o("p",ut,i(l.post.review_notes),1)]),_:1})]),_:1})):m("",!0)]),o("div",pt,[e(t(_),{class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(c),null,{default:a(()=>[e(t(g),{class:"text-white"},{default:a(()=>s[10]||(s[10]=[r("作者信息",-1)])),_:1,__:[10]})]),_:1}),e(t(f),{class:"space-y-3"},{default:a(()=>[o("div",mt,[e(t(T),{class:"h-4 w-4 text-[#999999]"}),o("div",null,[o("p",_t,i(l.post.user.name),1),o("p",ft,i(l.post.user.email),1)])]),l.post.user.creator_profile?(d(),p("div",ct,[s[11]||(s[11]=o("p",{class:"text-xs text-[#999999]"},"创作者",-1)),o("p",gt,i(l.post.user.creator_profile.display_name),1)])):m("",!0)]),_:1})]),_:1}),e(t(_),{class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(c),null,{default:a(()=>[e(t(g),{class:"text-white"},{default:a(()=>s[12]||(s[12]=[r("帖子信息",-1)])),_:1,__:[12]})]),_:1}),e(t(f),{class:"space-y-3"},{default:a(()=>[o("div",null,[e(t(u),{class:"text-[#999999]"},{default:a(()=>s[13]||(s[13]=[r("分类",-1)])),_:1,__:[13]}),e(t(V),{variant:"outline",class:"mt-1 border-[#2a2a2a] text-white"},{default:a(()=>[r(i(l.post.category.name),1)]),_:1})]),o("div",null,[e(t(u),{class:"text-[#999999]"},{default:a(()=>s[14]||(s[14]=[r("类型",-1)])),_:1,__:[14]}),o("p",vt,i(l.post.type),1)]),o("div",null,[e(t(u),{class:"text-[#999999]"},{default:a(()=>s[15]||(s[15]=[r("创建时间",-1)])),_:1,__:[15]}),o("p",wt,i(C(l.post.created_at)),1)]),l.post.published_at?(d(),p("div",bt,[e(t(u),{class:"text-[#999999]"},{default:a(()=>s[16]||(s[16]=[r("发布时间",-1)])),_:1,__:[16]}),o("p",ht,i(C(l.post.published_at)),1)])):m("",!0)]),_:1})]),_:1}),l.post.reviewer?(d(),w(t(_),{key:0,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(c),null,{default:a(()=>[e(t(g),{class:"text-white"},{default:a(()=>s[17]||(s[17]=[r("审核信息",-1)])),_:1,__:[17]})]),_:1}),e(t(f),{class:"space-y-3"},{default:a(()=>[o("div",null,[e(t(u),{class:"text-[#999999]"},{default:a(()=>s[18]||(s[18]=[r("审核员",-1)])),_:1,__:[18]}),o("p",xt,i(l.post.reviewer.name),1)]),o("div",null,[e(t(u),{class:"text-[#999999]"},{default:a(()=>s[19]||(s[19]=[r("审核时间",-1)])),_:1,__:[19]}),o("p",yt,i(C(l.post.reviewed_at)),1)]),e(t(x),{size:"sm",variant:"outline",onClick:F,class:"w-full border-[#2a2a2a] text-white hover:bg-[#2a2a2a]"},{default:a(()=>[e(t(X),{class:"h-4 w-4 mr-2"}),s[20]||(s[20]=r(" 重置审核 ",-1))]),_:1,__:[20]})]),_:1})]),_:1})):m("",!0),l.post.review_status==="pending"?(d(),w(t(_),{key:1,class:"bg-[#1c1c1c] border-[#2a2a2a]"},{default:a(()=>[e(t(c),null,{default:a(()=>[e(t(g),{class:"text-white"},{default:a(()=>s[21]||(s[21]=[r("审核操作",-1)])),_:1,__:[21]})]),_:1}),e(t(f),{class:"space-y-4"},{default:a(()=>[o("div",null,[e(t(u),{class:"text-white"},{default:a(()=>s[22]||(s[22]=[r("批准备注 (可选)",-1)])),_:1,__:[22]}),e(t(B),{modelValue:k.value,"onUpdate:modelValue":s[0]||(s[0]=n=>k.value=n),placeholder:"添加批准备注...",class:"mt-2 bg-[#2a2a2a] border-[#3a3a3a] text-white"},null,8,["modelValue"]),e(t(x),{onClick:z,class:"w-full mt-2 bg-green-600 hover:bg-green-700"},{default:a(()=>[e(t(G),{class:"h-4 w-4 mr-2"}),s[23]||(s[23]=r(" 批准帖子 ",-1))]),_:1,__:[23]})]),o("div",kt,[e(t(u),{class:"text-white"},{default:a(()=>s[24]||(s[24]=[r("拒绝原因 *",-1)])),_:1,__:[24]}),e(t(B),{modelValue:b.value,"onUpdate:modelValue":s[1]||(s[1]=n=>b.value=n),placeholder:"请输入拒绝原因...",class:"mt-2 bg-[#2a2a2a] border-[#3a3a3a] text-white",required:""},null,8,["modelValue"]),e(t(x),{onClick:D,variant:"destructive",class:"w-full mt-2"},{default:a(()=>[e(t(H),{class:"h-4 w-4 mr-2"}),s[25]||(s[25]=r(" 拒绝帖子 ",-1))]),_:1,__:[25]})])]),_:1})]),_:1})):m("",!0)])])])]),_:1})],64))}});export{ee as default};
