import{u as H,c as T,e as J,g as Q,b as U,a as j}from"./usePrimitiveElement-CXGw7jPB.js";import{P as R,c as S}from"./Primitive-BW_SQ9Qt.js";import{d as w,H as L,E as m,r as W,C as z,c as I,o as B,w as E,A as k,a as X,e as l,G as $,J as Y,Q as Z,m as N,K as ee}from"./app-B1sr-vjY.js";import{b as te,u as ae,g as F}from"./useForwardExpose-DgMRZxVS.js";import{u as le}from"./useArrowNavigation-C6Y-ieo6.js";import{V as oe}from"./VisuallyHiddenInput-CkLb-Nmy.js";import{q as se}from"./index-C5W0E7bH.js";const[re,ne]=T("PinInputRoot");var ue=w({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:""},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","complete"],setup(o,{emit:s}){const t=o,r=s,{mask:d,otp:p,placeholder:y,type:M,disabled:g,dir:b}=L(t),{forwardRef:A}=te(),_=H(b),c=ae(t,"modelValue",r,{defaultValue:t.defaultValue??[],passive:t.modelValue===void 0}),P=m(()=>Array.isArray(c.value)?[...c.value]:[]),h=W(new Set);function D(u){h.value.add(u)}const C=m(()=>t.type==="number"),V=m(()=>P.value.filter(v=>!!v||C.value&&v===0).length===h.value.size);return z(c,()=>{V.value&&r("complete",c.value)},{deep:!0}),ne({modelValue:c,currentModelValue:P,mask:d,otp:p,placeholder:y,type:M,dir:_,disabled:g,isCompleted:V,inputElements:h,onInputElementChange:D,isNumericMode:C}),(u,v)=>(B(),I(l(R),$(u.$attrs,{ref:l(A),dir:l(_),"data-complete":V.value?"":void 0,"data-disabled":l(g)?"":void 0}),{default:E(()=>[k(u.$slots,"default",{modelValue:l(c)}),X(oe,{id:u.id,as:"input",feature:"focusable",tabindex:"-1",value:P.value.join(""),name:u.name??"",disabled:l(g),required:u.required,onFocus:v[0]||(v[0]=x=>Array.from(h.value)?.[0]?.focus())},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),ie=ue,de=w({__name:"PinInputInput",props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(o){const s=o,t=re(),r=m(()=>Array.from(t.inputElements.value)),d=m(()=>t.currentModelValue.value[s.index]),p=m(()=>s.disabled||t.disabled.value),y=m(()=>t.otp.value),M=m(()=>t.mask.value),{primitiveElement:g,currentElement:b}=J();function A(e){const a=e.target;if((e.data?.length??0)>1){u(a.value);return}if(t.isNumericMode.value&&!/^\d*$/.test(a.value)){a.value=a.value.replace(/\D/g,"");return}a.value=e.data??"",x(s.index,a.value);const n=r.value[s.index+1];n&&n.focus()}function _(){const e=b.value;ee(()=>{e&&!e.value&&(e.placeholder=t.placeholder.value)})}function c(e){le(e,Q(),void 0,{itemsArray:r.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:t.dir.value})}function P(e){if(e.preventDefault(),e.target.value)x(s.index,"");else{const f=r.value[s.index-1];f&&(f.focus(),x(s.index-1,""))}}function h(e){e.key==="Delete"&&(e.preventDefault(),x(s.index,""))}function D(e){const a=e.target;a.setSelectionRange(1,1),a.value||(a.placeholder="")}function C(e){_()}function V(e){e.preventDefault();const a=e.clipboardData;if(!a)return;const n=a.getData("text");u(n)}function u(e){const a=[...t.currentModelValue.value],n=e.length>=r.value.length?0:s.index,f=Math.min(n+e.length,r.value.length);for(let q=n;q<f;q++){const G=r.value[q],K=e[q-n];t.isNumericMode.value&&!/^\d*$/.test(K)||(a[q]=K,G.focus())}t.modelValue.value=a,r.value[f]?.focus()}function v(e){let a=e.length-1;for(;a>=0&&e[a]==="";)e.pop(),a--;return e}function x(e,a){const n=[...t.currentModelValue.value];if(t.isNumericMode.value){const f=+a;a===""||isNaN(f)?delete n[e]:n[e]=f}else n[e]=a;t.modelValue.value=v(n)}return z(d,()=>{d.value||_()}),Y(()=>{t.onInputElementChange(b.value)}),Z(()=>{t.inputElements?.value.delete(b.value)}),(e,a)=>(B(),I(l(R),{ref_key:"primitiveElement",ref:g,autocapitalize:"none",as:e.as,"as-child":e.asChild,autocomplete:y.value?"one-time-code":"false",type:M.value?"password":"text",inputmode:l(t).isNumericMode.value?"numeric":"text",pattern:l(t).isNumericMode.value?"[0-9]*":void 0,placeholder:l(t).placeholder.value,value:d.value,disabled:p.value,"data-disabled":p.value?"":void 0,"data-complete":l(t).isCompleted.value?"":void 0,"aria-label":`pin input ${e.index+1} of ${r.value.length}`,onInput:a[0]||(a[0]=n=>A(n)),onKeydown:[N(c,["left","right","up","down","home","end"]),N(P,["backspace"]),N(h,["delete"])],onFocus:D,onBlur:C,onPaste:V},{default:E(()=>[k(e.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),pe=de;const be=w({__name:"PinInput",props:{modelValue:{default:()=>[]},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","complete"],setup(o,{emit:s}){const t=o,r=s,d=F(t,"class"),p=U(d,r);return(y,M)=>(B(),I(l(ie),$({"data-slot":"pin-input"},l(p),{class:l(S)("flex items-center gap-2 has-disabled:opacity-50 disabled:cursor-not-allowed",t.class)}),{default:E(()=>[k(y.$slots,"default")]),_:3},16,["class"]))}}),_e=w({__name:"PinInputGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(o){const s=o,t=F(s,"class"),r=j(t);return(d,p)=>(B(),I(l(R),$({"data-slot":"pin-input-group"},l(r),{class:l(S)("flex items-center",s.class)}),{default:E(()=>[k(d.$slots,"default")]),_:3},16,["class"]))}}),Pe=w({__name:"PinInputSlot",props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(o){const s=o,t=F(s,"class"),r=j(t);return(d,p)=>(B(),I(l(pe),$({"data-slot":"pin-input-slot"},l(r),{class:l(S)("border-input focus:border-ring focus:ring-ring/50 focus:aria-invalid:ring-destructive/20 dark:bg-input/30 dark:focus:aria-invalid:ring-destructive/40 aria-invalid:border-destructive focus:aria-invalid:border-destructive relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none text-center first:rounded-l-md first:border-l last:rounded-r-md focus:z-10 focus:ring-[3px]",s.class)}),null,16,["class"]))}}),i=o=>({url:i.url(o),method:"post"});i.definition={methods:["post"],url:"/two-factor-challenge"};i.url=o=>i.definition.url+se(o);i.post=o=>({url:i.url(o),method:"post"});const O=o=>({action:i.url(o),method:"post"});O.post=o=>({action:i.url(o),method:"post"});i.form=O;const Ve={store:Object.assign(i,i)};export{be as _,_e as a,Pe as b,Ve as l,i as s};
