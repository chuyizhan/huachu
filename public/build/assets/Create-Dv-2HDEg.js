import{d as H,O as Q,C as F,u as Y,l as g,c as k,o as r,w as a,a as s,b as o,e,h as Z,t as c,f as n,n as M,k as L,i as u,F as P,s as z,q as ee,p as te,j as p,m as se}from"./app-BETQiwqg.js";import{_ as le}from"./WebLayout.vue_vue_type_script_setup_true_lang-BIzmzsC0.js";import{_ as B}from"./index-Duwfxx78.js";import{_,a as b}from"./CardContent.vue_vue_type_script_setup_true_lang-Djh1tsNH.js";import{_ as x}from"./CardHeader.vue_vue_type_script_setup_true_lang-CNtrsFE9.js";import{_ as v}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bt8OarDa.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-DYryupaK.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-DHvux2zt.js";import{_ as T}from"./index-i5wPWGnz.js";import{_ as y}from"./InputError.vue_vue_type_script_setup_true_lang-Ch0N7MgG.js";import{v as oe,p as ae,a as ie,b as re,c as ne,d as de,e as ue,I as ce,V as pe,S as fe,f as me}from"./filepond-plugin-image-transform.esm-DiPP0Jin.js";import{F as ge}from"./file-text-BuBNjKsB.js";import{X as R}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-BBvIv1xU.js";import{T as _e}from"./tag-CTigb-Uo.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-D2VZ7Emd.js";import"./createLucideIcon-Dm9OGRec.js";import"./heart-DBJWm2Fl.js";import"./user-DHUveTfn.js";import"./Primitive-BebQ2KfK.js";import"./index-CaneM7sD.js";import"./useForwardExpose-BsGZtkGj.js";import"./usePrimitiveElement-BdkFn2vI.js";import"./RovingFocusGroup-BcgjwcAp.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";const be={class:"min-h-screen py-8"},xe={class:"max-w-4xl mx-auto px-4"},ve={class:"mb-8"},ye={class:"text-[#999999]"},we={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},he={class:"lg:col-span-2 space-y-6"},ke=["value"],Be={class:"mt-2"},Ve={key:0,class:"mt-2"},$e={class:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-[#4B5563] rounded-lg cursor-pointer hover:border-[#ff6e02] transition-colors bg-[#1c1c1c]"},Ce={class:"flex flex-col items-center justify-center pt-5 pb-6"},Ue={key:1,class:"mt-2"},Fe={class:"relative bg-[#1c1c1c] rounded-lg overflow-hidden"},Me=["src"],Pe={class:"text-xs text-[#999999] mt-1"},ze={class:"flex gap-2 mb-3"},Te={key:0,class:"flex flex-wrap gap-2"},je=["onClick"],Se={class:"space-y-6"},Le={key:0,class:"space-y-4"},Re={key:0},Ie={class:"space-y-2 pt-4 border-t border-[#4B5563]"},Ne={key:0,class:"flex items-center gap-2"},Oe={class:"text-lg"},qe={key:1,class:"text-white font-medium"},De={key:2,class:"flex items-center gap-2"},Ge={class:"text-sm text-[#999999]"},We={key:3,class:"text-sm text-[#999999] line-clamp-3"},Ke={key:4,class:"flex flex-wrap gap-1"},Ee={key:0,class:"text-xs text-[#999999]"},vt=H({__name:"Create",props:{categories:{}},setup(I){const N=oe(ue,de,ne,re,ie,ae),O=I,q=Q(),D=F(()=>q.props.auth?.user?.is_creator||!1),l=Y({title:"",content:"",post_category_id:"",type:"showcase",excerpt:"",images:[],video:null,videos:[],tags:[],is_premium:!1,price:null,free_after:null,status:"draft"}),w=g("");g("");const $=g(null),C=g(null),f=g(null),G=[{value:"discussion",label:"è®¨è®º",icon:"ğŸ’¬",description:"åˆ†äº«æƒ³æ³•å’Œè§‚ç‚¹"},{value:"tutorial",label:"æ•™ç¨‹",icon:"ğŸ“–",description:"åˆ†äº«çŸ¥è¯†å’ŒæŠ€èƒ½"},{value:"showcase",label:"å±•ç¤º",icon:"ğŸ¨",description:"å±•ç¤ºä½ çš„ä½œå“"},{value:"question",label:"é—®é¢˜",icon:"â“",description:"å¯»æ±‚å¸®åŠ©å’Œå»ºè®®"}],U=F(()=>O.categories.find(d=>d.id.toString()===l.post_category_id)),h=F(()=>G.find(d=>d.value===l.type));function j(){const d=w.value.trim();d&&!l.tags.includes(d)&&(l.tags.push(d),w.value="")}function W(d){l.tags.splice(d,1)}function K(){if($.value){const d=$.value.getFiles();l.images=d.map(t=>t.file)}}function E(d){const i=d.target.files?.[0];if(i){if(i.size>100*1024*1024){alert("è§†é¢‘æ–‡ä»¶å¤ªå¤§ï¼æœ€å¤§æ”¯æŒ100MB");return}if(!i.type.startsWith("video/")){alert("è¯·ä¸Šä¼ æœ‰æ•ˆçš„è§†é¢‘æ–‡ä»¶");return}l.video=i,f.value&&URL.revokeObjectURL(f.value),f.value=URL.createObjectURL(i)}}function J(){l.video=null,f.value&&(URL.revokeObjectURL(f.value),f.value=null),C.value&&(C.value.value="")}function X(){l.status="draft",l.post("/posts",{onSuccess:()=>{}})}function A(){l.status="published",l.post("/posts",{onSuccess:()=>{}})}return(d,t)=>(r(),k(le,null,{default:a(()=>[s(e(Z),{title:"åˆ›å»ºæ–°å¸–å­"}),o("div",be,[o("div",xe,[o("div",ve,[t[6]||(t[6]=o("h1",{class:"text-3xl font-bold text-white mb-2"},"åˆ›å»ºæ–°å¸–å­",-1)),o("p",ye,"åˆ†äº«ä½ çš„æƒ³æ³•ã€ç»éªŒæˆ–é—®é¢˜ç»™"+c(d.$page.props.name),1)]),o("div",we,[o("div",he,[s(e(_),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[s(e(x),null,{default:a(()=>[s(e(v),{class:"text-white flex items-center gap-2"},{default:a(()=>[s(e(ge),{class:"h-5 w-5"}),t[7]||(t[7]=n(" åŸºæœ¬ä¿¡æ¯ ",-1))]),_:1,__:[7]})]),_:1}),s(e(b),{class:"space-y-4"},{default:a(()=>[o("div",null,[s(e(m),{for:"title",class:"text-white"},{default:a(()=>t[8]||(t[8]=[n("æ ‡é¢˜ *",-1)])),_:1,__:[8]}),s(e(V),{id:"title",modelValue:e(l).title,"onUpdate:modelValue":t[0]||(t[0]=i=>e(l).title=i),placeholder:"è¾“å…¥å¸–å­æ ‡é¢˜...",class:M(["mt-1 bg-[#1c1c1c] border-[#4B5563] text-white placeholder:text-[#999999]",{"border-red-500":e(l).errors.title}])},null,8,["modelValue","class"]),s(y,{message:e(l).errors.title,class:"mt-1"},null,8,["message"])]),o("div",null,[s(e(m),{class:"text-white"},{default:a(()=>t[9]||(t[9]=[n("åˆ†ç±» *",-1)])),_:1,__:[9]}),L(o("select",{"onUpdate:modelValue":t[1]||(t[1]=i=>e(l).post_category_id=i),class:M(["mt-1 w-full bg-[#1c1c1c] border border-[#4B5563] text-white rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#ff6e02] focus:border-[#ff6e02]",{"border-red-500":e(l).errors.post_category_id}])},[t[10]||(t[10]=o("option",{value:"",class:"text-[#999999]"},"é€‰æ‹©åˆ†ç±»",-1)),(r(!0),u(P,null,z(d.categories,i=>(r(),u("option",{key:i.id,value:i.id.toString(),class:"bg-[#1c1c1c] text-white"},c(i.name),9,ke))),128))],2),[[ee,e(l).post_category_id]]),s(y,{message:e(l).errors.post_category_id,class:"mt-1"},null,8,["message"])]),o("div",null,[s(e(m),{for:"content",class:"text-white"},{default:a(()=>t[11]||(t[11]=[n("å†…å®¹ *",-1)])),_:1,__:[11]}),L(o("textarea",{id:"content","onUpdate:modelValue":t[2]||(t[2]=i=>e(l).content=i),placeholder:"å†™ä¸‹ä½ çš„å†…å®¹...",rows:"12",class:M(["mt-1 w-full bg-[#1c1c1c] border border-[#4B5563] text-white placeholder:text-[#999999] rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#ff6e02] focus:border-[#ff6e02] resize-y",{"border-red-500":e(l).errors.content}])},null,2),[[te,e(l).content]]),s(y,{message:e(l).errors.content,class:"mt-1"},null,8,["message"])])]),_:1})]),_:1}),s(e(_),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[s(e(x),null,{default:a(()=>[s(e(v),{class:"text-white flex items-center gap-2"},{default:a(()=>[s(e(ce),{class:"h-5 w-5"}),t[12]||(t[12]=n(" åª’ä½“å†…å®¹ ",-1))]),_:1,__:[12]})]),_:1}),s(e(b),{class:"space-y-4"},{default:a(()=>[o("div",null,[s(e(m),{class:"text-white"},{default:a(()=>t[13]||(t[13]=[n("å›¾ç‰‡ (æœ€å¤š12å¼ )",-1)])),_:1,__:[13]}),o("div",Be,[s(e(N),{ref_key:"pond",ref:$,name:"images","allow-multiple":!0,"max-files":12,"accepted-file-types":"image/jpeg, image/jpg, image/png, image/gif, image/webp","max-file-size":"5MB","label-idle":"æ‹–æ”¾å›¾ç‰‡æˆ– <span class='filepond--label-action'>æµè§ˆ</span>","label-file-loading":"åŠ è½½ä¸­","label-file-processing":"ä¸Šä¼ ä¸­","label-tap-to-cancel":"ç‚¹å‡»å–æ¶ˆ","label-tap-to-retry":"ç‚¹å‡»é‡è¯•","label-tap-to-undo":"ç‚¹å‡»æ’¤é”€","image-resize-target-width":1200,"image-resize-target-height":900,"image-resize-mode":"contain","image-resize-upscale":"false","image-transform-output-quality":85,"image-transform-output-quality-mode":"always",onUpdatefiles:K,"style-panel-layout":"compact","style-load-indicator-position":"center bottom","style-progress-indicator-position":"right bottom","style-button-remove-item-position":"left bottom","style-button-process-item-position":"right bottom"},null,512)]),t[14]||(t[14]=o("p",{class:"text-xs text-[#999999] mt-2"},"æ”¯æŒ JPG, PNG, GIF, WebPï¼Œå•å¼ æœ€å¤§5MBã€‚å›¾ç‰‡å°†è‡ªåŠ¨ä¼˜åŒ–ã€‚",-1)),s(y,{message:e(l).errors.images,class:"mt-1"},null,8,["message"])]),o("div",null,[s(e(m),{class:"text-white"},{default:a(()=>t[15]||(t[15]=[n("è§†é¢‘ (å¯é€‰)",-1)])),_:1,__:[15]}),f.value?p("",!0):(r(),u("div",Ve,[o("label",$e,[o("div",Ce,[s(e(pe),{class:"w-10 h-10 mb-3 text-[#999999]"}),t[16]||(t[16]=o("p",{class:"mb-2 text-sm text-[#999999]"},[o("span",{class:"font-semibold text-[#ff6e02]"},"ç‚¹å‡»ä¸Šä¼ è§†é¢‘")],-1)),t[17]||(t[17]=o("p",{class:"text-xs text-[#999999]"},"æ”¯æŒ MP4, WebM, MOV (æœ€å¤§100MB)",-1))]),o("input",{ref_key:"videoInput",ref:C,type:"file",class:"hidden",accept:"video/*",onChange:E},null,544)])])),f.value?(r(),u("div",Ue,[o("div",Fe,[o("video",{src:f.value,controls:"",class:"w-full max-h-64 object-contain"},null,8,Me),s(e(B),{type:"button",size:"sm",variant:"ghost",onClick:J,class:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white"},{default:a(()=>[s(e(R),{class:"h-4 w-4"})]),_:1})]),o("p",Pe,c(e(l).video?.name)+" ("+c((e(l).video?.size/1024/1024).toFixed(2))+"MB) ",1)])):p("",!0),s(y,{message:e(l).errors.video,class:"mt-1"},null,8,["message"])])]),_:1})]),_:1}),s(e(_),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[s(e(x),null,{default:a(()=>[s(e(v),{class:"text-white flex items-center gap-2"},{default:a(()=>[s(e(_e),{class:"h-5 w-5"}),t[18]||(t[18]=n(" æ ‡ç­¾ ",-1))]),_:1,__:[18]})]),_:1}),s(e(b),null,{default:a(()=>[o("div",ze,[s(e(V),{modelValue:w.value,"onUpdate:modelValue":t[3]||(t[3]=i=>w.value=i),placeholder:"è¾“å…¥æ ‡ç­¾...",class:"bg-[#1c1c1c] border-[#4B5563] text-white placeholder:text-[#999999]",onKeyup:se(j,["enter"])},null,8,["modelValue"]),s(e(B),{type:"button",onClick:j,class:"bg-[#ff6e02] hover:bg-[#e55a00] text-white"},{default:a(()=>t[19]||(t[19]=[n(" æ·»åŠ  ",-1)])),_:1,__:[19]})]),e(l).tags.length>0?(r(),u("div",Te,[(r(!0),u(P,null,z(e(l).tags,(i,S)=>(r(),k(e(T),{key:S,class:"bg-[#ff6e02]/20 text-[#ff6e02] border-[#ff6e02]/30"},{default:a(()=>[n(c(i)+" ",1),o("button",{type:"button",onClick:Je=>W(S),class:"ml-1 hover:text-red-300"},[s(e(R),{class:"h-3 w-3"})],8,je)]),_:2},1024))),128))])):p("",!0)]),_:1})]),_:1})]),o("div",Se,[s(e(_),{class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[s(e(x),null,{default:a(()=>[s(e(v),{class:"text-white"},{default:a(()=>t[20]||(t[20]=[n("å‘å¸ƒè®¾ç½®",-1)])),_:1,__:[20]})]),_:1}),s(e(b),{class:"space-y-4"},{default:a(()=>[D.value?(r(),u("div",Le,[o("div",null,[s(e(m),{for:"price",class:"text-white flex items-center gap-2"},{default:a(()=>t[21]||(t[21]=[n(" ğŸ’° å†…å®¹å®šä»· ",-1)])),_:1,__:[21]}),t[22]||(t[22]=o("p",{class:"text-xs text-[#999999] mb-2"},"è®¾ç½®ç”¨æˆ·éœ€è¦æ”¯ä»˜çš„ç§¯åˆ†æ•°é‡æ‰èƒ½æŸ¥çœ‹æ­¤å¸–å­",-1)),s(e(V),{id:"price",modelValue:e(l).price,"onUpdate:modelValue":t[4]||(t[4]=i=>e(l).price=i),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",placeholder:"0 = å…è´¹",class:"bg-[#1c1c1c] border-[#4B5563] text-white placeholder:text-[#999999]"},null,8,["modelValue"]),t[23]||(t[23]=o("p",{class:"text-xs text-[#999999] mt-1"},"ç•™ç©ºæˆ–è¾“å…¥0è¡¨ç¤ºå…è´¹",-1))]),e(l).price&&e(l).price>0?(r(),u("div",Re,[s(e(m),{for:"free_after",class:"text-white flex items-center gap-2"},{default:a(()=>t[24]||(t[24]=[n(" â° å…è´¹å¼€æ”¾æ—¶é—´ ",-1)])),_:1,__:[24]}),t[25]||(t[25]=o("p",{class:"text-xs text-[#999999] mb-2"},"è®¾ç½®è¯¥æ—¥æœŸåæ­¤å†…å®¹å°†è‡ªåŠ¨å˜ä¸ºå…è´¹",-1)),s(e(V),{id:"free_after",modelValue:e(l).free_after,"onUpdate:modelValue":t[5]||(t[5]=i=>e(l).free_after=i),type:"datetime-local",class:"bg-[#1c1c1c] border-[#4B5563] text-white"},null,8,["modelValue"]),t[26]||(t[26]=o("p",{class:"text-xs text-[#999999] mt-1"},"å¯é€‰ï¼šç•™ç©ºè¡¨ç¤ºæ°¸ä¹…æ”¶è´¹",-1))])):p("",!0)])):p("",!0),o("div",Ie,[s(e(B),{type:"button",onClick:X,disabled:e(l).processing,class:"w-full bg-[#4B5563] hover:bg-[#6B7280] text-white"},{default:a(()=>[s(e(fe),{class:"h-4 w-4 mr-2"}),n(" "+c(e(l).processing?"ä¿å­˜ä¸­...":"ä¿å­˜è‰ç¨¿"),1)]),_:1},8,["disabled"]),s(e(B),{type:"button",onClick:A,disabled:e(l).processing,class:"w-full bg-[#ff6e02] hover:bg-[#e55a00] text-white"},{default:a(()=>[s(e(me),{class:"h-4 w-4 mr-2"}),n(" "+c(e(l).processing?"å‘å¸ƒä¸­...":"ç«‹å³å‘å¸ƒ"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),e(l).title||U.value||h.value?(r(),k(e(_),{key:0,class:"bg-[#374151] border-[#4B5563]"},{default:a(()=>[s(e(x),null,{default:a(()=>[s(e(v),{class:"text-white"},{default:a(()=>t[27]||(t[27]=[n("é¢„è§ˆ",-1)])),_:1,__:[27]})]),_:1}),s(e(b),{class:"space-y-3"},{default:a(()=>[h.value?(r(),u("div",Ne,[o("span",Oe,c(h.value.icon),1),s(e(T),{class:"bg-[#ff6e02]/20 text-[#ff6e02] border-[#ff6e02]/30"},{default:a(()=>[n(c(h.value.label),1)]),_:1})])):p("",!0),e(l).title?(r(),u("h3",qe,c(e(l).title),1)):p("",!0),U.value?(r(),u("div",De,[t[28]||(t[28]=o("div",{class:"w-3 h-3 rounded-full bg-[#ff6e02]"},null,-1)),o("span",Ge,c(U.value.name),1)])):p("",!0),e(l).excerpt?(r(),u("p",We,c(e(l).excerpt),1)):p("",!0),e(l).tags.length>0?(r(),u("div",Ke,[(r(!0),u(P,null,z(e(l).tags.slice(0,3),i=>(r(),k(e(T),{key:i,class:"text-xs bg-[#1c1c1c] text-[#999999]"},{default:a(()=>[n(" #"+c(i),1)]),_:2},1024))),128)),e(l).tags.length>3?(r(),u("span",Ee," +"+c(e(l).tags.length-3)+" more ",1)):p("",!0)])):p("",!0)]),_:1})]),_:1})):p("",!0)])])])])]),_:1}))}});export{vt as default};
