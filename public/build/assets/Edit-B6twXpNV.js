import{d as $,u as C,c as L,o as p,w as l,a as o,b as s,e,h as N,f as i,g as S,i as u,j as _,n as g,t as a,k as y,F as q,s as B,q as b,v as k,l as D}from"./app-KFEODeFH.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cda_Z6GP.js";import{_ as c}from"./index-CzUa1E86.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-mdOD5vBF.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-u4bG-yIF.js";import{_ as V}from"./Textarea.vue_vue_type_script_setup_true_lang-B-myQSM4.js";import{_ as M,a as F}from"./CardContent.vue_vue_type_script_setup_true_lang-CAxbpNHo.js";import{_ as T}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bp0Mdsyf.js";import{_ as j}from"./CardHeader.vue_vue_type_script_setup_true_lang-CiMeWi0H.js";import{_ as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-DdARYuiX.js";import{A as E}from"./arrow-left-Dy8dCGzc.js";import"./Primitive-BJP5LoXZ.js";import"./useForwardExpose-BNwhN2Hl.js";import"./usePrimitiveElement-CE7j_lkG.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-BfNWuLBY.js";import"./createLucideIcon-Dl1dhQhq.js";import"./RovingFocusGroup-SZlu1p1J.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-C5W0E7bH.js";import"./VisuallyHidden-BJ0L5TPQ.js";import"./index-BieuuCCp.js";import"./DialogTitle-DaBw-h7N.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-CukCHI5b.js";import"./shield-BxfqG8EW.js";import"./trending-up-Bvtl8mCZ.js";import"./file-text-Wwh469JO.js";import"./chevron-right-DSaglwEj.js";const R={class:"py-12"},I={class:"w-full sm:px-6 lg:px-8"},G={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},H={class:"p-6 text-gray-900 dark:text-gray-100"},J={class:"mb-6 flex items-center justify-between"},K={class:"flex items-center gap-4"},O={class:"space-y-4"},P={class:"space-y-2"},Q={key:0,class:"text-sm text-red-500"},W={class:"space-y-2"},X={key:0,class:"text-sm text-red-500"},Y={class:"space-y-2"},Z=["value"],h={key:0,class:"text-sm text-red-500"},tt={class:"space-y-2"},et={key:0,class:"text-sm text-red-500"},st={class:"space-y-2"},rt={key:0,class:"text-sm text-red-500"},ot={class:"space-y-4 pt-6 border-t"},dt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},lt={class:"space-y-2"},it={key:0,class:"text-sm text-red-500"},at={class:"space-y-2"},nt={key:0,class:"text-sm text-red-500"},pt={class:"space-y-4"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},mt={class:"space-y-2"},ft={key:0,class:"text-sm text-red-500"},_t={class:"space-y-2"},gt={key:0,class:"text-sm text-red-500"},yt={class:"space-y-4 pt-4"},xt={class:"flex items-center space-x-2"},bt={class:"flex items-center space-x-2"},ct={class:"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg"},vt={class:"text-sm text-gray-600 dark:text-gray-400 space-y-1"},kt={class:"font-semibold"},Vt={class:"font-semibold"},wt={class:"font-semibold"},Ut={class:"font-semibold"},$t={class:"flex gap-4"},ht=$({__name:"Edit",props:{post:{},categories:{}},setup(w){const n=w,r=C({title:n.post.title,slug:n.post.slug,post_category_id:n.post.post_category_id,excerpt:n.post.excerpt||"",content:n.post.content,type:n.post.type,status:n.post.status,is_featured:n.post.is_featured,is_premium:n.post.is_premium,price:n.post.price||"",free_after:n.post.free_after?n.post.free_after.split("T")[0]:"",published_at:n.post.published_at?n.post.published_at.split("T")[0]:""}),U=()=>{r.put(`/admin/posts/${n.post.id}`,{preserveScroll:!0})},v=()=>{D.visit("/admin/posts")};return(f,t)=>(p(),L(z,null,{default:l(()=>[o(e(N),{title:`编辑帖子 - ${f.post.title}`},null,8,["title"]),s("div",R,[s("div",I,[s("div",G,[s("div",H,[s("div",J,[s("div",K,[o(e(c),{variant:"outline",size:"icon",onClick:v},{default:l(()=>[o(e(E),{class:"h-4 w-4"})]),_:1}),t[11]||(t[11]=s("h1",{class:"text-2xl font-semibold"},"编辑帖子",-1))])]),o(e(M),null,{default:l(()=>[o(e(j),null,{default:l(()=>[o(e(A),null,{default:l(()=>t[12]||(t[12]=[i("帖子信息",-1)])),_:1,__:[12]}),o(e(T),null,{default:l(()=>t[13]||(t[13]=[i(" 编辑帖子的详细内容和设置 ",-1)])),_:1,__:[13]})]),_:1}),o(e(F),null,{default:l(()=>[s("form",{onSubmit:S(U,["prevent"]),class:"space-y-6"},[s("div",O,[t[21]||(t[21]=s("h3",{class:"text-lg font-medium"},"基本信息",-1)),s("div",P,[o(e(m),{for:"title"},{default:l(()=>t[14]||(t[14]=[i("标题 *",-1)])),_:1,__:[14]}),o(e(x),{id:"title",modelValue:e(r).title,"onUpdate:modelValue":t[0]||(t[0]=d=>e(r).title=d),type:"text",required:"",class:g({"border-red-500":e(r).errors.title})},null,8,["modelValue","class"]),e(r).errors.title?(p(),u("p",Q,a(e(r).errors.title),1)):_("",!0)]),s("div",W,[o(e(m),{for:"slug"},{default:l(()=>t[15]||(t[15]=[i("别名 (URL) *",-1)])),_:1,__:[15]}),o(e(x),{id:"slug",modelValue:e(r).slug,"onUpdate:modelValue":t[1]||(t[1]=d=>e(r).slug=d),type:"text",required:"",class:g({"border-red-500":e(r).errors.slug})},null,8,["modelValue","class"]),t[16]||(t[16]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," 用于URL的唯一标识符 ",-1)),e(r).errors.slug?(p(),u("p",X,a(e(r).errors.slug),1)):_("",!0)]),s("div",Y,[o(e(m),{for:"post_category_id"},{default:l(()=>t[17]||(t[17]=[i("分类 *",-1)])),_:1,__:[17]}),y(s("select",{id:"post_category_id","onUpdate:modelValue":t[2]||(t[2]=d=>e(r).post_category_id=d),required:"",class:g(["w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":e(r).errors.post_category_id}])},[t[18]||(t[18]=s("option",{value:""},"选择分类",-1)),(p(!0),u(q,null,B(f.categories,d=>(p(),u("option",{key:d.id,value:d.id},a(d.name),9,Z))),128))],2),[[b,e(r).post_category_id,void 0,{number:!0}]]),e(r).errors.post_category_id?(p(),u("p",h,a(e(r).errors.post_category_id),1)):_("",!0)]),s("div",tt,[o(e(m),{for:"excerpt"},{default:l(()=>t[19]||(t[19]=[i("摘要",-1)])),_:1,__:[19]}),o(V,{id:"excerpt",modelValue:e(r).excerpt,"onUpdate:modelValue":t[3]||(t[3]=d=>e(r).excerpt=d),rows:"2",placeholder:"简短的帖子描述...",class:g({"border-red-500":e(r).errors.excerpt})},null,8,["modelValue","class"]),e(r).errors.excerpt?(p(),u("p",et,a(e(r).errors.excerpt),1)):_("",!0)]),s("div",st,[o(e(m),{for:"content"},{default:l(()=>t[20]||(t[20]=[i("内容 *",-1)])),_:1,__:[20]}),o(V,{id:"content",modelValue:e(r).content,"onUpdate:modelValue":t[4]||(t[4]=d=>e(r).content=d),rows:"10",required:"",placeholder:"帖子的完整内容...",class:g({"border-red-500":e(r).errors.content})},null,8,["modelValue","class"]),e(r).errors.content?(p(),u("p",rt,a(e(r).errors.content),1)):_("",!0)])]),s("div",ot,[t[36]||(t[36]=s("h3",{class:"text-lg font-medium"},"帖子设置",-1)),s("div",dt,[s("div",lt,[o(e(m),{for:"type"},{default:l(()=>t[22]||(t[22]=[i("类型",-1)])),_:1,__:[22]}),y(s("select",{id:"type","onUpdate:modelValue":t[5]||(t[5]=d=>e(r).type=d),class:g(["w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":e(r).errors.type}])},t[23]||(t[23]=[s("option",{value:"article"},"文章",-1),s("option",{value:"video"},"视频",-1),s("option",{value:"image"},"图片",-1)]),2),[[b,e(r).type]]),e(r).errors.type?(p(),u("p",it,a(e(r).errors.type),1)):_("",!0)]),s("div",at,[o(e(m),{for:"status"},{default:l(()=>t[24]||(t[24]=[i("状态",-1)])),_:1,__:[24]}),y(s("select",{id:"status","onUpdate:modelValue":t[6]||(t[6]=d=>e(r).status=d),class:g(["w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-500":e(r).errors.status}])},t[25]||(t[25]=[s("option",{value:"draft"},"草稿",-1),s("option",{value:"published"},"已发布",-1),s("option",{value:"archived"},"已归档",-1)]),2),[[b,e(r).status]]),e(r).errors.status?(p(),u("p",nt,a(e(r).errors.status),1)):_("",!0)])]),s("div",pt,[t[30]||(t[30]=s("h4",{class:"text-md font-medium"},"付费设置",-1)),s("div",ut,[s("div",mt,[o(e(m),{for:"price"},{default:l(()=>t[26]||(t[26]=[i("价格 (积分)",-1)])),_:1,__:[26]}),o(e(x),{id:"price",modelValue:e(r).price,"onUpdate:modelValue":t[7]||(t[7]=d=>e(r).price=d),modelModifiers:{number:!0},type:"number",step:"0.01",min:"0",placeholder:"0 = 免费",class:g({"border-red-500":e(r).errors.price})},null,8,["modelValue","class"]),t[27]||(t[27]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," 设置为0或留空表示免费 ",-1)),e(r).errors.price?(p(),u("p",ft,a(e(r).errors.price),1)):_("",!0)]),s("div",_t,[o(e(m),{for:"free_after"},{default:l(()=>t[28]||(t[28]=[i("免费开放日期",-1)])),_:1,__:[28]}),o(e(x),{id:"free_after",modelValue:e(r).free_after,"onUpdate:modelValue":t[8]||(t[8]=d=>e(r).free_after=d),type:"date",class:g({"border-red-500":e(r).errors.free_after})},null,8,["modelValue","class"]),t[29]||(t[29]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400"}," 此日期后付费内容将变为免费 ",-1)),e(r).errors.free_after?(p(),u("p",gt,a(e(r).errors.free_after),1)):_("",!0)])])]),s("div",yt,[t[33]||(t[33]=s("h4",{class:"text-md font-medium"},"标记",-1)),s("div",xt,[y(s("input",{id:"is_featured","onUpdate:modelValue":t[9]||(t[9]=d=>e(r).is_featured=d),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[k,e(r).is_featured]]),o(e(m),{for:"is_featured",class:"cursor-pointer"},{default:l(()=>t[31]||(t[31]=[i(" 精选帖子 ",-1)])),_:1,__:[31]})]),t[34]||(t[34]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400 pl-6"}," 在首页和特殊位置展示 ",-1)),s("div",bt,[y(s("input",{id:"is_premium","onUpdate:modelValue":t[10]||(t[10]=d=>e(r).is_premium=d),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,512),[[k,e(r).is_premium]]),o(e(m),{for:"is_premium",class:"cursor-pointer"},{default:l(()=>t[32]||(t[32]=[i(" 会员专享 ",-1)])),_:1,__:[32]})]),t[35]||(t[35]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400 pl-6"}," 仅会员可访问 ",-1))])]),s("div",ct,[t[41]||(t[41]=s("h3",{class:"text-sm font-medium mb-2"},"帖子信息",-1)),s("div",vt,[s("p",null,[t[37]||(t[37]=i("帖子ID: ",-1)),s("span",kt,a(f.post.id),1)]),s("p",null,[t[38]||(t[38]=i("作者: ",-1)),s("span",Vt,a(f.post.user.name)+" (@"+a(f.post.user.login_name)+")",1)]),s("p",null,[t[39]||(t[39]=i("浏览量: ",-1)),s("span",wt,a(f.post.view_count),1)]),s("p",null,[t[40]||(t[40]=i("点赞数: ",-1)),s("span",Ut,a(f.post.like_count),1)]),s("p",null,"创建时间: "+a(new Date(f.post.created_at).toLocaleString("zh-CN")),1),s("p",null,"更新时间: "+a(new Date(f.post.updated_at).toLocaleString("zh-CN")),1)])]),s("div",$t,[o(e(c),{type:"submit",disabled:e(r).processing},{default:l(()=>[i(a(e(r).processing?"保存中...":"保存更改"),1)]),_:1},8,["disabled"]),o(e(c),{type:"button",variant:"outline",onClick:v},{default:l(()=>t[42]||(t[42]=[i(" 取消 ",-1)])),_:1,__:[42]})])],32)]),_:1})]),_:1})])])])])]),_:1}))}});export{ht as default};
