import{ae as $,r as I,D as S,L as k,R as B,G as b,d as M,I as x,a4 as q,a1 as C,aa as G,a6 as V,J as j,af as K,c as Y,o as z,w as _,a as W,e as N,B as H}from"./app-3t97i28o.js";import{r as J,S as O,P as Q}from"./Primitive-JW2Arx4n.js";import{p as X,j as Z,a as ee,u as te}from"./useForwardExpose-UxNsp4bL.js";import{e as R,g as P,c as ne,u as ae}from"./usePrimitiveElement-DXcoxxpM.js";function Ee(t,e="reka"){return`${e}-${$?.()}`}function oe(t,e){const i=I(t);function a(d){return e[i.value][d]??i.value}return{state:i,dispatch:d=>{i.value=a(d)}}}function re(t,e){const i=I({}),a=I("none"),s=I(t),d=t.value?"mounted":"unmounted";let c;const v=e.value?.ownerDocument.defaultView??X,{state:m,dispatch:u}=oe(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),n=o=>{if(Z){const r=new CustomEvent(o,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(r)}};S(t,async(o,r)=>{const g=r!==o;if(await k(),g){const y=a.value,E=w(e.value);o?(u("MOUNT"),n("enter"),E==="none"&&n("after-enter")):E==="none"||E==="undefined"||i.value?.display==="none"?(u("UNMOUNT"),n("leave"),n("after-leave")):r&&y!==E?(u("ANIMATION_OUT"),n("leave")):(u("UNMOUNT"),n("after-leave"))}},{immediate:!0});const l=o=>{const r=w(e.value),g=r.includes(o.animationName),y=m.value==="mounted"?"enter":"leave";if(o.target===e.value&&g&&(n(`after-${y}`),u("ANIMATION_END"),!s.value)){const E=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",c=v?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=E)})}o.target===e.value&&r==="none"&&u("ANIMATION_END")},f=o=>{o.target===e.value&&(a.value=w(e.value))},p=S(e,(o,r)=>{o?(i.value=getComputedStyle(o),o.addEventListener("animationstart",f),o.addEventListener("animationcancel",l),o.addEventListener("animationend",l)):(u("ANIMATION_END"),c!==void 0&&v?.clearTimeout(c),r?.removeEventListener("animationstart",f),r?.removeEventListener("animationcancel",l),r?.removeEventListener("animationend",l))},{immediate:!0}),A=S(m,()=>{const o=w(e.value);a.value=m.value==="mounted"?o:"none"});return B(()=>{p(),A()}),{isPresent:b(()=>["mounted","unmountSuspended"].includes(m.value))}}function w(t){return t&&getComputedStyle(t).animationName||"none"}var Ie=M({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:i}){const{present:a,forceMount:s}=x(t),d=I(),{isPresent:c}=re(a,d);i({present:c});let v=e.default({present:c.value});v=J(v||[]);const m=q();if(v&&v?.length>1){const u=m?.parent?.type.name?`<${m.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${u}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(n=>`  - ${n}`).join(`
`)].join(`
`))}return()=>s.value||a.value||c.value?C(e.default({present:c.value})[0],{ref:u=>{const n=ee(u);return typeof n?.hasAttribute>"u"||(n?.hasAttribute("data-reka-popper-content-wrapper")?d.value=n.firstElementChild:d.value=n),n}}):null}});const U="data-reka-collection-item";function ie(t={}){const{key:e="",isProvider:i=!1}=t,a=`${e}CollectionProvider`;let s;if(i){const n=I(new Map);s={collectionRef:I(),itemMap:n},G(a,s)}else s=V(a);const d=(n=!1)=>{const l=s.collectionRef.value;if(!l)return[];const f=Array.from(l.querySelectorAll(`[${U}]`)),A=Array.from(s.itemMap.value.values()).sort((h,o)=>f.indexOf(h.ref)-f.indexOf(o.ref));return n?A:A.filter(h=>h.ref.dataset.disabled!=="")},c=M({name:"CollectionSlot",setup(n,{slots:l}){const{primitiveElement:f,currentElement:p}=R();return S(p,()=>{s.collectionRef.value=p.value}),()=>C(O,{ref:f},l)}}),v=M({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(n,{slots:l,attrs:f}){const{primitiveElement:p,currentElement:A}=R();return j(h=>{if(A.value){const o=K(A.value);s.itemMap.value.set(o,{ref:A.value,value:n.value}),h(()=>s.itemMap.value.delete(o))}}),()=>C(O,{...f,[U]:"",ref:p},l)}}),m=b(()=>Array.from(s.itemMap.value.values())),u=b(()=>s.itemMap.value.size);return{getItems:d,reactiveItems:m,itemMapSize:u,CollectionSlot:c,CollectionItem:v}}const se="rovingFocusGroup.onEntryFocus",ue={bubbles:!1,cancelable:!0},le={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ce(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function ye(t,e,i){const a=ce(t.key,i);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return le[a]}function de(t,e=!1){const i=P();for(const a of t)if(a===i||(a.focus({preventScroll:e}),P()!==i))return}function he(t,e){return t.map((i,a)=>t[(e+a)%t.length])}const[Te,fe]=ne("RovingFocusGroup");var me=M({__name:"RovingFocusGroup",props:{orientation:{type:String,required:!1,default:void 0},dir:{type:String,required:!1},loop:{type:Boolean,required:!1,default:!1},currentTabStopId:{type:[String,null],required:!1},defaultCurrentTabStopId:{type:String,required:!1},preventScrollOnEntryFocus:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["entryFocus","update:currentTabStopId"],setup(t,{expose:e,emit:i}){const a=t,s=i,{loop:d,orientation:c,dir:v}=x(a),m=ae(v),u=te(a,"currentTabStopId",s,{defaultValue:a.defaultCurrentTabStopId,passive:a.currentTabStopId===void 0}),n=I(!1),l=I(!1),f=I(0),{getItems:p,CollectionSlot:A}=ie({isProvider:!0});function h(r){const g=!l.value;if(r.currentTarget&&r.target===r.currentTarget&&g&&!n.value){const y=new CustomEvent(se,ue);if(r.currentTarget.dispatchEvent(y),s("entryFocus",y),!y.defaultPrevented){const E=p().map(T=>T.ref).filter(T=>T.dataset.disabled!==""),F=E.find(T=>T.getAttribute("data-active")===""),D=E.find(T=>T.id===u.value),L=[F,D,...E].filter(Boolean);de(L,a.preventScrollOnEntryFocus)}}l.value=!1}function o(){setTimeout(()=>{l.value=!1},1)}return e({getItems:p}),fe({loop:d,dir:m,orientation:c,currentTabStopId:u,onItemFocus:r=>{u.value=r},onItemShiftTab:()=>{n.value=!0},onFocusableItemAdd:()=>{f.value++},onFocusableItemRemove:()=>{f.value--}}),(r,g)=>(z(),Y(N(A),null,{default:_(()=>[W(N(Q),{tabindex:n.value||f.value===0?-1:0,"data-orientation":N(c),as:r.as,"as-child":r.asChild,dir:N(m),style:{outline:"none"},onMousedown:g[0]||(g[0]=y=>l.value=!0),onMouseup:o,onFocus:h,onBlur:g[1]||(g[1]=y=>n.value=!1)},{default:_(()=>[H(r.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),Ne=me;export{Ie as P,Ne as R,Ee as a,de as f,ye as g,Te as i,ie as u,he as w};
