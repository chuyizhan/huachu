import{d as O,r as y,c as n,o as a,w as S,a as h,b as e,e as o,h as P,i as u,j as l,k as _,p as X,q as Y,s as $,t as i,f as p,F as M,x as T,n as B,m as j,l as C}from"./app-CFoezxJ4.js";import{_ as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-BghptrO8.js";import{C as D}from"./chevron-up-Cf5-sdP1.js";import{C as N}from"./chevron-down-Bq4OklCB.js";import{C as G}from"./check-u1K-5Gsi.js";import{X as J}from"./UserMenuContent.vue_vue_type_script_setup_true_lang-CnjjDV1A.js";import{S as Q}from"./star-DITBatSg.js";import{S as R}from"./star-off-ChBI_WNM.js";import{T as W}from"./trash-2-DKODGYEj.js";import"./Primitive-Ctm7kvjE.js";import"./useForwardExpose-RpB-lHY-.js";import"./usePrimitiveElement-DTLZ93y9.js";import"./RovingFocusGroup-BGPAxTtN.js";import"./VisuallyHidden-VTW4-h8m.js";import"./index-hQTy9Ctr.js";import"./createLucideIcon-De0fyrFm.js";import"./DialogTitle-peVRWEyw.js";import"./index-C5W0E7bH.js";import"./AppLogo.vue_vue_type_script_setup_true_lang-n3ZcxheT.js";import"./shield-SjraX-8k.js";import"./trending-up-BFSKtAq1.js";import"./file-text-z29fDJ1C.js";import"./chevron-right-ngQYC-ou.js";import"./index-DoPs8jux.js";import"./useArrowNavigation-C6Y-ieo6.js";const Z={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},ee={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6"},te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},re={class:"mb-4 text-sm text-gray-600 dark:text-gray-400"},se={class:"bg-white dark:bg-gray-800 shadow overflow-hidden rounded-lg"},ae={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},oe={class:"bg-gray-50 dark:bg-gray-700"},ie={class:"flex items-center gap-1"},le={class:"flex items-center gap-1"},de={class:"flex items-center gap-1"},ne={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ge={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},ue={class:"px-6 py-4 whitespace-nowrap"},pe={class:"flex flex-col"},xe={class:"text-sm font-medium text-gray-900 dark:text-white"},me={class:"text-sm text-gray-500 dark:text-gray-400"},fe={key:0,class:"text-xs text-gray-400"},ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},ce={class:"px-6 py-4 whitespace-nowrap"},ve={class:"px-6 py-4 whitespace-nowrap text-sm"},ke={class:"flex flex-col gap-1"},be={key:0,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"},we={key:1,class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},he={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600 dark:text-green-400"},_e={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600 dark:text-blue-400"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Se={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},$e={class:"flex items-center justify-end gap-2"},je=["onClick"],Ve=["onClick"],De=["onClick","title"],Ne=["onClick"],Fe={key:0,class:"mt-6"},Me={class:"flex items-center justify-between"},Te={class:"flex-1 flex justify-between sm:hidden"},Be={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ue={class:"text-sm text-gray-700 dark:text-gray-300"},ze={class:"font-medium"},Le={class:"font-medium"},Ie={class:"font-medium"},He={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},ut=O({__name:"Index",props:{creators:{},filters:{}},setup(U){const m=U,c=y(m.filters.search||""),v=y(m.filters.verification_status||""),k=y(m.filters.is_featured||""),b=y(m.filters.is_top_creator||""),g=y(m.filters.sort_by||"created_at"),d=y(m.filters.sort_direction||"desc"),w=y(m.filters.per_page||"20"),x=()=>{const r={};c.value&&(r.search=c.value),v.value&&(r.verification_status=v.value),k.value!==""&&(r.is_featured=k.value),b.value!==""&&(r.is_top_creator=b.value),g.value&&(r.sort_by=g.value),d.value&&(r.sort_direction=d.value),w.value&&(r.per_page=w.value),C.get("/admin/creators",r,{preserveState:!0,preserveScroll:!0})},z=()=>{c.value="",v.value="",k.value="",b.value="",g.value="created_at",d.value="desc",w.value="20",x()},V=r=>{g.value===r?d.value=d.value==="asc"?"desc":"asc":(g.value=r,d.value="desc"),x()},L=r=>{confirm("确定要验证此创作者吗？")&&C.post(`/admin/creators/${r}/verify`,{},{preserveScroll:!0})},I=r=>{const t=prompt("请输入拒绝原因：");t&&C.post(`/admin/creators/${r}/reject`,{verification_notes:t},{preserveScroll:!0})},H=r=>{C.post(`/admin/creators/${r}/toggle-featured`,{},{preserveScroll:!0})},K=r=>{confirm("确定要移除此用户的创作者身份吗？这将软删除其创作者资料。")&&C.delete(`/admin/creators/${r}`,{preserveScroll:!0})},q=r=>({pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",verified:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",rejected:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"})[r]||"bg-gray-100 text-gray-800",E=r=>new Date(r).toLocaleDateString("zh-CN"),F=r=>r==null?"¥0.00":new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(r);return(r,t)=>(a(),n(A,null,{default:S(()=>[h(o(P),{title:"创作者管理"}),e("div",Z,[t[33]||(t[33]=e("div",{class:"mb-6"},[e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"创作者管理"),e("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"}," 管理所有创作者及其资料 ")],-1)),e("div",ee,[e("div",te,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 搜索 ",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),type:"text",placeholder:"名称、邮箱、专长...",class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onKeyup:X(x,["enter"])},null,544),[[Y,c.value]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 验证状态 ",-1)),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),onChange:x,class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[9]||(t[9]=[e("option",{value:""},"全部",-1),e("option",{value:"pending"},"待审核",-1),e("option",{value:"verified"},"已验证",-1),e("option",{value:"rejected"},"已拒绝",-1)]),544),[[$,v.value]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 精选状态 ",-1)),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>k.value=s),onChange:x,class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[11]||(t[11]=[e("option",{value:""},"全部",-1),e("option",{value:"1"},"精选",-1),e("option",{value:"0"},"非精选",-1)]),544),[[$,k.value]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 顶级创作者 ",-1)),_(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>b.value=s),onChange:x,class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[13]||(t[13]=[e("option",{value:""},"全部",-1),e("option",{value:"1"},"是",-1),e("option",{value:"0"},"否",-1)]),544),[[$,b.value]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 每页显示 ",-1)),_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>w.value=s),onChange:x,class:"w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},t[15]||(t[15]=[e("option",{value:"10"},"10",-1),e("option",{value:"20"},"20",-1),e("option",{value:"50"},"50",-1),e("option",{value:"100"},"100",-1)]),544),[[$,w.value]])])]),e("div",{class:"mt-4 flex gap-2"},[e("button",{onClick:x,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"}," 应用筛选 "),e("button",{onClick:z,class:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500"}," 清除筛选 ")])]),e("div",re," 显示 "+i(r.creators.total)+" 个创作者中的 "+i(r.creators.data.length)+" 个 ",1),e("div",se,[e("table",ae,[e("thead",oe,[e("tr",null,[e("th",{onClick:t[5]||(t[5]=s=>V("id")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"},[e("div",ie,[t[17]||(t[17]=p(" ID ",-1)),g.value==="id"&&d.value==="asc"?(a(),n(o(D),{key:0,class:"h-4 w-4"})):l("",!0),g.value==="id"&&d.value==="desc"?(a(),n(o(N),{key:1,class:"h-4 w-4"})):l("",!0)])]),t[20]||(t[20]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 创作者信息 ",-1)),e("th",{onClick:t[6]||(t[6]=s=>V("follower_count")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"},[e("div",le,[t[18]||(t[18]=p(" 粉丝数 ",-1)),g.value==="follower_count"&&d.value==="asc"?(a(),n(o(D),{key:0,class:"h-4 w-4"})):l("",!0),g.value==="follower_count"&&d.value==="desc"?(a(),n(o(N),{key:1,class:"h-4 w-4"})):l("",!0)])]),t[21]||(t[21]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 验证状态 ",-1)),t[22]||(t[22]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 标签 ",-1)),t[23]||(t[23]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 创作者收益 ",-1)),t[24]||(t[24]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 平台分成 ",-1)),e("th",{onClick:t[7]||(t[7]=s=>V("created_at")),class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600"},[e("div",de,[t[19]||(t[19]=p(" 创建时间 ",-1)),g.value==="created_at"&&d.value==="asc"?(a(),n(o(D),{key:0,class:"h-4 w-4"})):l("",!0),g.value==="created_at"&&d.value==="desc"?(a(),n(o(N),{key:1,class:"h-4 w-4"})):l("",!0)])]),t[25]||(t[25]=e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," 操作 ",-1))])]),e("tbody",ne,[(a(!0),u(M,null,T(r.creators.data,s=>(a(),u("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",ge,i(s.id),1),e("td",ue,[e("div",pe,[e("div",xe,i(s.creator_profile?.display_name||s.name),1),e("div",me,i(s.email),1),s.creator_profile?.specialty?(a(),u("div",fe,i(s.creator_profile.specialty),1)):l("",!0)])]),e("td",ye,i(s.creator_profile?.follower_count||0),1),e("td",ce,[s.creator_profile?(a(),u("span",{key:0,class:B([q(s.creator_profile.verification_status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},i(s.creator_profile.verification_status==="pending"?"待审核":"")+" "+i(s.creator_profile.verification_status==="verified"?"已验证":"")+" "+i(s.creator_profile.verification_status==="rejected"?"已拒绝":""),3)):l("",!0)]),e("td",ve,[e("div",ke,[s.is_top_creator?(a(),u("span",be," 顶级创作者 ")):l("",!0),s.creator_profile?.is_featured?(a(),u("span",we," 精选 ")):l("",!0)])]),e("td",he,i(F(s.creator_profile?.total_earnings)),1),e("td",_e,i(F(s.creator_profile?.total_platform_share)),1),e("td",Ce,i(E(s.created_at)),1),e("td",Se,[e("div",$e,[h(o(j),{href:`/admin/creators/${s.id}`,class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},{default:S(()=>t[26]||(t[26]=[p(" 查看 ",-1)])),_:2,__:[26]},1032,["href"]),s.creator_profile?.verification_status==="pending"?(a(),u("button",{key:0,onClick:f=>L(s.id),class:"text-green-600 hover:text-green-900 dark:text-green-400",title:"验证"},[h(o(G),{class:"h-4 w-4"})],8,je)):l("",!0),s.creator_profile?.verification_status==="pending"?(a(),u("button",{key:1,onClick:f=>I(s.id),class:"text-red-600 hover:text-red-900 dark:text-red-400",title:"拒绝"},[h(o(J),{class:"h-4 w-4"})],8,Ve)):l("",!0),e("button",{onClick:f=>H(s.id),class:"text-yellow-600 hover:text-yellow-900 dark:text-yellow-400",title:s.creator_profile?.is_featured?"取消精选":"设为精选"},[s.creator_profile?.is_featured?(a(),n(o(R),{key:1,class:"h-4 w-4"})):(a(),n(o(Q),{key:0,class:"h-4 w-4"}))],8,De),e("button",{onClick:f=>K(s.id),class:"text-red-600 hover:text-red-900 dark:text-red-400",title:"移除创作者身份"},[h(o(W),{class:"h-4 w-4"})],8,Ne)])])]))),128))])])]),r.creators.links.length>3?(a(),u("div",Fe,[e("nav",Me,[e("div",Te,[r.creators.links[0].url?(a(),n(o(j),{key:0,href:r.creators.links[0].url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"},{default:S(()=>t[27]||(t[27]=[p(" 上一页 ",-1)])),_:1,__:[27]},8,["href"])):l("",!0),r.creators.links[r.creators.links.length-1].url?(a(),n(o(j),{key:1,href:r.creators.links[r.creators.links.length-1].url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700"},{default:S(()=>t[28]||(t[28]=[p(" 下一页 ",-1)])),_:1,__:[28]},8,["href"])):l("",!0)]),e("div",Be,[e("div",null,[e("p",Ue,[t[29]||(t[29]=p(" 显示 ",-1)),e("span",ze,i((r.creators.current_page-1)*r.creators.per_page+1),1),t[30]||(t[30]=p(" 到 ",-1)),e("span",Le,i(Math.min(r.creators.current_page*r.creators.per_page,r.creators.total)),1),t[31]||(t[31]=p(" 共 ",-1)),e("span",Ie,i(r.creators.total),1),t[32]||(t[32]=p(" 个结果 ",-1))])]),e("div",null,[e("nav",He,[(a(!0),u(M,null,T(r.creators.links,(s,f)=>(a(),n(o(j),{key:f,href:s.url||"#",class:B(["relative inline-flex items-center px-4 py-2 border text-sm font-medium",s.active?"z-10 bg-indigo-50 dark:bg-indigo-900 border-indigo-500 text-indigo-600 dark:text-indigo-300":"bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700",f===0?"rounded-l-md":"",f===r.creators.links.length-1?"rounded-r-md":"",s.url?"":"cursor-not-allowed opacity-50"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])])])])):l("",!0)])]),_:1}))}});export{ut as default};
