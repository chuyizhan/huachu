import{d as j,l as i,c as k,o as n,w as p,a as r,b as e,e as a,h as D,i as g,j as I,y as v,f as y,k as L,q as M,F as w,s as V,t as l,x as T,n as U,r as C}from"./app-Ca0afq3n.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-DzoV8Ger.js";import{_ as $}from"./index-G1C2CR8F.js";import{_ as S}from"./Input.vue_vue_type_script_setup_true_lang-C8Zmhzql.js";import{_ as H}from"./index-3Q5PlVJg.js";import"./Primitive-CCTnzWDl.js";import"./useForwardExpose-DohNH0gZ.js";import"./usePrimitiveElement-B7nxCNRu.js";import"./UserMenuContent.vue_vue_type_script_setup_true_lang-DK07fgD3.js";import"./createLucideIcon-DPfk0LRx.js";import"./RovingFocusGroup-CGclM9bG.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-dW9Vi417.js";import"./VisuallyHidden-C0RsCe16.js";import"./DialogTitle-BDlYXDl3.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-1Fj_CnnR.js";import"./file-text-93NE-onm.js";import"./trending-up-xi3HRqTL.js";import"./book-open-G6YLMMGF.js";const P={class:"py-12"},q={class:"w-full sm:px-6 lg:px-8"},A={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},E={class:"p-6 text-gray-900 dark:text-gray-100"},G={class:"mb-6 flex items-center justify-between"},J={class:"mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},K={class:"overflow-x-auto"},O={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Q={class:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700"},R={class:"px-6 py-4 whitespace-nowrap"},W={class:"text-sm font-semibold"},X={class:"px-6 py-4"},Y={class:"flex items-center gap-2"},Z={class:"text-sm font-medium"},ee={class:"text-xs text-gray-500"},te={class:"px-6 py-4 whitespace-nowrap"},se={class:"text-sm font-semibold text-green-600"},ae={class:"px-6 py-4 whitespace-nowrap"},re={class:"text-sm"},le={class:"px-6 py-4 whitespace-nowrap"},oe={class:"text-sm"},de={class:"px-6 py-4 whitespace-nowrap"},ie={class:"px-6 py-4 whitespace-nowrap"},ne={class:"text-sm"},pe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ce=["onClick"],ue={key:0,class:"mt-6 flex justify-center"},me={class:"inline-flex rounded-md shadow-sm -space-x-px"},Ie=j({__name:"Index",props:{plans:{},filters:{}},setup(B){const o=B,c=i(o.filters.search||""),u=i(o.filters.is_active||""),m=i(o.filters.level||""),f=i(o.filters.sort_by||"sort_order"),h=i(o.filters.sort_direction||"asc"),b=i(o.filters.per_page||"20"),x=()=>{C.get("/admin/plans",{search:c.value,is_active:u.value,level:m.value,sort_by:f.value,sort_direction:h.value,per_page:b.value},{preserveState:!0,preserveScroll:!0})},F=()=>{c.value="",u.value="",m.value="",f.value="sort_order",h.value="asc",b.value="20",x()},N=d=>{confirm("确定要删除此套餐吗？")&&C.delete(`/admin/plans/${d}`,{preserveScroll:!0})};return(d,s)=>(n(),k(z,null,{default:p(()=>[r(a(D),{title:"套餐管理"}),e("div",P,[e("div",q,[e("div",A,[e("div",E,[e("div",G,[s[4]||(s[4]=e("h1",{class:"text-2xl font-semibold"},"套餐管理",-1)),r(a(v),{href:"/admin/plans/create"},{default:p(()=>[r(a($),null,{default:p(()=>s[3]||(s[3]=[y("创建套餐",-1)])),_:1,__:[3]})]),_:1})]),e("div",J,[e("div",null,[r(a(S),{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),placeholder:"搜索套餐名称或别名...",onInput:x},null,8,["modelValue"])]),e("div",null,[L(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>u.value=t),onChange:x,class:"w-full px-4 py-2 border border-gray-300 rounded-md dark:border-gray-600 dark:bg-gray-700 dark:text-white"},s[5]||(s[5]=[e("option",{value:""},"全部状态",-1),e("option",{value:"1"},"启用",-1),e("option",{value:"0"},"禁用",-1)]),544),[[M,u.value]])]),e("div",null,[r(a(S),{modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=t=>m.value=t),type:"number",placeholder:"等级...",onInput:x},null,8,["modelValue"])]),e("div",null,[r(a($),{variant:"outline",onClick:F,class:"w-full"},{default:p(()=>s[6]||(s[6]=[y(" 清除筛选 ",-1)])),_:1,__:[6]})])]),e("div",K,[e("table",O,[s[8]||(s[8]=e("thead",{class:"bg-gray-50 dark:bg-gray-900"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"等级"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"套餐名称"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"价格"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"周期"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"订阅数"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"状态"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"排序"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400"},"操作")])],-1)),e("tbody",Q,[(n(!0),g(w,null,V(d.plans.data,t=>(n(),g("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",R,[e("span",W,l(t.level),1)]),e("td",X,[e("div",Y,[e("div",{class:"w-4 h-4 rounded",style:T({backgroundColor:t.badge_color})},null,4),e("div",null,[e("div",Z,l(t.name),1),e("div",ee,l(t.slug),1)])])]),e("td",te,[e("span",se,"¥"+l(t.price),1)]),e("td",ae,[e("span",re,l(t.period_days)+" 天",1)]),e("td",le,[e("span",oe,l(t.subscriptions_count),1)]),e("td",de,[r(a(H),{variant:t.is_active?"default":"secondary"},{default:p(()=>[y(l(t.is_active?"启用":"禁用"),1)]),_:2},1032,["variant"])]),e("td",ie,[e("span",ne,l(t.sort_order),1)]),e("td",pe,[r(a(v),{href:`/admin/plans/${t.id}/edit`,class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 mr-3"},{default:p(()=>s[7]||(s[7]=[y(" 编辑 ",-1)])),_:2,__:[7]},1032,["href"]),e("button",{onClick:_=>N(t.id),class:"text-red-600 hover:text-red-900 dark:text-red-400"}," 删除 ",8,ce)])]))),128))])])]),d.plans.last_page>1?(n(),g("div",ue,[e("nav",me,[(n(!0),g(w,null,V(d.plans.links,(t,_)=>(n(),k(a(v),{key:_,href:t.url||"#",class:U(["px-3 py-2 text-sm border",t.active?"bg-blue-50 border-blue-500 text-blue-600 dark:bg-blue-900 dark:text-blue-200":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400",_===0?"rounded-l-md":"",_===d.plans.links.length-1?"rounded-r-md":""]),innerHTML:t.label,disabled:!t.url},null,8,["href","class","innerHTML","disabled"]))),128))])])):I("",!0)])])])])]),_:1}))}});export{Ie as default};
